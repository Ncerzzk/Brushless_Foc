ARM GAS  C:\Users\ncer\AppData\Local\Temp\ccYNhntL.s 			page 1


   1              		.cpu cortex-m4
   2              		.eabi_attribute 27, 1
   3              		.eabi_attribute 28, 1
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 1
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.file	"music_and_voice.c"
  14              		.text
  15              	.Ltext0:
  16              		.cfi_sections	.debug_frame
  17              		.section	.text.Music_Init,"ax",%progbits
  18              		.align	1
  19              		.global	Music_Init
  20              		.arch armv7e-m
  21              		.syntax unified
  22              		.thumb
  23              		.thumb_func
  24              		.fpu fpv4-sp-d16
  26              	Music_Init:
  27              	.LVL0:
  28              	.LFB130:
  29              		.file 1 "mylib/music_and_voice.c"
   1:mylib/music_and_voice.c **** #include "music_and_voice.h"
   2:mylib/music_and_voice.c **** #include "foc.h"
   3:mylib/music_and_voice.c **** 
   4:mylib/music_and_voice.c **** extern Uvect_Mos U0,U4,U6;
   5:mylib/music_and_voice.c **** struct
   6:mylib/music_and_voice.c **** {
   7:mylib/music_and_voice.c ****     uint32_t ms_cnt;
   8:mylib/music_and_voice.c ****     uint32_t cnt;
   9:mylib/music_and_voice.c ****     uint32_t TIM_old_ARR;
  10:mylib/music_and_voice.c ****     float time;   // 一个音符持续的时间 range from 0-1
  11:mylib/music_and_voice.c ****     uint8_t stop;
  12:mylib/music_and_voice.c **** 
  13:mylib/music_and_voice.c ****     TIM_HandleTypeDef * USE_TIM;
  14:mylib/music_and_voice.c ****     uint32_t TIM_MAX_FREQ;
  15:mylib/music_and_voice.c ****     uint16_t BEAT_cnt;  // 节拍计数值
  16:mylib/music_and_voice.c ****     float DUTY;
  17:mylib/music_and_voice.c **** } Music_Info;
  18:mylib/music_and_voice.c **** 
  19:mylib/music_and_voice.c **** 
  20:mylib/music_and_voice.c **** typedef enum
  21:mylib/music_and_voice.c **** {
  22:mylib/music_and_voice.c ****     STOP_NOTE = 20000,
  23:mylib/music_and_voice.c ****     DO = 261,
  24:mylib/music_and_voice.c ****     RE = 293,
  25:mylib/music_and_voice.c ****     MI = 329,
  26:mylib/music_and_voice.c ****     FA = 349,
  27:mylib/music_and_voice.c ****     SOL = 392,
  28:mylib/music_and_voice.c ****     LA = 440,
  29:mylib/music_and_voice.c ****     SI = 493
ARM GAS  C:\Users\ncer\AppData\Local\Temp\ccYNhntL.s 			page 2


  30:mylib/music_and_voice.c **** } MUSIC_FREQ;
  31:mylib/music_and_voice.c **** 
  32:mylib/music_and_voice.c **** MUSIC_FREQ Music_Freqs[8] = {STOP_NOTE, DO, RE, MI, FA, SOL, LA, SI};
  33:mylib/music_and_voice.c **** //uint16_t Music_Song[]={0x1803,0x1802,0x1801,0x806,0x1801,0x1802,0x1803,0x1805,0x1803,0x1802,0x180
  34:mylib/music_and_voice.c **** uint16_t Music_Song[] = {0x803, 0x803, 0x803, 0x802, 0x203, 0x802, 0x803, 0x802, 0x802, 0x3406, 0x3
  35:mylib/music_and_voice.c **** /*
  36:mylib/music_and_voice.c **** 3/,3/,3/,2/,3-,2/,3/,2/,2/,-6,-6/,-7/,1,2/,1/,-7
  37:mylib/music_and_voice.c **** */
  38:mylib/music_and_voice.c **** 
  39:mylib/music_and_voice.c **** void Music_Init(TIM_HandleTypeDef * tim,uint8_t beat_cnt_per_minute,float duty){
  30              		.loc 1 39 80 view -0
  31              		.cfi_startproc
  32              		@ args = 0, pretend = 0, frame = 0
  33              		@ frame_needed = 0, uses_anonymous_args = 0
  34              		@ link register save eliminated.
  40:mylib/music_and_voice.c ****     Music_Info.USE_TIM=tim;
  35              		.loc 1 40 5 view .LVU1
  36              		.loc 1 40 23 is_stmt 0 view .LVU2
  37 0000 0E4B     		ldr	r3, .L4
  38 0002 5861     		str	r0, [r3, #20]
  41:mylib/music_and_voice.c ****     if(tim->Instance!=TIM1 && tim->Instance!=TIM8){
  39              		.loc 1 41 5 is_stmt 1 view .LVU3
  40              		.loc 1 41 11 is_stmt 0 view .LVU4
  41 0004 0368     		ldr	r3, [r0]
  42              		.loc 1 41 7 view .LVU5
  43 0006 0E4A     		ldr	r2, .L4+4
  44 0008 9342     		cmp	r3, r2
  45 000a 0AD0     		beq	.L2
  46              		.loc 1 41 28 discriminator 1 view .LVU6
  47 000c 02F58062 		add	r2, r2, #1024
  48 0010 9342     		cmp	r3, r2
  49 0012 06D0     		beq	.L2
  42:mylib/music_and_voice.c ****         Music_Info.TIM_MAX_FREQ=84000000;
  50              		.loc 1 42 9 is_stmt 1 view .LVU7
  51              		.loc 1 42 32 is_stmt 0 view .LVU8
  52 0014 094B     		ldr	r3, .L4
  53 0016 02F14542 		add	r2, r2, #-989855744
  54 001a 02F53942 		add	r2, r2, #47360
  55 001e 9A61     		str	r2, [r3, #24]
  56 0020 02E0     		b	.L3
  57              	.L2:
  43:mylib/music_and_voice.c ****     }else{
  44:mylib/music_and_voice.c ****         Music_Info.TIM_MAX_FREQ=168000000;
  58              		.loc 1 44 9 is_stmt 1 view .LVU9
  59              		.loc 1 44 32 is_stmt 0 view .LVU10
  60 0022 064B     		ldr	r3, .L4
  61 0024 074A     		ldr	r2, .L4+8
  62 0026 9A61     		str	r2, [r3, #24]
  63              	.L3:
  45:mylib/music_and_voice.c ****     }
  46:mylib/music_and_voice.c ****     Music_Info.BEAT_cnt=1000*60/beat_cnt_per_minute;
  64              		.loc 1 46 5 is_stmt 1 view .LVU11
  65              		.loc 1 46 32 is_stmt 0 view .LVU12
  66 0028 4EF66023 		movw	r3, #60000
  67 002c 93FBF1F1 		sdiv	r1, r3, r1
  68              	.LVL1:
  69              		.loc 1 46 24 view .LVU13
ARM GAS  C:\Users\ncer\AppData\Local\Temp\ccYNhntL.s 			page 3


  70 0030 024B     		ldr	r3, .L4
  71 0032 9983     		strh	r1, [r3, #28]	@ movhi
  47:mylib/music_and_voice.c **** 
  48:mylib/music_and_voice.c ****     Music_Info.DUTY=duty;
  72              		.loc 1 48 5 is_stmt 1 view .LVU14
  73              		.loc 1 48 20 is_stmt 0 view .LVU15
  74 0034 83ED080A 		vstr.32	s0, [r3, #32]
  49:mylib/music_and_voice.c **** 
  50:mylib/music_and_voice.c **** }
  75              		.loc 1 50 1 view .LVU16
  76 0038 7047     		bx	lr
  77              	.L5:
  78 003a 00BF     		.align	2
  79              	.L4:
  80 003c 00000000 		.word	Music_Info
  81 0040 00000140 		.word	1073807360
  82 0044 007A030A 		.word	168000000
  83              		.cfi_endproc
  84              	.LFE130:
  86              		.section	.text.Music_Get_Note,"ax",%progbits
  87              		.align	1
  88              		.global	Music_Get_Note
  89              		.syntax unified
  90              		.thumb
  91              		.thumb_func
  92              		.fpu fpv4-sp-d16
  94              	Music_Get_Note:
  95              	.LVL2:
  96              	.LFB131:
  51:mylib/music_and_voice.c **** 
  52:mylib/music_and_voice.c **** #define HALF_NOTE_K 1.059f
  53:mylib/music_and_voice.c **** float Music_Get_Note(uint16_t num, float *time)
  54:mylib/music_and_voice.c **** {
  97              		.loc 1 54 1 is_stmt 1 view -0
  98              		.cfi_startproc
  99              		@ args = 0, pretend = 0, frame = 0
 100              		@ frame_needed = 0, uses_anonymous_args = 0
 101              		@ link register save eliminated.
 102              		.loc 1 54 1 is_stmt 0 view .LVU18
 103 0000 10B4     		push	{r4}
 104              	.LCFI0:
 105              		.cfi_def_cfa_offset 4
 106              		.cfi_offset 4, -4
  55:mylib/music_and_voice.c ****     uint8_t index = num & 0xFF;
 107              		.loc 1 55 5 is_stmt 1 view .LVU19
 108              		.loc 1 55 13 is_stmt 0 view .LVU20
 109 0002 C2B2     		uxtb	r2, r0
 110              	.LVL3:
  56:mylib/music_and_voice.c ****     MUSIC_FREQ note = Music_Freqs[index];
 111              		.loc 1 56 5 is_stmt 1 view .LVU21
 112              		.loc 1 56 16 is_stmt 0 view .LVU22
 113 0004 264B     		ldr	r3, .L21
 114 0006 33F81220 		ldrh	r2, [r3, r2, lsl #1]
 115              	.LVL4:
  57:mylib/music_and_voice.c **** 
  58:mylib/music_and_voice.c ****     float result = note;
 116              		.loc 1 58 5 is_stmt 1 view .LVU23
ARM GAS  C:\Users\ncer\AppData\Local\Temp\ccYNhntL.s 			page 4


 117              		.loc 1 58 11 is_stmt 0 view .LVU24
 118 000a 07EE902A 		vmov	s15, r2	@ int
 119 000e B8EE670A 		vcvt.f32.u32	s0, s15
 120              	.LVL5:
  59:mylib/music_and_voice.c **** 
  60:mylib/music_and_voice.c ****     uint8_t t = (num & 0xF00) >> 8;
 121              		.loc 1 60 5 is_stmt 1 view .LVU25
 122              		.loc 1 60 13 is_stmt 0 view .LVU26
 123 0012 C0F30323 		ubfx	r3, r0, #8, #4
 124              	.LVL6:
  61:mylib/music_and_voice.c ****     uint8_t octave = (num & 0x3000) >> 12;
 125              		.loc 1 61 5 is_stmt 1 view .LVU27
 126              		.loc 1 61 13 is_stmt 0 view .LVU28
 127 0016 C0F30134 		ubfx	r4, r0, #12, #2
 128              	.LVL7:
  62:mylib/music_and_voice.c ****     uint8_t semitone = (num & 0xC000) >> 14;
 129              		.loc 1 62 5 is_stmt 1 view .LVU29
 130              		.loc 1 62 13 is_stmt 0 view .LVU30
 131 001a 800B     		lsrs	r0, r0, #14
 132              	.LVL8:
  63:mylib/music_and_voice.c ****     switch (t)
 133              		.loc 1 63 5 is_stmt 1 view .LVU31
 134 001c 013B     		subs	r3, r3, #1
 135              	.LVL9:
 136              		.loc 1 63 5 is_stmt 0 view .LVU32
 137 001e 0E2B     		cmp	r3, #14
 138 0020 0CD8     		bhi	.L7
 139 0022 DFE803F0 		tbb	[pc, r3]
 140              	.L9:
 141 0026 08       		.byte	(.L13-.L9)/2
 142 0027 16       		.byte	(.L12-.L9)/2
 143 0028 0B       		.byte	(.L7-.L9)/2
 144 0029 1A       		.byte	(.L11-.L9)/2
 145 002a 0B       		.byte	(.L7-.L9)/2
 146 002b 0B       		.byte	(.L7-.L9)/2
 147 002c 0B       		.byte	(.L7-.L9)/2
 148 002d 1E       		.byte	(.L10-.L9)/2
 149 002e 0B       		.byte	(.L7-.L9)/2
 150 002f 0B       		.byte	(.L7-.L9)/2
 151 0030 0B       		.byte	(.L7-.L9)/2
 152 0031 0B       		.byte	(.L7-.L9)/2
 153 0032 0B       		.byte	(.L7-.L9)/2
 154 0033 0B       		.byte	(.L7-.L9)/2
 155 0034 22       		.byte	(.L8-.L9)/2
 156 0035 00       		.p2align 1
 157              	.L13:
  64:mylib/music_and_voice.c ****     {
  65:mylib/music_and_voice.c ****     case 1:
  66:mylib/music_and_voice.c ****         *time = 4.0f;
 158              		.loc 1 66 9 is_stmt 1 view .LVU33
 159              		.loc 1 66 15 is_stmt 0 view .LVU34
 160 0036 4FF08143 		mov	r3, #1082130432
 161              	.LVL10:
 162              		.loc 1 66 15 view .LVU35
 163 003a 0B60     		str	r3, [r1]	@ float
  67:mylib/music_and_voice.c ****         break;
 164              		.loc 1 67 9 is_stmt 1 view .LVU36
ARM GAS  C:\Users\ncer\AppData\Local\Temp\ccYNhntL.s 			page 5


 165              	.L7:
  68:mylib/music_and_voice.c ****     case 2:
  69:mylib/music_and_voice.c ****         *time = 2.0f;
  70:mylib/music_and_voice.c ****         break;
  71:mylib/music_and_voice.c ****     case 4:
  72:mylib/music_and_voice.c ****         *time = 1.0f;
  73:mylib/music_and_voice.c ****         break;
  74:mylib/music_and_voice.c ****     case 8:
  75:mylib/music_and_voice.c ****         *time = 0.5f;
  76:mylib/music_and_voice.c ****         break;
  77:mylib/music_and_voice.c ****     case 0xF:
  78:mylib/music_and_voice.c ****         *time = 0.25f;
  79:mylib/music_and_voice.c ****         break;
  80:mylib/music_and_voice.c **** 
  81:mylib/music_and_voice.c ****     default:
  82:mylib/music_and_voice.c ****         break;
  83:mylib/music_and_voice.c ****     }
  84:mylib/music_and_voice.c **** 
  85:mylib/music_and_voice.c ****     switch (octave)
 166              		.loc 1 85 5 view .LVU37
 167 003c 012C     		cmp	r4, #1
 168 003e 18D0     		beq	.L14
 169 0040 032C     		cmp	r4, #3
 170 0042 1CD0     		beq	.L15
 171              	.L16:
  86:mylib/music_and_voice.c ****     {
  87:mylib/music_and_voice.c ****     case 1:
  88:mylib/music_and_voice.c ****         result = note * 2;
  89:mylib/music_and_voice.c ****         break;
  90:mylib/music_and_voice.c ****     case 0:
  91:mylib/music_and_voice.c ****         result = note;
  92:mylib/music_and_voice.c ****         break;
  93:mylib/music_and_voice.c ****     case 3:
  94:mylib/music_and_voice.c ****         result = note / 2;
  95:mylib/music_and_voice.c ****         break;
  96:mylib/music_and_voice.c ****     }
  97:mylib/music_and_voice.c **** 
  98:mylib/music_and_voice.c ****     switch (semitone)
 172              		.loc 1 98 5 view .LVU38
 173 0044 0128     		cmp	r0, #1
 174 0046 20D0     		beq	.L17
 175              		.loc 1 98 5 is_stmt 0 view .LVU39
 176 0048 0328     		cmp	r0, #3
 177 004a 23D0     		beq	.L18
 178              	.L6:
  99:mylib/music_and_voice.c ****     {
 100:mylib/music_and_voice.c ****     case 1:
 101:mylib/music_and_voice.c ****         result *= HALF_NOTE_K;
 102:mylib/music_and_voice.c ****         break;
 103:mylib/music_and_voice.c ****     case 0:
 104:mylib/music_and_voice.c ****         break;
 105:mylib/music_and_voice.c ****     case 3:
 106:mylib/music_and_voice.c ****         result /= HALF_NOTE_K;
 107:mylib/music_and_voice.c ****         break;
 108:mylib/music_and_voice.c ****     }
 109:mylib/music_and_voice.c **** 
 110:mylib/music_and_voice.c ****     return result;
ARM GAS  C:\Users\ncer\AppData\Local\Temp\ccYNhntL.s 			page 6


 111:mylib/music_and_voice.c **** }
 179              		.loc 1 111 1 view .LVU40
 180 004c 5DF8044B 		ldr	r4, [sp], #4
 181              	.LCFI1:
 182              		.cfi_remember_state
 183              		.cfi_restore 4
 184              		.cfi_def_cfa_offset 0
 185              	.LVL11:
 186              		.loc 1 111 1 view .LVU41
 187 0050 7047     		bx	lr
 188              	.LVL12:
 189              	.L12:
 190              	.LCFI2:
 191              		.cfi_restore_state
  69:mylib/music_and_voice.c ****         break;
 192              		.loc 1 69 9 is_stmt 1 view .LVU42
  69:mylib/music_and_voice.c ****         break;
 193              		.loc 1 69 15 is_stmt 0 view .LVU43
 194 0052 4FF08043 		mov	r3, #1073741824
 195              	.LVL13:
  69:mylib/music_and_voice.c ****         break;
 196              		.loc 1 69 15 view .LVU44
 197 0056 0B60     		str	r3, [r1]	@ float
  70:mylib/music_and_voice.c ****     case 4:
 198              		.loc 1 70 9 is_stmt 1 view .LVU45
 199 0058 F0E7     		b	.L7
 200              	.LVL14:
 201              	.L11:
  72:mylib/music_and_voice.c ****         break;
 202              		.loc 1 72 9 view .LVU46
  72:mylib/music_and_voice.c ****         break;
 203              		.loc 1 72 15 is_stmt 0 view .LVU47
 204 005a 4FF07E53 		mov	r3, #1065353216
 205              	.LVL15:
  72:mylib/music_and_voice.c ****         break;
 206              		.loc 1 72 15 view .LVU48
 207 005e 0B60     		str	r3, [r1]	@ float
  73:mylib/music_and_voice.c ****     case 8:
 208              		.loc 1 73 9 is_stmt 1 view .LVU49
 209 0060 ECE7     		b	.L7
 210              	.LVL16:
 211              	.L10:
  75:mylib/music_and_voice.c ****         break;
 212              		.loc 1 75 9 view .LVU50
  75:mylib/music_and_voice.c ****         break;
 213              		.loc 1 75 15 is_stmt 0 view .LVU51
 214 0062 4FF07C53 		mov	r3, #1056964608
 215              	.LVL17:
  75:mylib/music_and_voice.c ****         break;
 216              		.loc 1 75 15 view .LVU52
 217 0066 0B60     		str	r3, [r1]	@ float
  76:mylib/music_and_voice.c ****     case 0xF:
 218              		.loc 1 76 9 is_stmt 1 view .LVU53
 219 0068 E8E7     		b	.L7
 220              	.LVL18:
 221              	.L8:
  78:mylib/music_and_voice.c ****         break;
ARM GAS  C:\Users\ncer\AppData\Local\Temp\ccYNhntL.s 			page 7


 222              		.loc 1 78 9 view .LVU54
  78:mylib/music_and_voice.c ****         break;
 223              		.loc 1 78 15 is_stmt 0 view .LVU55
 224 006a 4FF07A53 		mov	r3, #1048576000
 225              	.LVL19:
  78:mylib/music_and_voice.c ****         break;
 226              		.loc 1 78 15 view .LVU56
 227 006e 0B60     		str	r3, [r1]	@ float
  79:mylib/music_and_voice.c **** 
 228              		.loc 1 79 9 is_stmt 1 view .LVU57
 229 0070 E4E7     		b	.L7
 230              	.L14:
  88:mylib/music_and_voice.c ****         break;
 231              		.loc 1 88 9 view .LVU58
  88:mylib/music_and_voice.c ****         break;
 232              		.loc 1 88 23 is_stmt 0 view .LVU59
 233 0072 5300     		lsls	r3, r2, #1
 234 0074 00EE103A 		vmov	s0, r3	@ int
 235              	.LVL20:
  88:mylib/music_and_voice.c ****         break;
 236              		.loc 1 88 16 view .LVU60
 237 0078 B8EEC00A 		vcvt.f32.s32	s0, s0
 238              	.LVL21:
  89:mylib/music_and_voice.c ****     case 0:
 239              		.loc 1 89 9 is_stmt 1 view .LVU61
 240 007c E2E7     		b	.L16
 241              	.L15:
  94:mylib/music_and_voice.c ****         break;
 242              		.loc 1 94 9 view .LVU62
  94:mylib/music_and_voice.c ****         break;
 243              		.loc 1 94 23 is_stmt 0 view .LVU63
 244 007e 5308     		lsrs	r3, r2, #1
 245 0080 00EE103A 		vmov	s0, r3	@ int
 246              	.LVL22:
  94:mylib/music_and_voice.c ****         break;
 247              		.loc 1 94 16 view .LVU64
 248 0084 B8EEC00A 		vcvt.f32.s32	s0, s0
 249              	.LVL23:
  95:mylib/music_and_voice.c ****     }
 250              		.loc 1 95 9 is_stmt 1 view .LVU65
 251 0088 DCE7     		b	.L16
 252              	.L17:
 101:mylib/music_and_voice.c ****         break;
 253              		.loc 1 101 9 view .LVU66
 101:mylib/music_and_voice.c ****         break;
 254              		.loc 1 101 16 is_stmt 0 view .LVU67
 255 008a DFED067A 		vldr.32	s15, .L21+4
 256 008e 20EE270A 		vmul.f32	s0, s0, s15
 257              	.LVL24:
 102:mylib/music_and_voice.c ****     case 0:
 258              		.loc 1 102 9 is_stmt 1 view .LVU68
 259 0092 DBE7     		b	.L6
 260              	.L18:
 106:mylib/music_and_voice.c ****         break;
 261              		.loc 1 106 9 view .LVU69
 106:mylib/music_and_voice.c ****         break;
 262              		.loc 1 106 16 is_stmt 0 view .LVU70
ARM GAS  C:\Users\ncer\AppData\Local\Temp\ccYNhntL.s 			page 8


 263 0094 DFED037A 		vldr.32	s15, .L21+4
 264 0098 80EE270A 		vdiv.f32	s0, s0, s15
 265              	.LVL25:
 107:mylib/music_and_voice.c ****     }
 266              		.loc 1 107 9 is_stmt 1 view .LVU71
 110:mylib/music_and_voice.c **** }
 267              		.loc 1 110 5 view .LVU72
 110:mylib/music_and_voice.c **** }
 268              		.loc 1 110 12 is_stmt 0 view .LVU73
 269 009c D6E7     		b	.L6
 270              	.L22:
 271 009e 00BF     		.align	2
 272              	.L21:
 273 00a0 00000000 		.word	.LANCHOR0
 274 00a4 508D873F 		.word	1065848144
 275              		.cfi_endproc
 276              	.LFE131:
 278              		.section	.text.Music_Play_Note,"ax",%progbits
 279              		.align	1
 280              		.global	Music_Play_Note
 281              		.syntax unified
 282              		.thumb
 283              		.thumb_func
 284              		.fpu fpv4-sp-d16
 286              	Music_Play_Note:
 287              	.LVL26:
 288              	.LFB132:
 112:mylib/music_and_voice.c **** 
 113:mylib/music_and_voice.c **** void Music_Play_Note(uint16_t freq)
 114:mylib/music_and_voice.c **** {
 289              		.loc 1 114 1 is_stmt 1 view -0
 290              		.cfi_startproc
 291              		@ args = 0, pretend = 0, frame = 0
 292              		@ frame_needed = 0, uses_anonymous_args = 0
 293              		@ link register save eliminated.
 294              		.loc 1 114 1 is_stmt 0 view .LVU75
 295 0000 10B4     		push	{r4}
 296              	.LCFI3:
 297              		.cfi_def_cfa_offset 4
 298              		.cfi_offset 4, -4
 115:mylib/music_and_voice.c ****     freq*=2;
 299              		.loc 1 115 5 is_stmt 1 view .LVU76
 300              		.loc 1 115 9 is_stmt 0 view .LVU77
 301 0002 4300     		lsls	r3, r0, #1
 302 0004 98B2     		uxth	r0, r3
 303              	.LVL27:
 116:mylib/music_and_voice.c ****     Music_Info.USE_TIM->Instance->PSC = 19;
 304              		.loc 1 116 5 is_stmt 1 view .LVU78
 305              		.loc 1 116 15 is_stmt 0 view .LVU79
 306 0006 094B     		ldr	r3, .L25
 307 0008 5A69     		ldr	r2, [r3, #20]
 308              		.loc 1 116 23 view .LVU80
 309 000a 1168     		ldr	r1, [r2]
 310              		.loc 1 116 39 view .LVU81
 311 000c 1324     		movs	r4, #19
 312 000e 8C62     		str	r4, [r1, #40]
 117:mylib/music_and_voice.c ****     Music_Info.USE_TIM->Instance->ARR = Music_Info.TIM_MAX_FREQ/20/ freq - 1;
ARM GAS  C:\Users\ncer\AppData\Local\Temp\ccYNhntL.s 			page 9


 313              		.loc 1 117 5 is_stmt 1 view .LVU82
 314              		.loc 1 117 51 is_stmt 0 view .LVU83
 315 0010 9B69     		ldr	r3, [r3, #24]
 316              		.loc 1 117 64 view .LVU84
 317 0012 0749     		ldr	r1, .L25+4
 318 0014 A1FB0313 		umull	r1, r3, r1, r3
 319 0018 1B09     		lsrs	r3, r3, #4
 320              		.loc 1 117 67 view .LVU85
 321 001a B3FBF0F3 		udiv	r3, r3, r0
 322              		.loc 1 117 23 view .LVU86
 323 001e 1268     		ldr	r2, [r2]
 324              		.loc 1 117 74 view .LVU87
 325 0020 013B     		subs	r3, r3, #1
 326              		.loc 1 117 39 view .LVU88
 327 0022 D362     		str	r3, [r2, #44]
 118:mylib/music_and_voice.c **** }
 328              		.loc 1 118 1 view .LVU89
 329 0024 5DF8044B 		ldr	r4, [sp], #4
 330              	.LCFI4:
 331              		.cfi_restore 4
 332              		.cfi_def_cfa_offset 0
 333 0028 7047     		bx	lr
 334              	.L26:
 335 002a 00BF     		.align	2
 336              	.L25:
 337 002c 00000000 		.word	Music_Info
 338 0030 CDCCCCCC 		.word	-858993459
 339              		.cfi_endproc
 340              	.LFE132:
 342              		.section	.text.Muisc_Play_TIM_IRQ_Handler,"ax",%progbits
 343              		.align	1
 344              		.global	Muisc_Play_TIM_IRQ_Handler
 345              		.syntax unified
 346              		.thumb
 347              		.thumb_func
 348              		.fpu fpv4-sp-d16
 350              	Muisc_Play_TIM_IRQ_Handler:
 351              	.LFB133:
 119:mylib/music_and_voice.c **** 
 120:mylib/music_and_voice.c **** 
 121:mylib/music_and_voice.c **** void Muisc_Play_TIM_IRQ_Handler()
 122:mylib/music_and_voice.c **** {
 352              		.loc 1 122 1 is_stmt 1 view -0
 353              		.cfi_startproc
 354              		@ args = 0, pretend = 0, frame = 0
 355              		@ frame_needed = 0, uses_anonymous_args = 0
 356 0000 08B5     		push	{r3, lr}
 357              	.LCFI5:
 358              		.cfi_def_cfa_offset 8
 359              		.cfi_offset 3, -8
 360              		.cfi_offset 14, -4
 123:mylib/music_and_voice.c ****     static uint8_t first_time = 0;
 361              		.loc 1 123 5 view .LVU91
 124:mylib/music_and_voice.c ****     if (Music_Info.stop == 1)
 362              		.loc 1 124 5 view .LVU92
 363              		.loc 1 124 19 is_stmt 0 view .LVU93
 364 0002 124B     		ldr	r3, .L34
ARM GAS  C:\Users\ncer\AppData\Local\Temp\ccYNhntL.s 			page 10


 365 0004 1B7C     		ldrb	r3, [r3, #16]	@ zero_extendqisi2
 366              		.loc 1 124 8 view .LVU94
 367 0006 012B     		cmp	r3, #1
 368 0008 10D0     		beq	.L33
 125:mylib/music_and_voice.c ****     {
 126:mylib/music_and_voice.c ****         Set_Vector(U0, 0);
 127:mylib/music_and_voice.c ****         return;
 128:mylib/music_and_voice.c ****     }
 129:mylib/music_and_voice.c **** 
 130:mylib/music_and_voice.c ****     if (!first_time)
 369              		.loc 1 130 5 is_stmt 1 view .LVU95
 370              		.loc 1 130 9 is_stmt 0 view .LVU96
 371 000a 114B     		ldr	r3, .L34+4
 372 000c 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 373              		.loc 1 130 8 view .LVU97
 374 000e A3B9     		cbnz	r3, .L30
 131:mylib/music_and_voice.c ****     {
 132:mylib/music_and_voice.c ****         Set_Vector(U4, Music_Info.DUTY);
 375              		.loc 1 132 9 is_stmt 1 view .LVU98
 376 0010 104B     		ldr	r3, .L34+8
 377 0012 0E4A     		ldr	r2, .L34
 378 0014 92ED080A 		vldr.32	s0, [r2, #32]
 379 0018 0FCB     		ldm	r3, {r0, r1, r2, r3}
 380 001a FFF7FEFF 		bl	Set_Vector
 381              	.LVL28:
 382              	.L31:
 133:mylib/music_and_voice.c ****     }
 134:mylib/music_and_voice.c ****     else
 135:mylib/music_and_voice.c ****     {
 136:mylib/music_and_voice.c ****         Set_Vector(U6, Music_Info.DUTY);
 137:mylib/music_and_voice.c ****     }
 138:mylib/music_and_voice.c ****     first_time = !first_time;
 383              		.loc 1 138 5 view .LVU99
 384              		.loc 1 138 18 is_stmt 0 view .LVU100
 385 001e 0C4A     		ldr	r2, .L34+4
 386 0020 1378     		ldrb	r3, [r2]	@ zero_extendqisi2
 387 0022 B3FA83F3 		clz	r3, r3
 388 0026 5B09     		lsrs	r3, r3, #5
 389              		.loc 1 138 16 view .LVU101
 390 0028 1370     		strb	r3, [r2]
 391              	.L27:
 139:mylib/music_and_voice.c **** }
 392              		.loc 1 139 1 view .LVU102
 393 002a 08BD     		pop	{r3, pc}
 394              	.L33:
 126:mylib/music_and_voice.c ****         return;
 395              		.loc 1 126 9 is_stmt 1 view .LVU103
 396 002c 0A4B     		ldr	r3, .L34+12
 397 002e 9FED0B0A 		vldr.32	s0, .L34+16
 398 0032 0FCB     		ldm	r3, {r0, r1, r2, r3}
 399 0034 FFF7FEFF 		bl	Set_Vector
 400              	.LVL29:
 127:mylib/music_and_voice.c ****     }
 401              		.loc 1 127 9 view .LVU104
 402 0038 F7E7     		b	.L27
 403              	.L30:
 136:mylib/music_and_voice.c ****     }
ARM GAS  C:\Users\ncer\AppData\Local\Temp\ccYNhntL.s 			page 11


 404              		.loc 1 136 9 view .LVU105
 405 003a 094B     		ldr	r3, .L34+20
 406 003c 034A     		ldr	r2, .L34
 407 003e 92ED080A 		vldr.32	s0, [r2, #32]
 408 0042 0FCB     		ldm	r3, {r0, r1, r2, r3}
 409 0044 FFF7FEFF 		bl	Set_Vector
 410              	.LVL30:
 411 0048 E9E7     		b	.L31
 412              	.L35:
 413 004a 00BF     		.align	2
 414              	.L34:
 415 004c 00000000 		.word	Music_Info
 416 0050 00000000 		.word	.LANCHOR1
 417 0054 00000000 		.word	U4
 418 0058 00000000 		.word	U0
 419 005c 00000000 		.word	0
 420 0060 00000000 		.word	U6
 421              		.cfi_endproc
 422              	.LFE133:
 424              		.global	__aeabi_ui2d
 425              		.global	__aeabi_i2d
 426              		.global	__aeabi_dmul
 427              		.global	__aeabi_dcmpge
 428              		.section	.text.Music_Play_Beat,"ax",%progbits
 429              		.align	1
 430              		.global	Music_Play_Beat
 431              		.syntax unified
 432              		.thumb
 433              		.thumb_func
 434              		.fpu fpv4-sp-d16
 436              	Music_Play_Beat:
 437              	.LFB134:
 140:mylib/music_and_voice.c **** 
 141:mylib/music_and_voice.c **** 
 142:mylib/music_and_voice.c **** void Music_Play_Beat()
 143:mylib/music_and_voice.c **** { // 节拍处理，暂定一分钟80拍，即750ms一拍
 438              		.loc 1 143 1 view -0
 439              		.cfi_startproc
 440              		@ args = 0, pretend = 0, frame = 0
 441              		@ frame_needed = 0, uses_anonymous_args = 0
 442 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 443              	.LCFI6:
 444              		.cfi_def_cfa_offset 24
 445              		.cfi_offset 3, -24
 446              		.cfi_offset 4, -20
 447              		.cfi_offset 5, -16
 448              		.cfi_offset 6, -12
 449              		.cfi_offset 7, -8
 450              		.cfi_offset 14, -4
 144:mylib/music_and_voice.c ****     static uint16_t next_time = 750;
 451              		.loc 1 144 5 view .LVU107
 145:mylib/music_and_voice.c ****     uint16_t note;
 452              		.loc 1 145 5 view .LVU108
 146:mylib/music_and_voice.c ****     /*
 147:mylib/music_and_voice.c ****     if (Board_Mode != SING_MODE)
 148:mylib/music_and_voice.c ****     {
 149:mylib/music_and_voice.c ****         return;
ARM GAS  C:\Users\ncer\AppData\Local\Temp\ccYNhntL.s 			page 12


 150:mylib/music_and_voice.c ****     }
 151:mylib/music_and_voice.c ****     */
 152:mylib/music_and_voice.c ****     Music_Info.ms_cnt++;
 453              		.loc 1 152 5 view .LVU109
 454              		.loc 1 152 15 is_stmt 0 view .LVU110
 455 0002 2B4B     		ldr	r3, .L45+8
 456 0004 1C68     		ldr	r4, [r3]
 457              		.loc 1 152 22 view .LVU111
 458 0006 0134     		adds	r4, r4, #1
 459 0008 1C60     		str	r4, [r3]
 153:mylib/music_and_voice.c **** 
 154:mylib/music_and_voice.c ****     if (Music_Info.ms_cnt >= next_time * 0.85 && Music_Info.ms_cnt < next_time)
 460              		.loc 1 154 5 is_stmt 1 view .LVU112
 461              		.loc 1 154 27 is_stmt 0 view .LVU113
 462 000a 2046     		mov	r0, r4
 463 000c FFF7FEFF 		bl	__aeabi_ui2d
 464              	.LVL31:
 465 0010 0646     		mov	r6, r0
 466 0012 0F46     		mov	r7, r1
 467              		.loc 1 154 40 view .LVU114
 468 0014 274B     		ldr	r3, .L45+12
 469 0016 1D88     		ldrh	r5, [r3]
 470 0018 2846     		mov	r0, r5
 471 001a FFF7FEFF 		bl	__aeabi_i2d
 472              	.LVL32:
 473 001e 22A3     		adr	r3, .L45
 474 0020 D3E90023 		ldrd	r2, [r3]
 475 0024 FFF7FEFF 		bl	__aeabi_dmul
 476              	.LVL33:
 477 0028 0246     		mov	r2, r0
 478 002a 0B46     		mov	r3, r1
 479              		.loc 1 154 8 view .LVU115
 480 002c 3046     		mov	r0, r6
 481 002e 3946     		mov	r1, r7
 482 0030 FFF7FEFF 		bl	__aeabi_dcmpge
 483              	.LVL34:
 484 0034 20B1     		cbz	r0, .L37
 485              		.loc 1 154 47 discriminator 1 view .LVU116
 486 0036 AC42     		cmp	r4, r5
 487 0038 02D2     		bcs	.L37
 155:mylib/music_and_voice.c ****     {
 156:mylib/music_and_voice.c ****         Music_Info.stop = 1;
 488              		.loc 1 156 9 is_stmt 1 view .LVU117
 489              		.loc 1 156 25 is_stmt 0 view .LVU118
 490 003a 1D4B     		ldr	r3, .L45+8
 491 003c 0122     		movs	r2, #1
 492 003e 1A74     		strb	r2, [r3, #16]
 493              	.L37:
 157:mylib/music_and_voice.c ****     }
 158:mylib/music_and_voice.c **** 
 159:mylib/music_and_voice.c ****     if (Music_Info.ms_cnt >= next_time)
 494              		.loc 1 159 5 is_stmt 1 view .LVU119
 495              		.loc 1 159 8 is_stmt 0 view .LVU120
 496 0040 AC42     		cmp	r4, r5
 497 0042 00D2     		bcs	.L43
 498              	.L36:
 160:mylib/music_and_voice.c ****     {                          // 750*1/4
ARM GAS  C:\Users\ncer\AppData\Local\Temp\ccYNhntL.s 			page 13


 161:mylib/music_and_voice.c ****         Music_Info.ms_cnt = 0; // 以下代码1s执行一次
 162:mylib/music_and_voice.c ****         Music_Info.stop = 0;
 163:mylib/music_and_voice.c ****         Music_Info.time = 1.0f;
 164:mylib/music_and_voice.c **** 
 165:mylib/music_and_voice.c ****         uint16_t temp = Music_Song[Music_Info.cnt];
 166:mylib/music_and_voice.c ****         note = (uint16_t)Music_Get_Note(temp, &Music_Info.time);
 167:mylib/music_and_voice.c **** 
 168:mylib/music_and_voice.c ****         Music_Play_Note(note);
 169:mylib/music_and_voice.c ****         next_time = Music_Info.BEAT_cnt * Music_Info.time;
 170:mylib/music_and_voice.c ****         if (Music_Info.cnt == sizeof(Music_Song) / sizeof(uint16_t) - 1)
 171:mylib/music_and_voice.c ****         {
 172:mylib/music_and_voice.c ****             Music_Info.cnt=0;
 173:mylib/music_and_voice.c ****         }
 174:mylib/music_and_voice.c ****         else
 175:mylib/music_and_voice.c ****         {
 176:mylib/music_and_voice.c ****             Music_Info.cnt++;
 177:mylib/music_and_voice.c ****         }
 178:mylib/music_and_voice.c ****     }
 179:mylib/music_and_voice.c **** }
 499              		.loc 1 179 1 view .LVU121
 500 0044 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 501              	.L43:
 502              	.LBB2:
 161:mylib/music_and_voice.c ****         Music_Info.stop = 0;
 503              		.loc 1 161 9 is_stmt 1 view .LVU122
 161:mylib/music_and_voice.c ****         Music_Info.stop = 0;
 504              		.loc 1 161 27 is_stmt 0 view .LVU123
 505 0046 1A4C     		ldr	r4, .L45+8
 506 0048 0023     		movs	r3, #0
 507 004a 2360     		str	r3, [r4]
 162:mylib/music_and_voice.c ****         Music_Info.time = 1.0f;
 508              		.loc 1 162 9 is_stmt 1 view .LVU124
 162:mylib/music_and_voice.c ****         Music_Info.time = 1.0f;
 509              		.loc 1 162 25 is_stmt 0 view .LVU125
 510 004c 2374     		strb	r3, [r4, #16]
 163:mylib/music_and_voice.c **** 
 511              		.loc 1 163 9 is_stmt 1 view .LVU126
 163:mylib/music_and_voice.c **** 
 512              		.loc 1 163 25 is_stmt 0 view .LVU127
 513 004e 4FF07E53 		mov	r3, #1065353216
 514 0052 E360     		str	r3, [r4, #12]	@ float
 165:mylib/music_and_voice.c ****         note = (uint16_t)Music_Get_Note(temp, &Music_Info.time);
 515              		.loc 1 165 9 is_stmt 1 view .LVU128
 165:mylib/music_and_voice.c ****         note = (uint16_t)Music_Get_Note(temp, &Music_Info.time);
 516              		.loc 1 165 46 is_stmt 0 view .LVU129
 517 0054 6268     		ldr	r2, [r4, #4]
 518              	.LVL35:
 166:mylib/music_and_voice.c **** 
 519              		.loc 1 166 9 is_stmt 1 view .LVU130
 166:mylib/music_and_voice.c **** 
 520              		.loc 1 166 26 is_stmt 0 view .LVU131
 521 0056 04F10C01 		add	r1, r4, #12
 522 005a 174B     		ldr	r3, .L45+16
 523 005c 33F81200 		ldrh	r0, [r3, r2, lsl #1]
 524              	.LVL36:
 166:mylib/music_and_voice.c **** 
 525              		.loc 1 166 26 view .LVU132
ARM GAS  C:\Users\ncer\AppData\Local\Temp\ccYNhntL.s 			page 14


 526 0060 FFF7FEFF 		bl	Music_Get_Note
 527              	.LVL37:
 166:mylib/music_and_voice.c **** 
 528              		.loc 1 166 14 view .LVU133
 529 0064 BCEEC00A 		vcvt.u32.f32	s0, s0
 530              	.LVL38:
 168:mylib/music_and_voice.c ****         next_time = Music_Info.BEAT_cnt * Music_Info.time;
 531              		.loc 1 168 9 is_stmt 1 view .LVU134
 532 0068 10EE103A 		vmov	r3, s0	@ int
 533 006c 98B2     		uxth	r0, r3
 534 006e FFF7FEFF 		bl	Music_Play_Note
 535              	.LVL39:
 169:mylib/music_and_voice.c ****         if (Music_Info.cnt == sizeof(Music_Song) / sizeof(uint16_t) - 1)
 536              		.loc 1 169 9 view .LVU135
 169:mylib/music_and_voice.c ****         if (Music_Info.cnt == sizeof(Music_Song) / sizeof(uint16_t) - 1)
 537              		.loc 1 169 31 is_stmt 0 view .LVU136
 538 0072 A38B     		ldrh	r3, [r4, #28]
 539 0074 07EE903A 		vmov	s15, r3	@ int
 169:mylib/music_and_voice.c ****         if (Music_Info.cnt == sizeof(Music_Song) / sizeof(uint16_t) - 1)
 540              		.loc 1 169 53 view .LVU137
 541 0078 94ED037A 		vldr.32	s14, [r4, #12]
 169:mylib/music_and_voice.c ****         if (Music_Info.cnt == sizeof(Music_Song) / sizeof(uint16_t) - 1)
 542              		.loc 1 169 41 view .LVU138
 543 007c F8EEE77A 		vcvt.f32.s32	s15, s15
 544 0080 67EE877A 		vmul.f32	s15, s15, s14
 169:mylib/music_and_voice.c ****         if (Music_Info.cnt == sizeof(Music_Song) / sizeof(uint16_t) - 1)
 545              		.loc 1 169 19 view .LVU139
 546 0084 FCEEE77A 		vcvt.u32.f32	s15, s15
 547 0088 0A4B     		ldr	r3, .L45+12
 548 008a 17EE902A 		vmov	r2, s15	@ int
 549 008e 1A80     		strh	r2, [r3]	@ movhi
 170:mylib/music_and_voice.c ****         {
 550              		.loc 1 170 9 is_stmt 1 view .LVU140
 170:mylib/music_and_voice.c ****         {
 551              		.loc 1 170 23 is_stmt 0 view .LVU141
 552 0090 6368     		ldr	r3, [r4, #4]
 170:mylib/music_and_voice.c ****         {
 553              		.loc 1 170 12 view .LVU142
 554 0092 5E2B     		cmp	r3, #94
 555 0094 03D0     		beq	.L44
 176:mylib/music_and_voice.c ****         }
 556              		.loc 1 176 13 is_stmt 1 view .LVU143
 176:mylib/music_and_voice.c ****         }
 557              		.loc 1 176 27 is_stmt 0 view .LVU144
 558 0096 0133     		adds	r3, r3, #1
 559 0098 054A     		ldr	r2, .L45+8
 560 009a 5360     		str	r3, [r2, #4]
 561              	.LBE2:
 562              		.loc 1 179 1 view .LVU145
 563 009c D2E7     		b	.L36
 564              	.L44:
 565              	.LBB3:
 172:mylib/music_and_voice.c ****         }
 566              		.loc 1 172 13 is_stmt 1 view .LVU146
 172:mylib/music_and_voice.c ****         }
 567              		.loc 1 172 27 is_stmt 0 view .LVU147
 568 009e 0022     		movs	r2, #0
ARM GAS  C:\Users\ncer\AppData\Local\Temp\ccYNhntL.s 			page 15


 569 00a0 6260     		str	r2, [r4, #4]
 570 00a2 CFE7     		b	.L36
 571              	.L46:
 572 00a4 AFF30080 		.align	3
 573              	.L45:
 574 00a8 33333333 		.word	858993459
 575 00ac 3333EB3F 		.word	1072378675
 576 00b0 00000000 		.word	Music_Info
 577 00b4 00000000 		.word	.LANCHOR2
 578 00b8 00000000 		.word	.LANCHOR3
 579              	.LBE3:
 580              		.cfi_endproc
 581              	.LFE134:
 583              		.section	.rodata.request_for_bytes.str1.4,"aMS",%progbits,1
 584              		.align	2
 585              	.LC0:
 586 0000 7200     		.ascii	"r\000"
 587              		.section	.text.request_for_bytes,"ax",%progbits
 588              		.align	1
 589              		.global	request_for_bytes
 590              		.syntax unified
 591              		.thumb
 592              		.thumb_func
 593              		.fpu fpv4-sp-d16
 595              	request_for_bytes:
 596              	.LFB138:
 180:mylib/music_and_voice.c **** 
 181:mylib/music_and_voice.c **** struct
 182:mylib/music_and_voice.c **** {
 183:mylib/music_and_voice.c ****     uint32_t cnt;
 184:mylib/music_and_voice.c ****     TIM_HandleTypeDef * USE_TIM;
 185:mylib/music_and_voice.c ****     uint32_t TIM_MAX_FREQ;
 186:mylib/music_and_voice.c ****     uint16_t Fs;
 187:mylib/music_and_voice.c ****     float voice_duty;
 188:mylib/music_and_voice.c **** } Voice_Info;
 189:mylib/music_and_voice.c **** 
 190:mylib/music_and_voice.c **** uint8_t Voice_Data[6000];
 191:mylib/music_and_voice.c **** uint16_t Voice_Data_Head_Index;
 192:mylib/music_and_voice.c **** uint16_t Voice_Data_End_Index;
 193:mylib/music_and_voice.c **** uint8_t Voice_Init_OK;
 194:mylib/music_and_voice.c **** /*
 195:mylib/music_and_voice.c **** void Voice_Init(TIM_HandleTypeDef * tim,uint16_t fs){
 196:mylib/music_and_voice.c **** 
 197:mylib/music_and_voice.c ****     Voice_Info.USE_TIM=tim;
 198:mylib/music_and_voice.c ****     if(tim->Instance!=TIM1 && tim->Instance!=TIM8){
 199:mylib/music_and_voice.c ****         Voice_Info.TIM_MAX_FREQ=84000000;
 200:mylib/music_and_voice.c ****     }else{
 201:mylib/music_and_voice.c ****         Voice_Info.TIM_MAX_FREQ=168000000;
 202:mylib/music_and_voice.c ****     }
 203:mylib/music_and_voice.c ****     Voice_Info.Fs=fs;
 204:mylib/music_and_voice.c **** 
 205:mylib/music_and_voice.c ****     tim->Instance->PSC=0;
 206:mylib/music_and_voice.c ****     tim->Instance->ARR=Voice_Info.TIM_MAX_FREQ/fs;
 207:mylib/music_and_voice.c **** }
 208:mylib/music_and_voice.c **** */
 209:mylib/music_and_voice.c **** #include "string.h"
 210:mylib/music_and_voice.c **** #include "uart_ext.h"
ARM GAS  C:\Users\ncer\AppData\Local\Temp\ccYNhntL.s 			page 16


 211:mylib/music_and_voice.c **** void request_for_bytes(){
 597              		.loc 1 211 25 is_stmt 1 view -0
 598              		.cfi_startproc
 599              		@ args = 0, pretend = 0, frame = 0
 600              		@ frame_needed = 0, uses_anonymous_args = 0
 601 0000 08B5     		push	{r3, lr}
 602              	.LCFI7:
 603              		.cfi_def_cfa_offset 8
 604              		.cfi_offset 3, -8
 605              		.cfi_offset 14, -4
 212:mylib/music_and_voice.c ****     uprintf("r");
 606              		.loc 1 212 5 view .LVU149
 607 0002 0248     		ldr	r0, .L49
 608 0004 FFF7FEFF 		bl	uprintf
 609              	.LVL40:
 213:mylib/music_and_voice.c **** }
 610              		.loc 1 213 1 is_stmt 0 view .LVU150
 611 0008 08BD     		pop	{r3, pc}
 612              	.L50:
 613 000a 00BF     		.align	2
 614              	.L49:
 615 000c 00000000 		.word	.LC0
 616              		.cfi_endproc
 617              	.LFE138:
 619              		.section	.text.Voice_Fshz_Handler,"ax",%progbits
 620              		.align	1
 621              		.global	Voice_Fshz_Handler
 622              		.syntax unified
 623              		.thumb
 624              		.thumb_func
 625              		.fpu fpv4-sp-d16
 627              	Voice_Fshz_Handler:
 628              	.LFB139:
 214:mylib/music_and_voice.c **** 
 215:mylib/music_and_voice.c **** void Voice_Fshz_Handler()
 216:mylib/music_and_voice.c **** {
 629              		.loc 1 216 1 is_stmt 1 view -0
 630              		.cfi_startproc
 631              		@ args = 0, pretend = 0, frame = 0
 632              		@ frame_needed = 0, uses_anonymous_args = 0
 633 0000 08B5     		push	{r3, lr}
 634              	.LCFI8:
 635              		.cfi_def_cfa_offset 8
 636              		.cfi_offset 3, -8
 637              		.cfi_offset 14, -4
 217:mylib/music_and_voice.c ****     if(!Voice_Init_OK){
 638              		.loc 1 217 5 view .LVU152
 639              		.loc 1 217 8 is_stmt 0 view .LVU153
 640 0002 224B     		ldr	r3, .L61
 641 0004 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 642              		.loc 1 217 7 view .LVU154
 643 0006 002B     		cmp	r3, #0
 644 0008 33D0     		beq	.L51
 218:mylib/music_and_voice.c ****         return ;
 219:mylib/music_and_voice.c ****     }
 220:mylib/music_and_voice.c ****     if(Voice_Data_Head_Index%1000==0){
 645              		.loc 1 220 5 is_stmt 1 view .LVU155
ARM GAS  C:\Users\ncer\AppData\Local\Temp\ccYNhntL.s 			page 17


 646              		.loc 1 220 34 is_stmt 0 view .LVU156
 647 000a 214B     		ldr	r3, .L61+4
 648 000c 1A88     		ldrh	r2, [r3]
 649 000e 214B     		ldr	r3, .L61+8
 650 0010 A3FB0213 		umull	r1, r3, r3, r2
 651 0014 9B09     		lsrs	r3, r3, #6
 652 0016 4FF47A71 		mov	r1, #1000
 653 001a 01FB1323 		mls	r3, r1, r3, r2
 654 001e 9BB2     		uxth	r3, r3
 655              		.loc 1 220 7 view .LVU157
 656 0020 43B3     		cbz	r3, .L60
 657              	.L53:
 221:mylib/music_and_voice.c ****         request_for_bytes();
 222:mylib/music_and_voice.c ****     }
 223:mylib/music_and_voice.c ****     Voice_Data_Head_Index++;
 658              		.loc 1 223 5 is_stmt 1 view .LVU158
 659              		.loc 1 223 26 is_stmt 0 view .LVU159
 660 0022 1B4A     		ldr	r2, .L61+4
 661 0024 1388     		ldrh	r3, [r2]
 662 0026 0133     		adds	r3, r3, #1
 663 0028 9BB2     		uxth	r3, r3
 664 002a 1380     		strh	r3, [r2]	@ movhi
 224:mylib/music_and_voice.c ****     if (Voice_Data_Head_Index >= sizeof(Voice_Data))
 665              		.loc 1 224 5 is_stmt 1 view .LVU160
 666              		.loc 1 224 8 is_stmt 0 view .LVU161
 667 002c 41F26F72 		movw	r2, #5999
 668 0030 9342     		cmp	r3, r2
 669 0032 02D9     		bls	.L54
 225:mylib/music_and_voice.c ****     {
 226:mylib/music_and_voice.c ****         Voice_Data_Head_Index=0;
 670              		.loc 1 226 9 is_stmt 1 view .LVU162
 671              		.loc 1 226 30 is_stmt 0 view .LVU163
 672 0034 164B     		ldr	r3, .L61+4
 673 0036 0022     		movs	r2, #0
 674 0038 1A80     		strh	r2, [r3]	@ movhi
 675              	.L54:
 227:mylib/music_and_voice.c ****     }
 228:mylib/music_and_voice.c **** 
 229:mylib/music_and_voice.c ****     Voice_Info.voice_duty = (float)Voice_Data[Voice_Data_Head_Index] / 255.0f;
 676              		.loc 1 229 5 is_stmt 1 view .LVU164
 677              		.loc 1 229 46 is_stmt 0 view .LVU165
 678 003a 154B     		ldr	r3, .L61+4
 679 003c 1B88     		ldrh	r3, [r3]
 680 003e 164A     		ldr	r2, .L61+12
 681 0040 D35C     		ldrb	r3, [r2, r3]	@ zero_extendqisi2
 682 0042 07EE103A 		vmov	s14, r3	@ int
 683              		.loc 1 229 29 view .LVU166
 684 0046 B8EE477A 		vcvt.f32.u32	s14, s14
 685              		.loc 1 229 70 view .LVU167
 686 004a DFED146A 		vldr.32	s13, .L61+16
 687 004e C7EE267A 		vdiv.f32	s15, s14, s13
 688              		.loc 1 229 27 view .LVU168
 689 0052 134B     		ldr	r3, .L61+20
 690 0054 C3ED047A 		vstr.32	s15, [r3, #16]
 230:mylib/music_and_voice.c **** 
 231:mylib/music_and_voice.c ****     if(Voice_Info.voice_duty>0.5f){
 691              		.loc 1 231 5 is_stmt 1 view .LVU169
ARM GAS  C:\Users\ncer\AppData\Local\Temp\ccYNhntL.s 			page 18


 692              		.loc 1 231 7 is_stmt 0 view .LVU170
 693 0058 B6EE007A 		vmov.f32	s14, #5.0e-1
 694 005c F4EEC77A 		vcmpe.f32	s15, s14
 695 0060 F1EE10FA 		vmrs	APSR_nzcv, FPSCR
 696 0064 09DD     		ble	.L58
 232:mylib/music_and_voice.c ****        Set_Vector(U4, Voice_Info.voice_duty-0.5f); 
 697              		.loc 1 232 8 is_stmt 1 view .LVU171
 698 0066 0F4B     		ldr	r3, .L61+24
 699 0068 37EEC70A 		vsub.f32	s0, s15, s14
 700 006c 0FCB     		ldm	r3, {r0, r1, r2, r3}
 701 006e FFF7FEFF 		bl	Set_Vector
 702              	.LVL41:
 703              	.L51:
 233:mylib/music_and_voice.c ****     }else{
 234:mylib/music_and_voice.c ****        Set_Vector(U6, Voice_Info.voice_duty-0.5f);  
 235:mylib/music_and_voice.c ****     }
 236:mylib/music_and_voice.c **** }
 704              		.loc 1 236 1 is_stmt 0 view .LVU172
 705 0072 08BD     		pop	{r3, pc}
 706              	.L60:
 221:mylib/music_and_voice.c ****     }
 707              		.loc 1 221 9 is_stmt 1 view .LVU173
 708 0074 FFF7FEFF 		bl	request_for_bytes
 709              	.LVL42:
 710 0078 D3E7     		b	.L53
 711              	.L58:
 234:mylib/music_and_voice.c ****     }
 712              		.loc 1 234 8 view .LVU174
 713 007a 0B4B     		ldr	r3, .L61+28
 714 007c B6EE000A 		vmov.f32	s0, #5.0e-1
 715 0080 37EEC00A 		vsub.f32	s0, s15, s0
 716 0084 0FCB     		ldm	r3, {r0, r1, r2, r3}
 717 0086 FFF7FEFF 		bl	Set_Vector
 718              	.LVL43:
 719 008a F2E7     		b	.L51
 720              	.L62:
 721              		.align	2
 722              	.L61:
 723 008c 00000000 		.word	Voice_Init_OK
 724 0090 00000000 		.word	Voice_Data_Head_Index
 725 0094 D34D6210 		.word	274877907
 726 0098 00000000 		.word	Voice_Data
 727 009c 00007F43 		.word	1132396544
 728 00a0 00000000 		.word	Voice_Info
 729 00a4 00000000 		.word	U4
 730 00a8 00000000 		.word	U6
 731              		.cfi_endproc
 732              	.LFE139:
 734              		.section	.text.UART_Large_Reveice,"ax",%progbits
 735              		.align	1
 736              		.global	UART_Large_Reveice
 737              		.syntax unified
 738              		.thumb
 739              		.thumb_func
 740              		.fpu fpv4-sp-d16
 742              	UART_Large_Reveice:
 743              	.LFB140:
ARM GAS  C:\Users\ncer\AppData\Local\Temp\ccYNhntL.s 			page 19


 237:mylib/music_and_voice.c **** 
 238:mylib/music_and_voice.c **** extern uint8_t buffer_rx[];
 239:mylib/music_and_voice.c **** void UART_Large_Reveice(){
 744              		.loc 1 239 26 view -0
 745              		.cfi_startproc
 746              		@ args = 0, pretend = 0, frame = 0
 747              		@ frame_needed = 0, uses_anonymous_args = 0
 748 0000 10B5     		push	{r4, lr}
 749              	.LCFI9:
 750              		.cfi_def_cfa_offset 8
 751              		.cfi_offset 4, -8
 752              		.cfi_offset 14, -4
 240:mylib/music_and_voice.c ****     memcpy(Voice_Data+Voice_Data_End_Index,buffer_rx,1000);
 753              		.loc 1 240 5 view .LVU176
 754 0002 0E4C     		ldr	r4, .L66
 755 0004 2388     		ldrh	r3, [r4]
 756 0006 4FF47A72 		mov	r2, #1000
 757 000a 0D49     		ldr	r1, .L66+4
 758 000c 0D48     		ldr	r0, .L66+8
 759 000e 1844     		add	r0, r0, r3
 760 0010 FFF7FEFF 		bl	memcpy
 761              	.LVL44:
 241:mylib/music_and_voice.c ****     Voice_Data_End_Index+=1000;
 762              		.loc 1 241 5 view .LVU177
 763              		.loc 1 241 25 is_stmt 0 view .LVU178
 764 0014 2388     		ldrh	r3, [r4]
 765 0016 03F57A73 		add	r3, r3, #1000
 766 001a 9BB2     		uxth	r3, r3
 767 001c 2380     		strh	r3, [r4]	@ movhi
 242:mylib/music_and_voice.c ****     if(Voice_Data_End_Index>=sizeof(Voice_Data)){
 768              		.loc 1 242 5 is_stmt 1 view .LVU179
 769              		.loc 1 242 7 is_stmt 0 view .LVU180
 770 001e 41F26F72 		movw	r2, #5999
 771 0022 9342     		cmp	r3, r2
 772 0024 08D9     		bls	.L63
 243:mylib/music_and_voice.c ****         Voice_Data_End_Index%=sizeof(Voice_Data);
 773              		.loc 1 243 9 is_stmt 1 view .LVU181
 774              		.loc 1 243 29 is_stmt 0 view .LVU182
 775 0026 084A     		ldr	r2, .L66+12
 776 0028 A2FB0312 		umull	r1, r2, r2, r3
 777 002c D209     		lsrs	r2, r2, #7
 778 002e 41F27071 		movw	r1, #6000
 779 0032 01FB1233 		mls	r3, r1, r2, r3
 780 0036 2380     		strh	r3, [r4]	@ movhi
 781              	.L63:
 244:mylib/music_and_voice.c ****     }
 245:mylib/music_and_voice.c **** }
 782              		.loc 1 245 1 view .LVU183
 783 0038 10BD     		pop	{r4, pc}
 784              	.L67:
 785 003a 00BF     		.align	2
 786              	.L66:
 787 003c 00000000 		.word	Voice_Data_End_Index
 788 0040 00000000 		.word	buffer_rx
 789 0044 00000000 		.word	Voice_Data
 790 0048 F1197605 		.word	91625969
 791              		.cfi_endproc
ARM GAS  C:\Users\ncer\AppData\Local\Temp\ccYNhntL.s 			page 20


 792              	.LFE140:
 794              		.section	.text.Voice_Init,"ax",%progbits
 795              		.align	1
 796              		.global	Voice_Init
 797              		.syntax unified
 798              		.thumb
 799              		.thumb_func
 800              		.fpu fpv4-sp-d16
 802              	Voice_Init:
 803              	.LFB141:
 246:mylib/music_and_voice.c **** 
 247:mylib/music_and_voice.c **** 
 248:mylib/music_and_voice.c **** 
 249:mylib/music_and_voice.c **** void Voice_Init(){
 804              		.loc 1 249 18 is_stmt 1 view -0
 805              		.cfi_startproc
 806              		@ args = 0, pretend = 0, frame = 0
 807              		@ frame_needed = 0, uses_anonymous_args = 0
 808 0000 10B5     		push	{r4, lr}
 809              	.LCFI10:
 810              		.cfi_def_cfa_offset 8
 811              		.cfi_offset 4, -8
 812              		.cfi_offset 14, -4
 250:mylib/music_and_voice.c ****     // 先要他个5000个字节先
 251:mylib/music_and_voice.c ****     for(int i=0;i<5;++i){
 813              		.loc 1 251 5 view .LVU185
 814              	.LBB4:
 815              		.loc 1 251 9 view .LVU186
 816              	.LVL45:
 817              		.loc 1 251 13 is_stmt 0 view .LVU187
 818 0002 0024     		movs	r4, #0
 819              	.LVL46:
 820              	.L69:
 821              		.loc 1 251 17 is_stmt 1 discriminator 1 view .LVU188
 822              		.loc 1 251 5 is_stmt 0 discriminator 1 view .LVU189
 823 0004 042C     		cmp	r4, #4
 824 0006 07DC     		bgt	.L72
 252:mylib/music_and_voice.c ****         request_for_bytes();
 825              		.loc 1 252 9 is_stmt 1 discriminator 3 view .LVU190
 826 0008 FFF7FEFF 		bl	request_for_bytes
 827              	.LVL47:
 253:mylib/music_and_voice.c ****         HAL_Delay(2000);
 828              		.loc 1 253 9 discriminator 3 view .LVU191
 829 000c 4FF4FA60 		mov	r0, #2000
 830 0010 FFF7FEFF 		bl	HAL_Delay
 831              	.LVL48:
 251:mylib/music_and_voice.c ****         request_for_bytes();
 832              		.loc 1 251 21 discriminator 3 view .LVU192
 833 0014 0134     		adds	r4, r4, #1
 834              	.LVL49:
 251:mylib/music_and_voice.c ****         request_for_bytes();
 835              		.loc 1 251 21 is_stmt 0 discriminator 3 view .LVU193
 836 0016 F5E7     		b	.L69
 837              	.L72:
 251:mylib/music_and_voice.c ****         request_for_bytes();
 838              		.loc 1 251 21 discriminator 3 view .LVU194
 839              	.LBE4:
ARM GAS  C:\Users\ncer\AppData\Local\Temp\ccYNhntL.s 			page 21


 254:mylib/music_and_voice.c ****     }
 255:mylib/music_and_voice.c ****     Voice_Init_OK=1;
 840              		.loc 1 255 5 is_stmt 1 view .LVU195
 841              		.loc 1 255 18 is_stmt 0 view .LVU196
 842 0018 014B     		ldr	r3, .L73
 843 001a 0122     		movs	r2, #1
 844 001c 1A70     		strb	r2, [r3]
 256:mylib/music_and_voice.c **** }
 845              		.loc 1 256 1 view .LVU197
 846 001e 10BD     		pop	{r4, pc}
 847              	.LVL50:
 848              	.L74:
 849              		.loc 1 256 1 view .LVU198
 850              		.align	2
 851              	.L73:
 852 0020 00000000 		.word	Voice_Init_OK
 853              		.cfi_endproc
 854              	.LFE141:
 856              		.section	.text.HAL_UART_RxCpltCallback,"ax",%progbits
 857              		.align	1
 858              		.global	HAL_UART_RxCpltCallback
 859              		.syntax unified
 860              		.thumb
 861              		.thumb_func
 862              		.fpu fpv4-sp-d16
 864              	HAL_UART_RxCpltCallback:
 865              	.LVL51:
 866              	.LFB142:
 257:mylib/music_and_voice.c **** #include "usart.h"
 258:mylib/music_and_voice.c **** #include "uart_ext.h"
 259:mylib/music_and_voice.c **** extern uint8_t buffer_rx_temp;
 260:mylib/music_and_voice.c **** void HAL_UART_RxCpltCallback(UART_HandleTypeDef *huart){
 867              		.loc 1 260 56 is_stmt 1 view -0
 868              		.cfi_startproc
 869              		@ args = 0, pretend = 0, frame = 0
 870              		@ frame_needed = 0, uses_anonymous_args = 0
 871              		.loc 1 260 56 is_stmt 0 view .LVU200
 872 0000 10B5     		push	{r4, lr}
 873              	.LCFI11:
 874              		.cfi_def_cfa_offset 8
 875              		.cfi_offset 4, -8
 876              		.cfi_offset 14, -4
 877 0002 0446     		mov	r4, r0
 261:mylib/music_and_voice.c ****     Voice_Info.voice_duty = (float)buffer_rx_temp / 255.0f;
 878              		.loc 1 261 5 is_stmt 1 view .LVU201
 879              		.loc 1 261 29 is_stmt 0 view .LVU202
 880 0004 144B     		ldr	r3, .L82
 881 0006 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 882 0008 07EE103A 		vmov	s14, r3	@ int
 883 000c B8EE477A 		vcvt.f32.u32	s14, s14
 884              		.loc 1 261 51 view .LVU203
 885 0010 DFED126A 		vldr.32	s13, .L82+4
 886 0014 C7EE267A 		vdiv.f32	s15, s14, s13
 887              		.loc 1 261 27 view .LVU204
 888 0018 114B     		ldr	r3, .L82+8
 889 001a C3ED047A 		vstr.32	s15, [r3, #16]
 262:mylib/music_and_voice.c **** 
ARM GAS  C:\Users\ncer\AppData\Local\Temp\ccYNhntL.s 			page 22


 263:mylib/music_and_voice.c ****     if(Voice_Info.voice_duty>0.5f){
 890              		.loc 1 263 5 is_stmt 1 view .LVU205
 891              		.loc 1 263 7 is_stmt 0 view .LVU206
 892 001e B6EE007A 		vmov.f32	s14, #5.0e-1
 893 0022 F4EEC77A 		vcmpe.f32	s15, s14
 894 0026 F1EE10FA 		vmrs	APSR_nzcv, FPSCR
 895 002a 0BDD     		ble	.L80
 264:mylib/music_and_voice.c ****        Set_Vector(U4, Voice_Info.voice_duty-0.5f); 
 896              		.loc 1 264 8 is_stmt 1 view .LVU207
 897 002c 0D4B     		ldr	r3, .L82+12
 898 002e 37EEC70A 		vsub.f32	s0, s15, s14
 899 0032 0FCB     		ldm	r3, {r0, r1, r2, r3}
 900              	.LVL52:
 901              		.loc 1 264 8 is_stmt 0 view .LVU208
 902 0034 FFF7FEFF 		bl	Set_Vector
 903              	.LVL53:
 904              	.L78:
 265:mylib/music_and_voice.c ****     }else{
 266:mylib/music_and_voice.c ****        Set_Vector(U6, Voice_Info.voice_duty-0.5f);  
 267:mylib/music_and_voice.c ****     }
 268:mylib/music_and_voice.c ****     HAL_UART_Receive_IT(huart,&buffer_rx_temp,1);
 905              		.loc 1 268 5 is_stmt 1 view .LVU209
 906 0038 0122     		movs	r2, #1
 907 003a 0749     		ldr	r1, .L82
 908 003c 2046     		mov	r0, r4
 909 003e FFF7FEFF 		bl	HAL_UART_Receive_IT
 910              	.LVL54:
 269:mylib/music_and_voice.c **** }...
 911              		.loc 1 269 1 is_stmt 0 view .LVU210
 912 0042 10BD     		pop	{r4, pc}
 913              	.LVL55:
 914              	.L80:
 266:mylib/music_and_voice.c ****        Set_Vector(U6, Voice_Info.voice_duty-0.5f);  
 915              		.loc 1 266 8 is_stmt 1 view .LVU211
 916 0044 084B     		ldr	r3, .L82+16
 917 0046 B6EE000A 		vmov.f32	s0, #5.0e-1
 918 004a 37EEC00A 		vsub.f32	s0, s15, s0
 919 004e 0FCB     		ldm	r3, {r0, r1, r2, r3}
 920              	.LVL56:
 266:mylib/music_and_voice.c ****        Set_Vector(U6, Voice_Info.voice_duty-0.5f);  
 921              		.loc 1 266 8 is_stmt 0 view .LVU212
 922 0050 FFF7FEFF 		bl	Set_Vector
 923              	.LVL57:
 924 0054 F0E7     		b	.L78
 925              	.L83:
 926 0056 00BF     		.align	2
 927              	.L82:
 928 0058 00000000 		.word	buffer_rx_temp
 929 005c 00007F43 		.word	1132396544
 930 0060 00000000 		.word	Voice_Info
 931 0064 00000000 		.word	U4
 932 0068 00000000 		.word	U6
 933              		.cfi_endproc
 934              	.LFE142:
 936              		.comm	Voice_Init_OK,1,1
 937              		.comm	Voice_Data_End_Index,2,2
 938              		.comm	Voice_Data_Head_Index,2,2
ARM GAS  C:\Users\ncer\AppData\Local\Temp\ccYNhntL.s 			page 23


 939              		.comm	Voice_Data,6000,4
 940              		.comm	Voice_Info,20,4
 941              		.global	Music_Song
 942              		.global	Music_Freqs
 943              		.comm	Music_Info,36,4
 944              		.section	.bss.first_time.8576,"aw",%nobits
 945              		.set	.LANCHOR1,. + 0
 948              	first_time.8576:
 949 0000 00       		.space	1
 950              		.section	.data.Music_Freqs,"aw"
 951              		.align	2
 952              		.set	.LANCHOR0,. + 0
 955              	Music_Freqs:
 956 0000 204E     		.short	20000
 957 0002 0501     		.short	261
 958 0004 2501     		.short	293
 959 0006 4901     		.short	329
 960 0008 5D01     		.short	349
 961 000a 8801     		.short	392
 962 000c B801     		.short	440
 963 000e ED01     		.short	493
 964              		.section	.data.Music_Song,"aw"
 965              		.align	2
 966              		.set	.LANCHOR3,. + 0
 969              	Music_Song:
 970 0000 0308     		.short	2051
 971 0002 0308     		.short	2051
 972 0004 0308     		.short	2051
 973 0006 0208     		.short	2050
 974 0008 0302     		.short	515
 975 000a 0208     		.short	2050
 976 000c 0308     		.short	2051
 977 000e 0208     		.short	2050
 978 0010 0208     		.short	2050
 979 0012 0634     		.short	13318
 980 0014 0638     		.short	14342
 981 0016 0738     		.short	14343
 982 0018 0104     		.short	1025
 983 001a 0208     		.short	2050
 984 001c 0108     		.short	2049
 985 001e 0734     		.short	13319
 986 0020 0538     		.short	14341
 987 0022 0631     		.short	12550
 988 0024 0308     		.short	2051
 989 0026 0308     		.short	2051
 990 0028 0308     		.short	2051
 991 002a 0208     		.short	2050
 992 002c 0304     		.short	1027
 993 002e 0608     		.short	2054
 994 0030 0508     		.short	2053
 995 0032 0608     		.short	2054
 996 0034 0508     		.short	2053
 997 0036 0508     		.short	2053
 998 0038 0204     		.short	1026
 999 003a 0208     		.short	2050
 1000 003c 0308     		.short	2051
 1001 003e 0408     		.short	2052
ARM GAS  C:\Users\ncer\AppData\Local\Temp\ccYNhntL.s 			page 24


 1002 0040 0508     		.short	2053
 1003 0042 0408     		.short	2052
 1004 0044 0304     		.short	1027
 1005 0046 0208     		.short	2050
 1006 0048 0301     		.short	259
 1007 004a 0604     		.short	1030
 1008 004c 0738     		.short	14343
 1009 004e 0638     		.short	14342
 1010 0050 0504     		.short	1029
 1011 0052 0308     		.short	2051
 1012 0054 0501     		.short	261
 1013 0056 0308     		.short	2051
 1014 0058 0508     		.short	2053
 1015 005a 0204     		.short	1026
 1016 005c 0608     		.short	2054
 1017 005e 0508     		.short	2053
 1018 0060 0304     		.short	1027
 1019 0062 0208     		.short	2050
 1020 0064 0301     		.short	259
 1021 0066 0204     		.short	1026
 1022 0068 0508     		.short	2053
 1023 006a 0604     		.short	1030
 1024 006c 0104     		.short	1025
 1025 006e 0608     		.short	2054
 1026 0070 0608     		.short	2054
 1027 0072 0604     		.short	1030
 1028 0074 0608     		.short	2054
 1029 0076 0708     		.short	2055
 1030 0078 0114     		.short	5121
 1031 007a 0708     		.short	2055
 1032 007c 0608     		.short	2054
 1033 007e 0704     		.short	1031
 1034 0080 0508     		.short	2053
 1035 0082 0301     		.short	259
 1036 0084 0604     		.short	1030
 1037 0086 0708     		.short	2055
 1038 0088 0608     		.short	2054
 1039 008a 0504     		.short	1029
 1040 008c 0308     		.short	2051
 1041 008e 0501     		.short	261
 1042 0090 0408     		.short	2052
 1043 0092 0508     		.short	2053
 1044 0094 0604     		.short	1030
 1045 0096 0708     		.short	2055
 1046 0098 0608     		.short	2054
 1047 009a 0704     		.short	1031
 1048 009c 0504     		.short	1029
 1049 009e 060F     		.short	3846
 1050 00a0 0301     		.short	259
 1051 00a2 0204     		.short	1026
 1052 00a4 0508     		.short	2053
 1053 00a6 0604     		.short	1030
 1054 00a8 0104     		.short	1025
 1055 00aa 0608     		.short	2054
 1056 00ac 0604     		.short	1030
 1057 00ae 0608     		.short	2054
 1058 00b0 0708     		.short	2055
ARM GAS  C:\Users\ncer\AppData\Local\Temp\ccYNhntL.s 			page 25


 1059 00b2 0114     		.short	5121
 1060 00b4 0708     		.short	2055
 1061 00b6 0608     		.short	2054
 1062 00b8 0704     		.short	1031
 1063 00ba 0508     		.short	2053
 1064 00bc 0601     		.short	262
 1065              		.section	.data.next_time.8579,"aw"
 1066              		.align	1
 1067              		.set	.LANCHOR2,. + 0
 1070              	next_time.8579:
 1071 0000 EE02     		.short	750
 1072              		.text
 1073              	.Letext0:
 1074              		.file 2 "c:\\arm_gcc\\arm-none-eabi\\include\\machine\\_default_types.h"
 1075              		.file 3 "c:\\arm_gcc\\arm-none-eabi\\include\\sys\\_stdint.h"
 1076              		.file 4 "Drivers/CMSIS/Include/core_cm4.h"
 1077              		.file 5 "Drivers/CMSIS/Device/ST/STM32F4xx/Include/system_stm32f4xx.h"
 1078              		.file 6 "Drivers/CMSIS/Device/ST/STM32F4xx/Include/stm32f405xx.h"
 1079              		.file 7 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_def.h"
 1080              		.file 8 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_dma.h"
 1081              		.file 9 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_tim.h"
 1082              		.file 10 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_uart.h"
 1083              		.file 11 "Inc/tim.h"
 1084              		.file 12 "Inc/foc.h"
 1085              		.file 13 "c:\\arm_gcc\\arm-none-eabi\\include\\sys\\lock.h"
 1086              		.file 14 "c:\\arm_gcc\\arm-none-eabi\\include\\sys\\_types.h"
 1087              		.file 15 "c:\\arm_gcc\\lib\\gcc\\arm-none-eabi\\9.2.1\\include\\stddef.h"
 1088              		.file 16 "c:\\arm_gcc\\arm-none-eabi\\include\\sys\\reent.h"
 1089              		.file 17 "c:\\arm_gcc\\arm-none-eabi\\include\\stdlib.h"
 1090              		.file 18 "mylib/uart_ext.h"
 1091              		.file 19 "Inc/usart.h"
 1092              		.file 20 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal.h"
 1093              		.file 21 "<built-in>"
ARM GAS  C:\Users\ncer\AppData\Local\Temp\ccYNhntL.s 			page 26


DEFINED SYMBOLS
                            *ABS*:00000000 music_and_voice.c
C:\Users\ncer\AppData\Local\Temp\ccYNhntL.s:18     .text.Music_Init:00000000 $t
C:\Users\ncer\AppData\Local\Temp\ccYNhntL.s:26     .text.Music_Init:00000000 Music_Init
C:\Users\ncer\AppData\Local\Temp\ccYNhntL.s:80     .text.Music_Init:0000003c $d
                            *COM*:00000024 Music_Info
C:\Users\ncer\AppData\Local\Temp\ccYNhntL.s:87     .text.Music_Get_Note:00000000 $t
C:\Users\ncer\AppData\Local\Temp\ccYNhntL.s:94     .text.Music_Get_Note:00000000 Music_Get_Note
C:\Users\ncer\AppData\Local\Temp\ccYNhntL.s:141    .text.Music_Get_Note:00000026 $d
C:\Users\ncer\AppData\Local\Temp\ccYNhntL.s:273    .text.Music_Get_Note:000000a0 $d
C:\Users\ncer\AppData\Local\Temp\ccYNhntL.s:279    .text.Music_Play_Note:00000000 $t
C:\Users\ncer\AppData\Local\Temp\ccYNhntL.s:286    .text.Music_Play_Note:00000000 Music_Play_Note
C:\Users\ncer\AppData\Local\Temp\ccYNhntL.s:337    .text.Music_Play_Note:0000002c $d
C:\Users\ncer\AppData\Local\Temp\ccYNhntL.s:343    .text.Muisc_Play_TIM_IRQ_Handler:00000000 $t
C:\Users\ncer\AppData\Local\Temp\ccYNhntL.s:350    .text.Muisc_Play_TIM_IRQ_Handler:00000000 Muisc_Play_TIM_IRQ_Handler
C:\Users\ncer\AppData\Local\Temp\ccYNhntL.s:415    .text.Muisc_Play_TIM_IRQ_Handler:0000004c $d
C:\Users\ncer\AppData\Local\Temp\ccYNhntL.s:429    .text.Music_Play_Beat:00000000 $t
C:\Users\ncer\AppData\Local\Temp\ccYNhntL.s:436    .text.Music_Play_Beat:00000000 Music_Play_Beat
C:\Users\ncer\AppData\Local\Temp\ccYNhntL.s:574    .text.Music_Play_Beat:000000a8 $d
C:\Users\ncer\AppData\Local\Temp\ccYNhntL.s:584    .rodata.request_for_bytes.str1.4:00000000 $d
C:\Users\ncer\AppData\Local\Temp\ccYNhntL.s:588    .text.request_for_bytes:00000000 $t
C:\Users\ncer\AppData\Local\Temp\ccYNhntL.s:595    .text.request_for_bytes:00000000 request_for_bytes
C:\Users\ncer\AppData\Local\Temp\ccYNhntL.s:615    .text.request_for_bytes:0000000c $d
C:\Users\ncer\AppData\Local\Temp\ccYNhntL.s:620    .text.Voice_Fshz_Handler:00000000 $t
C:\Users\ncer\AppData\Local\Temp\ccYNhntL.s:627    .text.Voice_Fshz_Handler:00000000 Voice_Fshz_Handler
C:\Users\ncer\AppData\Local\Temp\ccYNhntL.s:723    .text.Voice_Fshz_Handler:0000008c $d
                            *COM*:00000001 Voice_Init_OK
                            *COM*:00000002 Voice_Data_Head_Index
                            *COM*:00001770 Voice_Data
                            *COM*:00000014 Voice_Info
C:\Users\ncer\AppData\Local\Temp\ccYNhntL.s:735    .text.UART_Large_Reveice:00000000 $t
C:\Users\ncer\AppData\Local\Temp\ccYNhntL.s:742    .text.UART_Large_Reveice:00000000 UART_Large_Reveice
C:\Users\ncer\AppData\Local\Temp\ccYNhntL.s:787    .text.UART_Large_Reveice:0000003c $d
                            *COM*:00000002 Voice_Data_End_Index
C:\Users\ncer\AppData\Local\Temp\ccYNhntL.s:795    .text.Voice_Init:00000000 $t
C:\Users\ncer\AppData\Local\Temp\ccYNhntL.s:802    .text.Voice_Init:00000000 Voice_Init
C:\Users\ncer\AppData\Local\Temp\ccYNhntL.s:852    .text.Voice_Init:00000020 $d
C:\Users\ncer\AppData\Local\Temp\ccYNhntL.s:857    .text.HAL_UART_RxCpltCallback:00000000 $t
C:\Users\ncer\AppData\Local\Temp\ccYNhntL.s:864    .text.HAL_UART_RxCpltCallback:00000000 HAL_UART_RxCpltCallback
C:\Users\ncer\AppData\Local\Temp\ccYNhntL.s:928    .text.HAL_UART_RxCpltCallback:00000058 $d
C:\Users\ncer\AppData\Local\Temp\ccYNhntL.s:969    .data.Music_Song:00000000 Music_Song
C:\Users\ncer\AppData\Local\Temp\ccYNhntL.s:955    .data.Music_Freqs:00000000 Music_Freqs
C:\Users\ncer\AppData\Local\Temp\ccYNhntL.s:948    .bss.first_time.8576:00000000 first_time.8576
C:\Users\ncer\AppData\Local\Temp\ccYNhntL.s:949    .bss.first_time.8576:00000000 $d
C:\Users\ncer\AppData\Local\Temp\ccYNhntL.s:951    .data.Music_Freqs:00000000 $d
C:\Users\ncer\AppData\Local\Temp\ccYNhntL.s:965    .data.Music_Song:00000000 $d
C:\Users\ncer\AppData\Local\Temp\ccYNhntL.s:1066   .data.next_time.8579:00000000 $d
C:\Users\ncer\AppData\Local\Temp\ccYNhntL.s:1070   .data.next_time.8579:00000000 next_time.8579
C:\Users\ncer\AppData\Local\Temp\ccYNhntL.s:156    .text.Music_Get_Note:00000035 $d
C:\Users\ncer\AppData\Local\Temp\ccYNhntL.s:156    .text.Music_Get_Note:00000036 $t

UNDEFINED SYMBOLS
Set_Vector
U4
U0
U6
__aeabi_ui2d
ARM GAS  C:\Users\ncer\AppData\Local\Temp\ccYNhntL.s 			page 27


__aeabi_i2d
__aeabi_dmul
__aeabi_dcmpge
uprintf
memcpy
buffer_rx
HAL_Delay
HAL_UART_Receive_IT
buffer_rx_temp
