ARM GAS  C:\Users\ncer\AppData\Local\Temp\cceGoFVP.s 			page 1


   1              		.cpu cortex-m4
   2              		.eabi_attribute 27, 1
   3              		.eabi_attribute 28, 1
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 1
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.file	"foc.c"
  14              		.text
  15              	.Ltext0:
  16              		.cfi_sections	.debug_frame
  17              		.section	.text.SVPWM_Step,"ax",%progbits
  18              		.align	1
  19              		.arch armv7e-m
  20              		.syntax unified
  21              		.thumb
  22              		.thumb_func
  23              		.fpu fpv4-sp-d16
  25              	SVPWM_Step:
  26              	.LFB172:
  27              		.file 1 "Src/foc.c"
   1:Src/foc.c     **** #include "foc.h"
   2:Src/foc.c     **** #include "tim.h"
   3:Src/foc.c     **** #include "math.h"
   4:Src/foc.c     **** #include "arm_math.h"
   5:Src/foc.c     **** #include "adc.h"
   6:Src/foc.c     **** #include "as5047.h"
   7:Src/foc.c     **** #include "uart_ext.h"
   8:Src/foc.c     **** 
   9:Src/foc.c     **** #include "music_and_voice.h"
  10:Src/foc.c     **** #include "tim_ext.h"
  11:Src/foc.c     **** 
  12:Src/foc.c     **** static void SVPWM(float Target_U, float duty);
  13:Src/foc.c     **** static void Test_Direction();
  14:Src/foc.c     **** static void Measure_R_MS_Handler(float duty);
  15:Src/foc.c     **** static void Measure_R_20Khz_Handler(float ia,float ib);
  16:Src/foc.c     **** static void Measure_L_20Khz_Handler(float max_current,float Ialpha);
  17:Src/foc.c     **** static void SVPWM_Step(CCR_Duty duty);
  18:Src/foc.c     **** 
  19:Src/foc.c     **** #define MIN(a, b) a < b ? a : b
  20:Src/foc.c     **** 
  21:Src/foc.c     **** uint16_t ADC_Values_Raw[4];
  22:Src/foc.c     **** uint16_t ADC_Values_Raw2[4];
  23:Src/foc.c     **** float Ialpha, Ibeta;
  24:Src/foc.c     **** 
  25:Src/foc.c     **** typedef struct
  26:Src/foc.c     **** {
  27:Src/foc.c     ****     uint8_t pairs;
  28:Src/foc.c     ****     float R;
  29:Src/foc.c     ****     float L;
  30:Src/foc.c     ****     int8_t direction;
  31:Src/foc.c     ****     // ÁîµÊú∫ÁöÑËøêËΩ¨ÊñπÂêëÔºåÁ∫¶ÂÆöÂú®ÂºÄÁéØÊ®°Âºè‰∏ãÔºåÁîµÊú∫Êåâu4->u6ÊñπÂêëËøêË°åÔºàÁîµËßíÂ∫¶Â¢
ARM GAS  C:\Users\ncer\AppData\Local\Temp\cceGoFVP.s 			page 2


  32:Src/foc.c     ****     // Ê≠§ÂèÇÊï∞‰∏éÁîµÊú∫ a b c ‰∏âÁõ∏ÁöÑÁÑäÊé•ÊúâÂÖ≥
  33:Src/foc.c     ****     // Ê≠§ÂèÇÊï∞‰ªÖÂú®ÊúâÊÑüÊ®°Âºè‰∏≠(SENSOR_FOC)ÊúâÁî®
  34:Src/foc.c     **** } Motor_Info;
  35:Src/foc.c     **** 
  36:Src/foc.c     **** enum _board_mode Board_Mode;
  37:Src/foc.c     **** 
  38:Src/foc.c     **** struct
  39:Src/foc.c     **** {
  40:Src/foc.c     ****     uint32_t time; // unit:ms
  41:Src/foc.c     ****     float last_position;
  42:Src/foc.c     ****     int direction_result;
  43:Src/foc.c     **** } Test_Direction_Info;
  44:Src/foc.c     **** 
  45:Src/foc.c     **** struct
  46:Src/foc.c     **** {
  47:Src/foc.c     ****     uint32_t time; //unit:ms
  48:Src/foc.c     ****     Uvect_Mos *Used_Mos;
  49:Src/foc.c     ****     uint32_t cnt;
  50:Src/foc.c     ****     uint32_t USELESS_CNT;
  51:Src/foc.c     ****     uint32_t CNT_MAX;
  52:Src/foc.c     ****     float current_sum;
  53:Src/foc.c     ****     float current_avg;
  54:Src/foc.c     **** } Measure_R_Info;
  55:Src/foc.c     **** 
  56:Src/foc.c     **** 
  57:Src/foc.c     **** Motor_Info Motor = {7, 0, 0};
  58:Src/foc.c     **** 
  59:Src/foc.c     **** Uvect_Mos U0 = {0, 0, 0, 0};
  60:Src/foc.c     **** Uvect_Mos U4 = {1, 0, 0, 0};
  61:Src/foc.c     **** Uvect_Mos U6 = {1, 1, 0, PI / 3};
  62:Src/foc.c     **** Uvect_Mos U2 = {0, 1, 0, PI / 3 * 2};
  63:Src/foc.c     **** Uvect_Mos U3 = {0, 1, 1, PI};
  64:Src/foc.c     **** Uvect_Mos U1 = {0, 0, 1, PI / 3 * 4};
  65:Src/foc.c     **** Uvect_Mos U5 = {1, 0, 1, PI / 3 * 5};
  66:Src/foc.c     **** Uvect_Mos U7 = {1, 1, 1, 0};
  67:Src/foc.c     **** 
  68:Src/foc.c     **** Uvect_Mos *Uvects[6] = {&U1, &U2, &U3, &U4, &U5, &U6};
  69:Src/foc.c     **** 
  70:Src/foc.c     **** static float theta = 0;
  71:Src/foc.c     **** float RPS = 6; // ËΩ¨ÈÄü
  72:Src/foc.c     **** 
  73:Src/foc.c     **** float Position_Degree;
  74:Src/foc.c     **** 
  75:Src/foc.c     **** float Position_Offset = 215.793457f;
  76:Src/foc.c     **** //float Position_Offset=273.164062f;
  77:Src/foc.c     **** 
  78:Src/foc.c     **** #define TIM7_FREQ 1000
  79:Src/foc.c     **** #define TIM8_FREQ 20000
  80:Src/foc.c     **** 
  81:Src/foc.c     **** #define DRIVE
  82:Src/foc.c     **** 
  83:Src/foc.c     **** static void UVects_Init()
  84:Src/foc.c     **** {
  85:Src/foc.c     ****     for (int i = 0; i < 6; ++i)
  86:Src/foc.c     ****     {
  87:Src/foc.c     ****         float v_theta = Uvects[i]->theta;
  88:Src/foc.c     ****         Uvects[i]->x = cosf(v_theta);
ARM GAS  C:\Users\ncer\AppData\Local\Temp\cceGoFVP.s 			page 3


  89:Src/foc.c     ****         Uvects[i]->y = sinf(v_theta);
  90:Src/foc.c     ****     }
  91:Src/foc.c     **** }
  92:Src/foc.c     **** 
  93:Src/foc.c     **** void Foc_Init(float rps)
  94:Src/foc.c     **** {
  95:Src/foc.c     ****     // rps unit is r/s
  96:Src/foc.c     ****     Board_Mode = SENSOR_FOC;
  97:Src/foc.c     ****     TIM8->ARR = 168000000 / TIM8_FREQ / 2;
  98:Src/foc.c     **** 
  99:Src/foc.c     ****     TIM8->CCR4 = TIM8->ARR - 2;
 100:Src/foc.c     **** 
 101:Src/foc.c     ****     UVects_Init();
 102:Src/foc.c     **** #ifdef DRIVE
 103:Src/foc.c     ****     HAL_TIM_PWM_Start(&htim8, TIM_CHANNEL_1);
 104:Src/foc.c     ****     HAL_TIM_PWM_Start(&htim8, TIM_CHANNEL_2);
 105:Src/foc.c     ****     HAL_TIM_PWM_Start(&htim8, TIM_CHANNEL_3);
 106:Src/foc.c     **** 
 107:Src/foc.c     ****     HAL_TIMEx_PWMN_Start(&htim8, TIM_CHANNEL_1);
 108:Src/foc.c     ****     HAL_TIMEx_PWMN_Start(&htim8, TIM_CHANNEL_2);
 109:Src/foc.c     ****     HAL_TIMEx_PWMN_Start(&htim8, TIM_CHANNEL_3);
 110:Src/foc.c     **** #endif
 111:Src/foc.c     **** 
 112:Src/foc.c     ****     // Ê≠§Â§ÑËÆæÁΩÆTIM7 Áî®‰∫éÊôÆÈÄöÊ®°ÂºèÔºàÈô§‰∫ÜSING„ÄÅVOICE‰ª•Â§ñÁöÑÊ®°Âºè
 113:Src/foc.c     ****     // Âú®SINGÊ®°Âºè‰∏≠Ôºå‰ºöÈáçÊñ∞ËÆæÁΩÆTIM7
 114:Src/foc.c     ****     TIM7->PSC = 1;
 115:Src/foc.c     ****     TIM7->ARR = 42000000 / TIM7_FREQ - 1;
 116:Src/foc.c     **** 
 117:Src/foc.c     ****     HAL_TIM_Base_Start_IT(&htim7);
 118:Src/foc.c     ****     //HAL_TIM_Base_Start_IT(&htim6);
 119:Src/foc.c     ****     HAL_TIM_Base_Start(&htim8);
 120:Src/foc.c     **** }
 121:Src/foc.c     **** 
 122:Src/foc.c     **** uint8_t get_area(uint32_t now_theta)
 123:Src/foc.c     **** {
 124:Src/foc.c     ****     return now_theta / 60 + 1;
 125:Src/foc.c     **** }
 126:Src/foc.c     **** 
 127:Src/foc.c     **** // Ê†πÊçÆÊâáÂå∫Âè∑ÔºåËé∑ÂèñËØ•ÊâáÂå∫ÁöÑ‰∏§‰∏™ÁîµÂéãÁü¢Èáè
 128:Src/foc.c     **** // area:1-6
 129:Src/foc.c     **** void get_area_u(uint8_t area, Uvect_Mos *u1, Uvect_Mos *u2)
 130:Src/foc.c     **** {
 131:Src/foc.c     ****     switch (area)
 132:Src/foc.c     ****     {
 133:Src/foc.c     ****     case 1:
 134:Src/foc.c     ****         *u1 = U4;
 135:Src/foc.c     ****         *u2 = U6;
 136:Src/foc.c     ****         break;
 137:Src/foc.c     ****     case 2:
 138:Src/foc.c     ****         *u1 = U6;
 139:Src/foc.c     ****         *u2 = U2;
 140:Src/foc.c     ****         break;
 141:Src/foc.c     ****     case 3:
 142:Src/foc.c     ****         *u1 = U2;
 143:Src/foc.c     ****         *u2 = U3;
 144:Src/foc.c     ****         break;
 145:Src/foc.c     ****     case 4:
ARM GAS  C:\Users\ncer\AppData\Local\Temp\cceGoFVP.s 			page 4


 146:Src/foc.c     ****         *u1 = U3;
 147:Src/foc.c     ****         *u2 = U1;
 148:Src/foc.c     ****         break;
 149:Src/foc.c     ****     case 5:
 150:Src/foc.c     ****         *u1 = U1;
 151:Src/foc.c     ****         *u2 = U5;
 152:Src/foc.c     ****         break;
 153:Src/foc.c     ****     case 6:
 154:Src/foc.c     ****         *u1 = U5;
 155:Src/foc.c     ****         *u2 = U4;
 156:Src/foc.c     ****         break;
 157:Src/foc.c     ****     default:
 158:Src/foc.c     ****         break;
 159:Src/foc.c     ****     }
 160:Src/foc.c     **** }
 161:Src/foc.c     **** 
 162:Src/foc.c     **** /*
 163:Src/foc.c     ****     Ê†πÊçÆthetaÊù•ËÆ°ÁÆóÁõ∏ÈÇª‰∏§‰∏™Áü¢ÈáèÁöÑ‰ΩúÁî®Êó∂Èó¥ÁöÑÂáΩÊï∞Ôºå
 164:Src/foc.c     ****     Âõ†‰∏∫Áî®Âà∞Èô§Ê≥ïÊ¨°Êï∞Â§ö‰∫Ü‰∏ÄÁÇπÔºåÁõÆÂâçÊöÇÊó∂Â∫üÂºÉ„ÄÇ
 165:Src/foc.c     **** */
 166:Src/foc.c     **** void get_t(float theta, float *t1, float *t2)
 167:Src/foc.c     **** {
 168:Src/foc.c     ****     /*
 169:Src/foc.c     **** /       u2y x               u2x y       \
 170:Src/foc.c     **** | ----------------- - ----------------- |
 171:Src/foc.c     **** | u1x u2y - u2x u1y   u1x u2y - u2x u1y |
 172:Src/foc.c     **** |                                       |
 173:Src/foc.c     **** |       u1x y               u1y x       |
 174:Src/foc.c     **** | ----------------- - ----------------- |
 175:Src/foc.c     **** \ u1x u2y - u2x u1y   u1x u2y - u2x u1y /
 176:Src/foc.c     **** */
 177:Src/foc.c     ****     float temp_t1, temp_t2;
 178:Src/foc.c     ****     float theta_f; // Âçï‰Ωç‰∏∫rad
 179:Src/foc.c     ****     Uvect_Mos u1, u2;
 180:Src/foc.c     ****     float x, y;
 181:Src/foc.c     ****     get_area_u(get_area(theta), &u1, &u2);
 182:Src/foc.c     ****     //theta_f=(float)theta*2.0f*PI/360;
 183:Src/foc.c     ****     arm_sin_cos_f32(theta, &y, &x);
 184:Src/foc.c     ****     x *= 0.86f;
 185:Src/foc.c     ****     y *= 0.86f; // sqrt(3)/2 Ê≤°Èîô
 186:Src/foc.c     ****     //x=0.86f*cosf(theta_f);
 187:Src/foc.c     ****     //y=0.86f*sinf(theta_f);
 188:Src/foc.c     ****     temp_t1 = u2.y * x / (u1.x * u2.y - u2.x * u1.y) - (u2.x * y) / (u1.x * u2.y - u2.x * u1.y);
 189:Src/foc.c     ****     temp_t2 = u1.x * y / (u1.x * u2.y - u2.x * u1.y) - (u1.y * x) / (u1.x * u2.y - u2.x * u1.y);
 190:Src/foc.c     **** 
 191:Src/foc.c     ****     *t1 = temp_t1;
 192:Src/foc.c     ****     *t2 = temp_t2;
 193:Src/foc.c     **** }
 194:Src/foc.c     **** 
 195:Src/foc.c     **** CCR_Duty get_ccr_duty(float t1, float t2, Uvect_Mos u1, Uvect_Mos u2)
 196:Src/foc.c     **** {
 197:Src/foc.c     ****     float t0, t3;
 198:Src/foc.c     ****     CCR_Duty result;
 199:Src/foc.c     ****     t0 = (1 - t1 - t2) / 2;
 200:Src/foc.c     ****     t3 = t0;
 201:Src/foc.c     **** 
 202:Src/foc.c     ****     result.ccra = U7.a * t3 + u1.a * t1 + u2.a * t2;
ARM GAS  C:\Users\ncer\AppData\Local\Temp\cceGoFVP.s 			page 5


 203:Src/foc.c     ****     result.ccrb = U7.b * t3 + u1.b * t1 + u2.b * t2;
 204:Src/foc.c     ****     result.ccrc = U7.c * t3 + u1.c * t1 + u2.c * t2;
 205:Src/foc.c     **** 
 206:Src/foc.c     ****     return result;
 207:Src/foc.c     **** }
 208:Src/foc.c     **** 
 209:Src/foc.c     **** static void SVPWM_Step(CCR_Duty duty)
 210:Src/foc.c     **** {
  28              		.loc 1 210 1 view -0
  29              		.cfi_startproc
  30              		@ args = 0, pretend = 0, frame = 16
  31              		@ frame_needed = 0, uses_anonymous_args = 0
  32              		@ link register save eliminated.
  33 0000 84B0     		sub	sp, sp, #16
  34              	.LCFI0:
  35              		.cfi_def_cfa_offset 16
  36 0002 8DED010A 		vstr.32	s0, [sp, #4]
  37 0006 CDED020A 		vstr.32	s1, [sp, #8]
  38 000a 8DED031A 		vstr.32	s2, [sp, #12]
 211:Src/foc.c     ****     TIM8->CCR1 = duty.ccrc * TIM8->ARR;
  39              		.loc 1 211 5 view .LVU1
  40              		.loc 1 211 34 is_stmt 0 view .LVU2
  41 000e 124B     		ldr	r3, .L3
  42 0010 D3ED0B7A 		vldr.32	s15, [r3, #44]	@ int
  43              		.loc 1 211 28 view .LVU3
  44 0014 F8EE677A 		vcvt.f32.u32	s15, s15
  45 0018 27EE811A 		vmul.f32	s2, s15, s2
  46              		.loc 1 211 16 view .LVU4
  47 001c BCEEC11A 		vcvt.u32.f32	s2, s2
  48 0020 83ED0D1A 		vstr.32	s2, [r3, #52]	@ int
 212:Src/foc.c     ****     TIM8->CCR2 = duty.ccrb * TIM8->ARR;
  49              		.loc 1 212 5 is_stmt 1 view .LVU5
  50              		.loc 1 212 34 is_stmt 0 view .LVU6
  51 0024 D3ED0B7A 		vldr.32	s15, [r3, #44]	@ int
  52              		.loc 1 212 28 view .LVU7
  53 0028 F8EE677A 		vcvt.f32.u32	s15, s15
  54 002c 9DED027A 		vldr.32	s14, [sp, #8]
  55 0030 67EE877A 		vmul.f32	s15, s15, s14
  56              		.loc 1 212 16 view .LVU8
  57 0034 FCEEE77A 		vcvt.u32.f32	s15, s15
  58 0038 C3ED0E7A 		vstr.32	s15, [r3, #56]	@ int
 213:Src/foc.c     ****     TIM8->CCR3 = duty.ccra * TIM8->ARR;
  59              		.loc 1 213 5 is_stmt 1 view .LVU9
  60              		.loc 1 213 34 is_stmt 0 view .LVU10
  61 003c D3ED0B7A 		vldr.32	s15, [r3, #44]	@ int
  62              		.loc 1 213 28 view .LVU11
  63 0040 F8EE677A 		vcvt.f32.u32	s15, s15
  64 0044 9DED017A 		vldr.32	s14, [sp, #4]
  65 0048 67EE877A 		vmul.f32	s15, s15, s14
  66              		.loc 1 213 16 view .LVU12
  67 004c FCEEE77A 		vcvt.u32.f32	s15, s15
  68 0050 C3ED0F7A 		vstr.32	s15, [r3, #60]	@ int
 214:Src/foc.c     **** }
  69              		.loc 1 214 1 view .LVU13
  70 0054 04B0     		add	sp, sp, #16
  71              	.LCFI1:
  72              		.cfi_def_cfa_offset 0
ARM GAS  C:\Users\ncer\AppData\Local\Temp\cceGoFVP.s 			page 6


  73              		@ sp needed
  74 0056 7047     		bx	lr
  75              	.L4:
  76              		.align	2
  77              	.L3:
  78 0058 00040140 		.word	1073808384
  79              		.cfi_endproc
  80              	.LFE172:
  82              		.section	.text.Measure_R_20Khz_Handler,"ax",%progbits
  83              		.align	1
  84              		.syntax unified
  85              		.thumb
  86              		.thumb_func
  87              		.fpu fpv4-sp-d16
  89              	Measure_R_20Khz_Handler:
  90              	.LVL0:
  91              	.LFB185:
 215:Src/foc.c     **** 
 216:Src/foc.c     **** /*
 217:Src/foc.c     ****     Â∞ÜÁîµÂéãÁü¢ÈáèËÆæÁΩÆ‰∏∫U4ÔºåÂπ∂ÊåÅÁª≠‰∏ÄÊÆµÊó∂Èó¥
 218:Src/foc.c     **** */
 219:Src/foc.c     **** void Set_to_U4(uint8_t t)
 220:Src/foc.c     **** {
 221:Src/foc.c     ****     CCR_Duty temp_duty = {0};
 222:Src/foc.c     ****     temp_duty.ccra = U4.a;
 223:Src/foc.c     ****     temp_duty.ccrb = U4.b;
 224:Src/foc.c     ****     temp_duty.ccrc = U4.c;
 225:Src/foc.c     ****     SVPWM_Step(temp_duty);
 226:Src/foc.c     ****     HAL_Delay(t);
 227:Src/foc.c     ****     temp_duty.ccra = U0.a;
 228:Src/foc.c     ****     temp_duty.ccrb = U0.b;
 229:Src/foc.c     ****     temp_duty.ccrc = U0.c;
 230:Src/foc.c     ****     SVPWM_Step(temp_duty);
 231:Src/foc.c     ****     uprintf("position:%f \r\n", Position_Degree);
 232:Src/foc.c     **** }
 233:Src/foc.c     **** 
 234:Src/foc.c     **** extern uint8_t Init_OK;
 235:Src/foc.c     **** void HAL_TIM_PeriodElapsedCallback(TIM_HandleTypeDef *htim)
 236:Src/foc.c     **** {
 237:Src/foc.c     **** 
 238:Src/foc.c     ****     if (htim->Instance == TIM7)
 239:Src/foc.c     ****     {
 240:Src/foc.c     ****         if (!Init_OK)
 241:Src/foc.c     ****         {
 242:Src/foc.c     ****             return;
 243:Src/foc.c     ****         }
 244:Src/foc.c     ****         Theta_Handler();
 245:Src/foc.c     ****     }
 246:Src/foc.c     ****     else if (htim->Instance==TIM6){
 247:Src/foc.c     ****         if(Board_Mode!=VOICE_MODE){
 248:Src/foc.c     ****             return ;
 249:Src/foc.c     ****         }
 250:Src/foc.c     ****         Timer_1ms_IRQ_Handler();
 251:Src/foc.c     ****     }
 252:Src/foc.c     ****     else if (htim->Instance == TIM8)
 253:Src/foc.c     ****     {
 254:Src/foc.c     ****     }
ARM GAS  C:\Users\ncer\AppData\Local\Temp\cceGoFVP.s 			page 7


 255:Src/foc.c     **** }
 256:Src/foc.c     **** 
 257:Src/foc.c     **** void SVPWM_Normal_CalT1T2(float alpha, float beta, uint8_t area, float *t1, float *t2)
 258:Src/foc.c     **** {
 259:Src/foc.c     ****     float temp = 0;
 260:Src/foc.c     ****     switch (area)
 261:Src/foc.c     ****     {
 262:Src/foc.c     ****     case 1:
 263:Src/foc.c     ****         *t1 = alpha - 0.57735f * beta;
 264:Src/foc.c     ****         *t2 = 1.1547f * beta;
 265:Src/foc.c     ****         break;
 266:Src/foc.c     ****     case 2:
 267:Src/foc.c     ****         *t1 = alpha + 0.57735f * beta;
 268:Src/foc.c     ****         *t2 = 0.57735f * beta - alpha;
 269:Src/foc.c     ****         break;
 270:Src/foc.c     ****     case 3:
 271:Src/foc.c     ****         *t1 = 1.1547f * beta;
 272:Src/foc.c     ****         *t2 = -alpha - 0.57735f * beta;
 273:Src/foc.c     ****         break;
 274:Src/foc.c     ****     case 4:
 275:Src/foc.c     ****         *t1 = 0.57735f * beta - alpha;
 276:Src/foc.c     ****         *t2 = -1.1547f * beta;
 277:Src/foc.c     ****         break;
 278:Src/foc.c     ****     case 5:
 279:Src/foc.c     ****         temp = -0.57735f * beta;
 280:Src/foc.c     ****         *t1 = temp - alpha;
 281:Src/foc.c     ****         *t2 = temp + alpha;
 282:Src/foc.c     ****         break;
 283:Src/foc.c     ****     case 6:
 284:Src/foc.c     ****         *t1 = -1.1547f * beta;
 285:Src/foc.c     ****         *t2 = alpha + 0.57735f * beta;
 286:Src/foc.c     ****         break;
 287:Src/foc.c     ****     }
 288:Src/foc.c     **** }
 289:Src/foc.c     **** 
 290:Src/foc.c     **** void Theta_Handler()
 291:Src/foc.c     **** {
 292:Src/foc.c     **** 
 293:Src/foc.c     ****     Position_Degree = Get_Position_Rad_Dgree(1);
 294:Src/foc.c     ****     switch (Board_Mode)
 295:Src/foc.c     ****     {
 296:Src/foc.c     ****     case SENSOR_FOC:
 297:Src/foc.c     ****         Foc();
 298:Src/foc.c     ****         break;
 299:Src/foc.c     ****     case VF_OPENLOOP:
 300:Src/foc.c     ****         VF_Openloop_Control(1, 1000, 1, 3);
 301:Src/foc.c     ****         break;
 302:Src/foc.c     ****     case TEST_DIRECTION:
 303:Src/foc.c     ****         Test_Direction();
 304:Src/foc.c     ****         break;
 305:Src/foc.c     ****     case STOP_MODE:
 306:Src/foc.c     ****         SVPWM(0, 0);
 307:Src/foc.c     ****         break;
 308:Src/foc.c     ****     case WAIT_MODE:
 309:Src/foc.c     ****         //  nothing to do
 310:Src/foc.c     ****         break;
 311:Src/foc.c     ****     case MEASURE_R:
ARM GAS  C:\Users\ncer\AppData\Local\Temp\cceGoFVP.s 			page 8


 312:Src/foc.c     ****         Measure_R_MS_Handler(1);
 313:Src/foc.c     ****         break;
 314:Src/foc.c     ****     case MEASURE_L:
 315:Src/foc.c     ****         break; 
 316:Src/foc.c     ****     case VOICE_MODE:
 317:Src/foc.c     ****         break;
 318:Src/foc.c     ****     case SING_MODE:
 319:Src/foc.c     ****         Muisc_Play_TIM_IRQ_Handler();
 320:Src/foc.c     ****         break;
 321:Src/foc.c     ****     default:
 322:Src/foc.c     ****         break;
 323:Src/foc.c     ****     }
 324:Src/foc.c     **** }
 325:Src/foc.c     **** 
 326:Src/foc.c     **** #define ADC_RAW2_CURRENT(raw) raw * 3300.0f / 4096 / 200 / 0.003f
 327:Src/foc.c     **** 
 328:Src/foc.c     **** void Park_Conv(float ia, float ib, float *ialpha, float *ibeta)
 329:Src/foc.c     **** {
 330:Src/foc.c     ****     *ialpha = ia;
 331:Src/foc.c     ****     *ibeta = (sqrtf(3) * ib + sqrtf(3) * (ib + ia)) / 3.0f;
 332:Src/foc.c     **** }
 333:Src/foc.c     **** 
 334:Src/foc.c     **** void HAL_ADC_ConvCpltCallback(ADC_HandleTypeDef *hadc)
 335:Src/foc.c     **** {
 336:Src/foc.c     ****     float ia, ib;
 337:Src/foc.c     **** 
 338:Src/foc.c     ****     if (hadc->Instance == ADC1)
 339:Src/foc.c     ****     {
 340:Src/foc.c     ****     }
 341:Src/foc.c     ****     else if (hadc->Instance == ADC2)
 342:Src/foc.c     ****     {
 343:Src/foc.c     ****         ia = ADC_RAW2_CURRENT(ADC_Values_Raw2[0]);
 344:Src/foc.c     ****         ib = ADC_RAW2_CURRENT(ADC_Values_Raw2[1]);
 345:Src/foc.c     ****         Park_Conv(ia, ib, &Ialpha, &Ibeta);
 346:Src/foc.c     ****         Measure_R_20Khz_Handler(ia,ib);
 347:Src/foc.c     ****         Measure_L_20Khz_Handler(Measure_R_Info.current_avg,Ialpha); 
 348:Src/foc.c     ****         send_wave(Ialpha,Ibeta,ia,ib);
 349:Src/foc.c     ****     }
 350:Src/foc.c     **** }
 351:Src/foc.c     **** 
 352:Src/foc.c     **** void Foc()
 353:Src/foc.c     **** {
 354:Src/foc.c     ****     Uvect_Mos u1, u2;
 355:Src/foc.c     ****     float t1, t2;
 356:Src/foc.c     ****     float x, y;
 357:Src/foc.c     **** 
 358:Src/foc.c     ****     float electric_position = (-1 * Position_Degree + 360);
 359:Src/foc.c     ****     float electric_position_offset = (-1 * Position_Offset + 360);
 360:Src/foc.c     ****     //float electric_position=Position_Degree;
 361:Src/foc.c     ****     //float electric_position_offset=Position_Offset;
 362:Src/foc.c     ****     int32_t sub = (int32_t)(electric_position - electric_position_offset);
 363:Src/foc.c     **** 
 364:Src/foc.c     ****     if (sub < 0)
 365:Src/foc.c     ****     {
 366:Src/foc.c     ****         sub += 360;
 367:Src/foc.c     ****     }
 368:Src/foc.c     ****     sub *= Motor.pairs;
ARM GAS  C:\Users\ncer\AppData\Local\Temp\cceGoFVP.s 			page 9


 369:Src/foc.c     ****     sub += 90;
 370:Src/foc.c     **** 
 371:Src/foc.c     ****     sub %= 360;
 372:Src/foc.c     **** 
 373:Src/foc.c     ****     SVPWM(sub, 0.5f);
 374:Src/foc.c     **** }
 375:Src/foc.c     **** 
 376:Src/foc.c     **** // Target_U ÊúüÊúõÁîµÂéãÁü¢ÈáèÁöÑËßíÂ∫¶ Âçï‰Ωç¬∞ 0-360
 377:Src/foc.c     **** // duty ÊúüÊúõÂç†Á©∫ÊØî 0-1
 378:Src/foc.c     **** static void SVPWM(float Target_U, float duty)
 379:Src/foc.c     **** {
 380:Src/foc.c     ****     Uvect_Mos u1, u2;
 381:Src/foc.c     ****     float x, y;
 382:Src/foc.c     ****     float t1, t2;
 383:Src/foc.c     ****     static CCR_Duty CCR_Dutys = {0};
 384:Src/foc.c     **** 
 385:Src/foc.c     ****     uint8_t area = get_area(Target_U);
 386:Src/foc.c     ****     get_area_u(area, &u1, &u2);
 387:Src/foc.c     ****     arm_sin_cos_f32(Target_U, &y, &x);
 388:Src/foc.c     ****     x *= 0.86f * duty;
 389:Src/foc.c     ****     y *= 0.86f * duty; // sqrt(3)/2 Ê≤°Èîô
 390:Src/foc.c     ****     SVPWM_Normal_CalT1T2(x, y, area, &t1, &t2);
 391:Src/foc.c     ****     CCR_Dutys = get_ccr_duty(t1, t2, u1, u2);
 392:Src/foc.c     ****     SVPWM_Step(CCR_Dutys);
 393:Src/foc.c     **** }
 394:Src/foc.c     **** 
 395:Src/foc.c     **** void VF_Openloop_Control(float duty, float freq, int8_t direction, float rps)
 396:Src/foc.c     **** {
 397:Src/foc.c     ****     static float theta = 0;
 398:Src/foc.c     ****     float delta_p = rps * Motor.pairs * 360.0f / freq; // ÊØèÊ¨°Ë∞ÉÁî®Êú¨ÂáΩÊï∞Ë¶ÅÂ¢ûÂä†ÁöÑÂÄº
 399:Src/foc.c     **** 
 400:Src/foc.c     ****     theta += direction * delta_p;
 401:Src/foc.c     ****     if (theta > 360)
 402:Src/foc.c     ****     {
 403:Src/foc.c     ****         theta -= 360;
 404:Src/foc.c     ****     }
 405:Src/foc.c     ****     else if (theta < 0)
 406:Src/foc.c     ****     {
 407:Src/foc.c     ****         theta += 360;
 408:Src/foc.c     ****     }
 409:Src/foc.c     ****     SVPWM(theta, duty);
 410:Src/foc.c     **** }
 411:Src/foc.c     **** 
 412:Src/foc.c     **** static void Test_Direction()
 413:Src/foc.c     **** {
 414:Src/foc.c     ****     Test_Direction_Info.time += 1;
 415:Src/foc.c     **** 
 416:Src/foc.c     ****     if (Position_Degree > Test_Direction_Info.last_position)
 417:Src/foc.c     ****     {
 418:Src/foc.c     ****         Test_Direction_Info.direction_result += 1;
 419:Src/foc.c     ****     }
 420:Src/foc.c     ****     else
 421:Src/foc.c     ****     {
 422:Src/foc.c     ****         Test_Direction_Info.direction_result -= 1;
 423:Src/foc.c     ****     }
 424:Src/foc.c     ****     Test_Direction_Info.last_position = Position_Degree;
 425:Src/foc.c     **** 
ARM GAS  C:\Users\ncer\AppData\Local\Temp\cceGoFVP.s 			page 10


 426:Src/foc.c     ****     VF_Openloop_Control(1, 1000, 1, 1);
 427:Src/foc.c     **** 
 428:Src/foc.c     ****     if (Test_Direction_Info.time > 10000)
 429:Src/foc.c     ****     { // run 10s
 430:Src/foc.c     ****         Board_Mode = STOP_MODE;
 431:Src/foc.c     ****         Test_Direction_Info.time = 0;
 432:Src/foc.c     ****         uprintf_polling("direction result:%d\r\n", Test_Direction_Info.direction_result);
 433:Src/foc.c     ****         if (Test_Direction_Info.direction_result > 0)
 434:Src/foc.c     ****         {
 435:Src/foc.c     ****             uprintf_polling("the direction of the motor is postive!\r\n");
 436:Src/foc.c     ****             Motor.direction = 1;
 437:Src/foc.c     ****         }
 438:Src/foc.c     ****         else
 439:Src/foc.c     ****         {
 440:Src/foc.c     ****             uprintf_polling("the direction of the motor is nagative!\r\n");
 441:Src/foc.c     ****             Motor.direction = -1;
 442:Src/foc.c     ****         }
 443:Src/foc.c     ****         Test_Direction_Info.direction_result = 0;
 444:Src/foc.c     ****     }
 445:Src/foc.c     **** }
 446:Src/foc.c     **** 
 447:Src/foc.c     **** 
 448:Src/foc.c     **** 
 449:Src/foc.c     **** void Set_Vector(Uvect_Mos u, float duty)
 450:Src/foc.c     **** {
 451:Src/foc.c     ****     CCR_Duty temp_duty = {0};
 452:Src/foc.c     ****     if(duty>0.95f){
 453:Src/foc.c     ****         duty=0.95f;
 454:Src/foc.c     ****     }
 455:Src/foc.c     **** 
 456:Src/foc.c     ****     temp_duty.ccra = u.a * duty; //011
 457:Src/foc.c     ****     temp_duty.ccrb = u.b * duty;
 458:Src/foc.c     ****     temp_duty.ccrc = u.c * duty;
 459:Src/foc.c     **** 
 460:Src/foc.c     ****     SVPWM_Step(temp_duty);
 461:Src/foc.c     **** }
 462:Src/foc.c     **** 
 463:Src/foc.c     **** static void Measure_R_MS_Handler(float duty)
 464:Src/foc.c     **** {
 465:Src/foc.c     ****     CCR_Duty temp_duty = {0};
 466:Src/foc.c     ****     static float current1 = 0;
 467:Src/foc.c     ****     static float current2 = 0;
 468:Src/foc.c     ****     if (Measure_R_Info.time == 0)
 469:Src/foc.c     ****     {
 470:Src/foc.c     ****         Measure_R_Info.Used_Mos = &U5;
 471:Src/foc.c     ****         Measure_R_Info.USELESS_CNT = 2;
 472:Src/foc.c     ****         Measure_R_Info.CNT_MAX = 30;
 473:Src/foc.c     **** 
 474:Src/foc.c     ****         /*
 475:Src/foc.c     ****         temp_duty.ccra = Measure_R_Info.Used_Mos->a * duty; //011
 476:Src/foc.c     ****         temp_duty.ccrb = Measure_R_Info.Used_Mos->b * duty;
 477:Src/foc.c     ****         temp_duty.ccrc = Measure_R_Info.Used_Mos->c * duty;
 478:Src/foc.c     ****         SVPWM_Step(temp_duty);
 479:Src/foc.c     ****         */
 480:Src/foc.c     **** 
 481:Src/foc.c     ****         Set_Vector(*Measure_R_Info.Used_Mos,duty);
 482:Src/foc.c     ****         Measure_R_Info.time = 1;
ARM GAS  C:\Users\ncer\AppData\Local\Temp\cceGoFVP.s 			page 11


 483:Src/foc.c     **** 
 484:Src/foc.c     ****         return;
 485:Src/foc.c     ****     }
 486:Src/foc.c     **** 
 487:Src/foc.c     ****     Measure_R_Info.time += 1;
 488:Src/foc.c     **** 
 489:Src/foc.c     ****     // ËøôÈáåÁöÑÁîµÊµÅ‰ªÖÁî®‰∫éÊµãËØïÈááÊ†∑Áõ∏ÊòØÂê¶Ê≠£Á°Æ
 490:Src/foc.c     ****     current1 += ADC_RAW2_CURRENT(ADC_Values_Raw2[0]);
 491:Src/foc.c     ****     current2 += ADC_RAW2_CURRENT(ADC_Values_Raw2[1]);
 492:Src/foc.c     **** 
 493:Src/foc.c     ****     if (Measure_R_Info.time >= 3)
 494:Src/foc.c     ****     {
 495:Src/foc.c     ****         uprintf_polling("duty:%f current1:%f  current2:%f\r\n", duty, current1, current2);
 496:Src/foc.c     ****         current1 = 0;
 497:Src/foc.c     ****         current2 = 0;
 498:Src/foc.c     ****         Board_Mode = STOP_MODE;
 499:Src/foc.c     ****         Measure_R_Info.time = 0;
 500:Src/foc.c     **** 
 501:Src/foc.c     ****         if (Measure_R_Info.cnt < Measure_R_Info.CNT_MAX)
 502:Src/foc.c     ****         {
 503:Src/foc.c     ****             uprintf_polling("error! no enough time! %d \r\n", Measure_R_Info.cnt);
 504:Src/foc.c     ****         }
 505:Src/foc.c     ****         else
 506:Src/foc.c     ****         {
 507:Src/foc.c     ****             
 508:Src/foc.c     ****             Measure_R_Info.current_avg= Measure_R_Info.current_sum / (Measure_R_Info.CNT_MAX - Meas
 509:Src/foc.c     ****             uprintf_polling("current_avg:%f cnt:%d \r\n", Measure_R_Info.current_avg, Measure_R_Inf
 510:Src/foc.c     ****         }
 511:Src/foc.c     ****         Measure_R_Info.current_sum = 0;
 512:Src/foc.c     ****         Measure_R_Info.cnt = 0;
 513:Src/foc.c     ****     }
 514:Src/foc.c     **** }
 515:Src/foc.c     **** 
 516:Src/foc.c     **** static void Measure_R_20Khz_Handler(float ia,float ib)
 517:Src/foc.c     **** {
  92              		.loc 1 517 1 is_stmt 1 view -0
  93              		.cfi_startproc
  94              		@ args = 0, pretend = 0, frame = 0
  95              		@ frame_needed = 0, uses_anonymous_args = 0
  96              		@ link register save eliminated.
 518:Src/foc.c     ****     if (Board_Mode != MEASURE_R)
  97              		.loc 1 518 5 view .LVU15
  98              		.loc 1 518 20 is_stmt 0 view .LVU16
  99 0000 154B     		ldr	r3, .L10
 100 0002 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 101              		.loc 1 518 8 view .LVU17
 102 0004 052B     		cmp	r3, #5
 103 0006 15D1     		bne	.L5
 519:Src/foc.c     ****     {
 520:Src/foc.c     ****         return;
 521:Src/foc.c     ****     }
 522:Src/foc.c     **** 
 523:Src/foc.c     ****     if (Measure_R_Info.time < 1)
 104              		.loc 1 523 5 is_stmt 1 view .LVU18
 105              		.loc 1 523 23 is_stmt 0 view .LVU19
 106 0008 144B     		ldr	r3, .L10+4
 107 000a 1B68     		ldr	r3, [r3]
ARM GAS  C:\Users\ncer\AppData\Local\Temp\cceGoFVP.s 			page 12


 108              		.loc 1 523 8 view .LVU20
 109 000c 93B1     		cbz	r3, .L5
 524:Src/foc.c     ****     {
 525:Src/foc.c     ****         return;
 526:Src/foc.c     ****     }
 527:Src/foc.c     ****     Measure_R_Info.cnt++;
 110              		.loc 1 527 5 is_stmt 1 view .LVU21
 111              		.loc 1 527 19 is_stmt 0 view .LVU22
 112 000e 134A     		ldr	r2, .L10+4
 113 0010 9368     		ldr	r3, [r2, #8]
 114              		.loc 1 527 23 view .LVU23
 115 0012 0133     		adds	r3, r3, #1
 116 0014 9360     		str	r3, [r2, #8]
 528:Src/foc.c     **** 
 529:Src/foc.c     ****     // eg:USELESS_CNT=5   CNT_MAX=30
 530:Src/foc.c     ****     // 5,6,7...30
 531:Src/foc.c     ****     // so times is CNT_MAX-USELESS_CNT+1
 532:Src/foc.c     ****     if (Measure_R_Info.cnt >= Measure_R_Info.USELESS_CNT && Measure_R_Info.cnt <= Measure_R_Info.CN
 117              		.loc 1 532 5 is_stmt 1 view .LVU24
 118              		.loc 1 532 45 is_stmt 0 view .LVU25
 119 0016 D268     		ldr	r2, [r2, #12]
 120              		.loc 1 532 8 view .LVU26
 121 0018 9342     		cmp	r3, r2
 122 001a 0BD3     		bcc	.L5
 123              		.loc 1 532 97 discriminator 1 view .LVU27
 124 001c 0F4A     		ldr	r2, .L10+4
 125 001e 1269     		ldr	r2, [r2, #16]
 126              		.loc 1 532 58 discriminator 1 view .LVU28
 127 0020 9342     		cmp	r3, r2
 128 0022 07D8     		bhi	.L5
 533:Src/foc.c     ****     {
 534:Src/foc.c     ****         if (Measure_R_Info.Used_Mos == &U3)  // u3 011
 129              		.loc 1 534 9 is_stmt 1 view .LVU29
 130              		.loc 1 534 27 is_stmt 0 view .LVU30
 131 0024 0D4B     		ldr	r3, .L10+4
 132 0026 5B68     		ldr	r3, [r3, #4]
 133              		.loc 1 534 12 view .LVU31
 134 0028 0D4A     		ldr	r2, .L10+8
 135 002a 9342     		cmp	r3, r2
 136 002c 03D0     		beq	.L8
 535:Src/foc.c     ****         { //011
 536:Src/foc.c     ****             Measure_R_Info.current_sum += ia;
 537:Src/foc.c     ****         }
 538:Src/foc.c     ****         else if (Measure_R_Info.Used_Mos == &U5)
 137              		.loc 1 538 14 is_stmt 1 view .LVU32
 138              		.loc 1 538 17 is_stmt 0 view .LVU33
 139 002e 0D4A     		ldr	r2, .L10+12
 140 0030 9342     		cmp	r3, r2
 141 0032 08D0     		beq	.L9
 142              	.LVL1:
 143              	.L5:
 539:Src/foc.c     ****         {
 540:Src/foc.c     ****             Measure_R_Info.current_sum += ib;
 541:Src/foc.c     ****         }
 542:Src/foc.c     ****     }
 543:Src/foc.c     **** }
 144              		.loc 1 543 1 view .LVU34
ARM GAS  C:\Users\ncer\AppData\Local\Temp\cceGoFVP.s 			page 13


 145 0034 7047     		bx	lr
 146              	.LVL2:
 147              	.L8:
 536:Src/foc.c     ****         }
 148              		.loc 1 536 13 is_stmt 1 view .LVU35
 536:Src/foc.c     ****         }
 149              		.loc 1 536 40 is_stmt 0 view .LVU36
 150 0036 094B     		ldr	r3, .L10+4
 151 0038 D3ED057A 		vldr.32	s15, [r3, #20]
 152 003c 37EE800A 		vadd.f32	s0, s15, s0
 153              	.LVL3:
 536:Src/foc.c     ****         }
 154              		.loc 1 536 40 view .LVU37
 155 0040 83ED050A 		vstr.32	s0, [r3, #20]
 156 0044 7047     		bx	lr
 157              	.LVL4:
 158              	.L9:
 540:Src/foc.c     ****         }
 159              		.loc 1 540 13 is_stmt 1 view .LVU38
 540:Src/foc.c     ****         }
 160              		.loc 1 540 40 is_stmt 0 view .LVU39
 161 0046 054B     		ldr	r3, .L10+4
 162 0048 D3ED057A 		vldr.32	s15, [r3, #20]
 163 004c 77EEA00A 		vadd.f32	s1, s15, s1
 164              	.LVL5:
 540:Src/foc.c     ****         }
 165              		.loc 1 540 40 view .LVU40
 166 0050 C3ED050A 		vstr.32	s1, [r3, #20]
 167 0054 EEE7     		b	.L5
 168              	.L11:
 169 0056 00BF     		.align	2
 170              	.L10:
 171 0058 00000000 		.word	Board_Mode
 172 005c 00000000 		.word	Measure_R_Info
 173 0060 00000000 		.word	.LANCHOR0
 174 0064 00000000 		.word	.LANCHOR1
 175              		.cfi_endproc
 176              	.LFE185:
 178              		.section	.text.UVects_Init,"ax",%progbits
 179              		.align	1
 180              		.syntax unified
 181              		.thumb
 182              		.thumb_func
 183              		.fpu fpv4-sp-d16
 185              	UVects_Init:
 186              	.LFB166:
  84:Src/foc.c     ****     for (int i = 0; i < 6; ++i)
 187              		.loc 1 84 1 is_stmt 1 view -0
 188              		.cfi_startproc
 189              		@ args = 0, pretend = 0, frame = 0
 190              		@ frame_needed = 0, uses_anonymous_args = 0
 191 0000 70B5     		push	{r4, r5, r6, lr}
 192              	.LCFI2:
 193              		.cfi_def_cfa_offset 16
 194              		.cfi_offset 4, -16
 195              		.cfi_offset 5, -12
 196              		.cfi_offset 6, -8
ARM GAS  C:\Users\ncer\AppData\Local\Temp\cceGoFVP.s 			page 14


 197              		.cfi_offset 14, -4
 198 0002 2DED028B 		vpush.64	{d8}
 199              	.LCFI3:
 200              		.cfi_def_cfa_offset 24
 201              		.cfi_offset 80, -24
 202              		.cfi_offset 81, -20
  85:Src/foc.c     ****     {
 203              		.loc 1 85 5 view .LVU42
 204              	.LBB2:
  85:Src/foc.c     ****     {
 205              		.loc 1 85 10 view .LVU43
 206              	.LVL6:
  85:Src/foc.c     ****     {
 207              		.loc 1 85 14 is_stmt 0 view .LVU44
 208 0006 0024     		movs	r4, #0
 209              	.LVL7:
 210              	.L13:
  85:Src/foc.c     ****     {
 211              		.loc 1 85 21 is_stmt 1 discriminator 1 view .LVU45
  85:Src/foc.c     ****     {
 212              		.loc 1 85 5 is_stmt 0 discriminator 1 view .LVU46
 213 0008 052C     		cmp	r4, #5
 214 000a 14DC     		bgt	.L16
 215              	.LBB3:
  87:Src/foc.c     ****         Uvects[i]->x = cosf(v_theta);
 216              		.loc 1 87 9 is_stmt 1 discriminator 3 view .LVU47
  87:Src/foc.c     ****         Uvects[i]->x = cosf(v_theta);
 217              		.loc 1 87 31 is_stmt 0 discriminator 3 view .LVU48
 218 000c 0B4D     		ldr	r5, .L17
 219 000e 55F82460 		ldr	r6, [r5, r4, lsl #2]
  87:Src/foc.c     ****         Uvects[i]->x = cosf(v_theta);
 220              		.loc 1 87 15 discriminator 3 view .LVU49
 221 0012 96ED018A 		vldr.32	s16, [r6, #4]
 222              	.LVL8:
  88:Src/foc.c     ****         Uvects[i]->y = sinf(v_theta);
 223              		.loc 1 88 9 is_stmt 1 discriminator 3 view .LVU50
  88:Src/foc.c     ****         Uvects[i]->y = sinf(v_theta);
 224              		.loc 1 88 24 is_stmt 0 discriminator 3 view .LVU51
 225 0016 B0EE480A 		vmov.f32	s0, s16
 226 001a FFF7FEFF 		bl	cosf
 227              	.LVL9:
  88:Src/foc.c     ****         Uvects[i]->y = sinf(v_theta);
 228              		.loc 1 88 22 discriminator 3 view .LVU52
 229 001e 86ED020A 		vstr.32	s0, [r6, #8]
  89:Src/foc.c     ****     }
 230              		.loc 1 89 9 is_stmt 1 discriminator 3 view .LVU53
  89:Src/foc.c     ****     }
 231              		.loc 1 89 15 is_stmt 0 discriminator 3 view .LVU54
 232 0022 55F82450 		ldr	r5, [r5, r4, lsl #2]
  89:Src/foc.c     ****     }
 233              		.loc 1 89 24 discriminator 3 view .LVU55
 234 0026 B0EE480A 		vmov.f32	s0, s16
 235 002a FFF7FEFF 		bl	sinf
 236              	.LVL10:
  89:Src/foc.c     ****     }
 237              		.loc 1 89 22 discriminator 3 view .LVU56
 238 002e 85ED030A 		vstr.32	s0, [r5, #12]
ARM GAS  C:\Users\ncer\AppData\Local\Temp\cceGoFVP.s 			page 15


 239              	.LBE3:
  85:Src/foc.c     ****     {
 240              		.loc 1 85 28 is_stmt 1 discriminator 3 view .LVU57
 241 0032 0134     		adds	r4, r4, #1
 242              	.LVL11:
  85:Src/foc.c     ****     {
 243              		.loc 1 85 28 is_stmt 0 discriminator 3 view .LVU58
 244 0034 E8E7     		b	.L13
 245              	.LVL12:
 246              	.L16:
  85:Src/foc.c     ****     {
 247              		.loc 1 85 28 discriminator 3 view .LVU59
 248              	.LBE2:
  91:Src/foc.c     **** 
 249              		.loc 1 91 1 view .LVU60
 250 0036 BDEC028B 		vldm	sp!, {d8}
 251              	.LCFI4:
 252              		.cfi_restore 80
 253              		.cfi_restore 81
 254              		.cfi_def_cfa_offset 16
 255 003a 70BD     		pop	{r4, r5, r6, pc}
 256              	.LVL13:
 257              	.L18:
  91:Src/foc.c     **** 
 258              		.loc 1 91 1 view .LVU61
 259              		.align	2
 260              	.L17:
 261 003c 00000000 		.word	.LANCHOR2
 262              		.cfi_endproc
 263              	.LFE166:
 265              		.section	.rodata.Measure_L_20Khz_Handler.str1.4,"aMS",%progbits,1
 266              		.align	2
 267              	.LC0:
 268 0000 66696E69 		.ascii	"finish!   time:%d\015\012\000"
 268      73682120 
 268      20207469 
 268      6D653A25 
 268      640D0A00 
 269              		.section	.text.Measure_L_20Khz_Handler,"ax",%progbits
 270              		.align	1
 271              		.syntax unified
 272              		.thumb
 273              		.thumb_func
 274              		.fpu fpv4-sp-d16
 276              	Measure_L_20Khz_Handler:
 277              	.LVL14:
 278              	.LFB187:
 544:Src/foc.c     **** 
 545:Src/foc.c     **** Time_Counter Measure_L_Time_Counter;
 546:Src/foc.c     **** void Measure_L(float duty){
 547:Src/foc.c     ****     Board_Mode = MEASURE_L;
 548:Src/foc.c     ****     Set_Vector(U4,duty);
 549:Src/foc.c     ****     Time_Counter_Start(&Measure_L_Time_Counter);
 550:Src/foc.c     ****     HAL_Delay(3);
 551:Src/foc.c     **** 
 552:Src/foc.c     ****     uprintf_polling("3ms pass!\r\n");
 553:Src/foc.c     ****     Board_Mode=STOP_MODE;
ARM GAS  C:\Users\ncer\AppData\Local\Temp\cceGoFVP.s 			page 16


 554:Src/foc.c     **** 
 555:Src/foc.c     **** }
 556:Src/foc.c     **** 
 557:Src/foc.c     **** static void Measure_L_20Khz_Handler(float max_current,float Ialpha){
 279              		.loc 1 557 68 is_stmt 1 view -0
 280              		.cfi_startproc
 281              		@ args = 0, pretend = 0, frame = 0
 282              		@ frame_needed = 0, uses_anonymous_args = 0
 283              		.loc 1 557 68 is_stmt 0 view .LVU63
 284 0000 08B5     		push	{r3, lr}
 285              	.LCFI5:
 286              		.cfi_def_cfa_offset 8
 287              		.cfi_offset 3, -8
 288              		.cfi_offset 14, -4
 558:Src/foc.c     ****     uint32_t  time;
 289              		.loc 1 558 5 is_stmt 1 view .LVU64
 559:Src/foc.c     ****     if(Board_Mode!=MEASURE_L){
 290              		.loc 1 559 5 view .LVU65
 291              		.loc 1 559 18 is_stmt 0 view .LVU66
 292 0002 0C4B     		ldr	r3, .L25
 293 0004 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 294              		.loc 1 559 7 view .LVU67
 295 0006 062B     		cmp	r3, #6
 296 0008 08D1     		bne	.L19
 560:Src/foc.c     ****         return ;
 561:Src/foc.c     ****     }
 562:Src/foc.c     **** 
 563:Src/foc.c     ****     if(Ialpha>max_current*0.632f){
 297              		.loc 1 563 5 is_stmt 1 view .LVU68
 298              		.loc 1 563 26 is_stmt 0 view .LVU69
 299 000a DFED0B7A 		vldr.32	s15, .L25+4
 300 000e 20EE270A 		vmul.f32	s0, s0, s15
 301              	.LVL15:
 302              		.loc 1 563 7 view .LVU70
 303 0012 B4EEE00A 		vcmpe.f32	s0, s1
 304 0016 F1EE10FA 		vmrs	APSR_nzcv, FPSCR
 305 001a 00D4     		bmi	.L24
 306              	.LVL16:
 307              	.L19:
 564:Src/foc.c     ****         Board_Mode=STOP_MODE;
 565:Src/foc.c     ****         time=Time_Counter_Stop(&Measure_L_Time_Counter);
 566:Src/foc.c     ****         uprintf_polling("finish!   time:%d\r\n",time);
 567:Src/foc.c     ****     }
 568:Src/foc.c     **** 
 569:Src/foc.c     **** }
 308              		.loc 1 569 1 view .LVU71
 309 001c 08BD     		pop	{r3, pc}
 310              	.LVL17:
 311              	.L24:
 564:Src/foc.c     ****         Board_Mode=STOP_MODE;
 312              		.loc 1 564 9 is_stmt 1 view .LVU72
 564:Src/foc.c     ****         Board_Mode=STOP_MODE;
 313              		.loc 1 564 19 is_stmt 0 view .LVU73
 314 001e 054B     		ldr	r3, .L25
 315 0020 0022     		movs	r2, #0
 316 0022 1A70     		strb	r2, [r3]
 565:Src/foc.c     ****         uprintf_polling("finish!   time:%d\r\n",time);
ARM GAS  C:\Users\ncer\AppData\Local\Temp\cceGoFVP.s 			page 17


 317              		.loc 1 565 9 is_stmt 1 view .LVU74
 565:Src/foc.c     ****         uprintf_polling("finish!   time:%d\r\n",time);
 318              		.loc 1 565 14 is_stmt 0 view .LVU75
 319 0024 0548     		ldr	r0, .L25+8
 320 0026 FFF7FEFF 		bl	Time_Counter_Stop
 321              	.LVL18:
 565:Src/foc.c     ****         uprintf_polling("finish!   time:%d\r\n",time);
 322              		.loc 1 565 14 view .LVU76
 323 002a 0146     		mov	r1, r0
 324              	.LVL19:
 566:Src/foc.c     ****     }
 325              		.loc 1 566 9 is_stmt 1 view .LVU77
 326 002c 0448     		ldr	r0, .L25+12
 327              	.LVL20:
 566:Src/foc.c     ****     }
 328              		.loc 1 566 9 is_stmt 0 view .LVU78
 329 002e FFF7FEFF 		bl	uprintf_polling
 330              	.LVL21:
 566:Src/foc.c     ****     }
 331              		.loc 1 566 9 view .LVU79
 332 0032 F3E7     		b	.L19
 333              	.L26:
 334              		.align	2
 335              	.L25:
 336 0034 00000000 		.word	Board_Mode
 337 0038 C1CA213F 		.word	1059179201
 338 003c 00000000 		.word	Measure_L_Time_Counter
 339 0040 00000000 		.word	.LC0
 340              		.cfi_endproc
 341              	.LFE187:
 343              		.section	.text.Foc_Init,"ax",%progbits
 344              		.align	1
 345              		.global	Foc_Init
 346              		.syntax unified
 347              		.thumb
 348              		.thumb_func
 349              		.fpu fpv4-sp-d16
 351              	Foc_Init:
 352              	.LVL22:
 353              	.LFB167:
  94:Src/foc.c     ****     // rps unit is r/s
 354              		.loc 1 94 1 is_stmt 1 view -0
 355              		.cfi_startproc
 356              		@ args = 0, pretend = 0, frame = 0
 357              		@ frame_needed = 0, uses_anonymous_args = 0
  94:Src/foc.c     ****     // rps unit is r/s
 358              		.loc 1 94 1 is_stmt 0 view .LVU81
 359 0000 10B5     		push	{r4, lr}
 360              	.LCFI6:
 361              		.cfi_def_cfa_offset 8
 362              		.cfi_offset 4, -8
 363              		.cfi_offset 14, -4
  96:Src/foc.c     ****     TIM8->ARR = 168000000 / TIM8_FREQ / 2;
 364              		.loc 1 96 5 is_stmt 1 view .LVU82
  96:Src/foc.c     ****     TIM8->ARR = 168000000 / TIM8_FREQ / 2;
 365              		.loc 1 96 16 is_stmt 0 view .LVU83
 366 0002 194B     		ldr	r3, .L29
ARM GAS  C:\Users\ncer\AppData\Local\Temp\cceGoFVP.s 			page 18


 367 0004 0222     		movs	r2, #2
 368 0006 1A70     		strb	r2, [r3]
  97:Src/foc.c     **** 
 369              		.loc 1 97 5 is_stmt 1 view .LVU84
  97:Src/foc.c     **** 
 370              		.loc 1 97 15 is_stmt 0 view .LVU85
 371 0008 184B     		ldr	r3, .L29+4
 372 000a 41F26802 		movw	r2, #4200
 373 000e DA62     		str	r2, [r3, #44]
  99:Src/foc.c     **** 
 374              		.loc 1 99 5 is_stmt 1 view .LVU86
  99:Src/foc.c     **** 
 375              		.loc 1 99 22 is_stmt 0 view .LVU87
 376 0010 DA6A     		ldr	r2, [r3, #44]
  99:Src/foc.c     **** 
 377              		.loc 1 99 28 view .LVU88
 378 0012 023A     		subs	r2, r2, #2
  99:Src/foc.c     **** 
 379              		.loc 1 99 16 view .LVU89
 380 0014 1A64     		str	r2, [r3, #64]
 101:Src/foc.c     **** #ifdef DRIVE
 381              		.loc 1 101 5 is_stmt 1 view .LVU90
 382 0016 FFF7FEFF 		bl	UVects_Init
 383              	.LVL23:
 103:Src/foc.c     ****     HAL_TIM_PWM_Start(&htim8, TIM_CHANNEL_2);
 384              		.loc 1 103 5 view .LVU91
 385 001a 154C     		ldr	r4, .L29+8
 386 001c 0021     		movs	r1, #0
 387 001e 2046     		mov	r0, r4
 388 0020 FFF7FEFF 		bl	HAL_TIM_PWM_Start
 389              	.LVL24:
 104:Src/foc.c     ****     HAL_TIM_PWM_Start(&htim8, TIM_CHANNEL_3);
 390              		.loc 1 104 5 view .LVU92
 391 0024 0421     		movs	r1, #4
 392 0026 2046     		mov	r0, r4
 393 0028 FFF7FEFF 		bl	HAL_TIM_PWM_Start
 394              	.LVL25:
 105:Src/foc.c     **** 
 395              		.loc 1 105 5 view .LVU93
 396 002c 0821     		movs	r1, #8
 397 002e 2046     		mov	r0, r4
 398 0030 FFF7FEFF 		bl	HAL_TIM_PWM_Start
 399              	.LVL26:
 107:Src/foc.c     ****     HAL_TIMEx_PWMN_Start(&htim8, TIM_CHANNEL_2);
 400              		.loc 1 107 5 view .LVU94
 401 0034 0021     		movs	r1, #0
 402 0036 2046     		mov	r0, r4
 403 0038 FFF7FEFF 		bl	HAL_TIMEx_PWMN_Start
 404              	.LVL27:
 108:Src/foc.c     ****     HAL_TIMEx_PWMN_Start(&htim8, TIM_CHANNEL_3);
 405              		.loc 1 108 5 view .LVU95
 406 003c 0421     		movs	r1, #4
 407 003e 2046     		mov	r0, r4
 408 0040 FFF7FEFF 		bl	HAL_TIMEx_PWMN_Start
 409              	.LVL28:
 109:Src/foc.c     **** #endif
 410              		.loc 1 109 5 view .LVU96
ARM GAS  C:\Users\ncer\AppData\Local\Temp\cceGoFVP.s 			page 19


 411 0044 0821     		movs	r1, #8
 412 0046 2046     		mov	r0, r4
 413 0048 FFF7FEFF 		bl	HAL_TIMEx_PWMN_Start
 414              	.LVL29:
 114:Src/foc.c     ****     TIM7->ARR = 42000000 / TIM7_FREQ - 1;
 415              		.loc 1 114 5 view .LVU97
 114:Src/foc.c     ****     TIM7->ARR = 42000000 / TIM7_FREQ - 1;
 416              		.loc 1 114 15 is_stmt 0 view .LVU98
 417 004c 094B     		ldr	r3, .L29+12
 418 004e 0122     		movs	r2, #1
 419 0050 9A62     		str	r2, [r3, #40]
 115:Src/foc.c     **** 
 420              		.loc 1 115 5 is_stmt 1 view .LVU99
 115:Src/foc.c     **** 
 421              		.loc 1 115 15 is_stmt 0 view .LVU100
 422 0052 4AF20F42 		movw	r2, #41999
 423 0056 DA62     		str	r2, [r3, #44]
 117:Src/foc.c     ****     //HAL_TIM_Base_Start_IT(&htim6);
 424              		.loc 1 117 5 is_stmt 1 view .LVU101
 425 0058 0748     		ldr	r0, .L29+16
 426 005a FFF7FEFF 		bl	HAL_TIM_Base_Start_IT
 427              	.LVL30:
 119:Src/foc.c     **** }
 428              		.loc 1 119 5 view .LVU102
 429 005e 2046     		mov	r0, r4
 430 0060 FFF7FEFF 		bl	HAL_TIM_Base_Start
 431              	.LVL31:
 120:Src/foc.c     **** 
 432              		.loc 1 120 1 is_stmt 0 view .LVU103
 433 0064 10BD     		pop	{r4, pc}
 434              	.L30:
 435 0066 00BF     		.align	2
 436              	.L29:
 437 0068 00000000 		.word	Board_Mode
 438 006c 00040140 		.word	1073808384
 439 0070 00000000 		.word	htim8
 440 0074 00140040 		.word	1073746944
 441 0078 00000000 		.word	htim7
 442              		.cfi_endproc
 443              	.LFE167:
 445              		.section	.text.get_area,"ax",%progbits
 446              		.align	1
 447              		.global	get_area
 448              		.syntax unified
 449              		.thumb
 450              		.thumb_func
 451              		.fpu fpv4-sp-d16
 453              	get_area:
 454              	.LVL32:
 455              	.LFB168:
 123:Src/foc.c     ****     return now_theta / 60 + 1;
 456              		.loc 1 123 1 is_stmt 1 view -0
 457              		.cfi_startproc
 458              		@ args = 0, pretend = 0, frame = 0
 459              		@ frame_needed = 0, uses_anonymous_args = 0
 460              		@ link register save eliminated.
 124:Src/foc.c     **** }
ARM GAS  C:\Users\ncer\AppData\Local\Temp\cceGoFVP.s 			page 20


 461              		.loc 1 124 5 view .LVU105
 124:Src/foc.c     **** }
 462              		.loc 1 124 22 is_stmt 0 view .LVU106
 463 0000 034B     		ldr	r3, .L32
 464 0002 A3FB0030 		umull	r3, r0, r3, r0
 465              	.LVL33:
 124:Src/foc.c     **** }
 466              		.loc 1 124 22 view .LVU107
 467 0006 4009     		lsrs	r0, r0, #5
 124:Src/foc.c     **** }
 468              		.loc 1 124 27 view .LVU108
 469 0008 0130     		adds	r0, r0, #1
 125:Src/foc.c     **** 
 470              		.loc 1 125 1 view .LVU109
 471 000a C0B2     		uxtb	r0, r0
 472 000c 7047     		bx	lr
 473              	.L33:
 474 000e 00BF     		.align	2
 475              	.L32:
 476 0010 89888888 		.word	-2004318071
 477              		.cfi_endproc
 478              	.LFE168:
 480              		.section	.text.get_area_u,"ax",%progbits
 481              		.align	1
 482              		.global	get_area_u
 483              		.syntax unified
 484              		.thumb
 485              		.thumb_func
 486              		.fpu fpv4-sp-d16
 488              	get_area_u:
 489              	.LVL34:
 490              	.LFB169:
 130:Src/foc.c     ****     switch (area)
 491              		.loc 1 130 1 is_stmt 1 view -0
 492              		.cfi_startproc
 493              		@ args = 0, pretend = 0, frame = 0
 494              		@ frame_needed = 0, uses_anonymous_args = 0
 495              		@ link register save eliminated.
 130:Src/foc.c     ****     switch (area)
 496              		.loc 1 130 1 is_stmt 0 view .LVU111
 497 0000 30B4     		push	{r4, r5}
 498              	.LCFI7:
 499              		.cfi_def_cfa_offset 8
 500              		.cfi_offset 4, -8
 501              		.cfi_offset 5, -4
 502 0002 0D46     		mov	r5, r1
 503 0004 1446     		mov	r4, r2
 131:Src/foc.c     ****     {
 504              		.loc 1 131 5 is_stmt 1 view .LVU112
 505 0006 0138     		subs	r0, r0, #1
 506              	.LVL35:
 131:Src/foc.c     ****     {
 507              		.loc 1 131 5 is_stmt 0 view .LVU113
 508 0008 0528     		cmp	r0, #5
 509 000a 0CD8     		bhi	.L34
 510 000c DFE800F0 		tbb	[pc, r0]
 511              	.L37:
ARM GAS  C:\Users\ncer\AppData\Local\Temp\cceGoFVP.s 			page 21


 512 0010 03       		.byte	(.L42-.L37)/2
 513 0011 0D       		.byte	(.L41-.L37)/2
 514 0012 16       		.byte	(.L40-.L37)/2
 515 0013 1F       		.byte	(.L39-.L37)/2
 516 0014 28       		.byte	(.L38-.L37)/2
 517 0015 31       		.byte	(.L36-.L37)/2
 518              		.p2align 1
 519              	.L42:
 134:Src/foc.c     ****         *u2 = U6;
 520              		.loc 1 134 9 is_stmt 1 view .LVU114
 134:Src/foc.c     ****         *u2 = U6;
 521              		.loc 1 134 13 is_stmt 0 view .LVU115
 522 0016 1B4B     		ldr	r3, .L44
 523 0018 0FCB     		ldm	r3, {r0, r1, r2, r3}
 524              	.LVL36:
 134:Src/foc.c     ****         *u2 = U6;
 525              		.loc 1 134 13 view .LVU116
 526 001a 85E80F00 		stm	r5, {r0, r1, r2, r3}
 135:Src/foc.c     ****         break;
 527              		.loc 1 135 9 is_stmt 1 view .LVU117
 135:Src/foc.c     ****         break;
 528              		.loc 1 135 13 is_stmt 0 view .LVU118
 529 001e 1A4B     		ldr	r3, .L44+4
 530 0020 0FCB     		ldm	r3, {r0, r1, r2, r3}
 531 0022 84E80F00 		stm	r4, {r0, r1, r2, r3}
 136:Src/foc.c     ****     case 2:
 532              		.loc 1 136 9 is_stmt 1 view .LVU119
 533              	.L34:
 160:Src/foc.c     **** 
 534              		.loc 1 160 1 is_stmt 0 view .LVU120
 535 0026 30BC     		pop	{r4, r5}
 536              	.LCFI8:
 537              		.cfi_remember_state
 538              		.cfi_restore 5
 539              		.cfi_restore 4
 540              		.cfi_def_cfa_offset 0
 541              	.LVL37:
 160:Src/foc.c     **** 
 542              		.loc 1 160 1 view .LVU121
 543 0028 7047     		bx	lr
 544              	.LVL38:
 545              	.L41:
 546              	.LCFI9:
 547              		.cfi_restore_state
 138:Src/foc.c     ****         *u2 = U2;
 548              		.loc 1 138 9 is_stmt 1 view .LVU122
 138:Src/foc.c     ****         *u2 = U2;
 549              		.loc 1 138 13 is_stmt 0 view .LVU123
 550 002a 174B     		ldr	r3, .L44+4
 551 002c 0FCB     		ldm	r3, {r0, r1, r2, r3}
 552              	.LVL39:
 138:Src/foc.c     ****         *u2 = U2;
 553              		.loc 1 138 13 view .LVU124
 554 002e 85E80F00 		stm	r5, {r0, r1, r2, r3}
 139:Src/foc.c     ****         break;
 555              		.loc 1 139 9 is_stmt 1 view .LVU125
 139:Src/foc.c     ****         break;
ARM GAS  C:\Users\ncer\AppData\Local\Temp\cceGoFVP.s 			page 22


 556              		.loc 1 139 13 is_stmt 0 view .LVU126
 557 0032 164B     		ldr	r3, .L44+8
 558 0034 0FCB     		ldm	r3, {r0, r1, r2, r3}
 559 0036 84E80F00 		stm	r4, {r0, r1, r2, r3}
 140:Src/foc.c     ****     case 3:
 560              		.loc 1 140 9 is_stmt 1 view .LVU127
 561 003a F4E7     		b	.L34
 562              	.LVL40:
 563              	.L40:
 142:Src/foc.c     ****         *u2 = U3;
 564              		.loc 1 142 9 view .LVU128
 142:Src/foc.c     ****         *u2 = U3;
 565              		.loc 1 142 13 is_stmt 0 view .LVU129
 566 003c 134B     		ldr	r3, .L44+8
 567 003e 0FCB     		ldm	r3, {r0, r1, r2, r3}
 568              	.LVL41:
 142:Src/foc.c     ****         *u2 = U3;
 569              		.loc 1 142 13 view .LVU130
 570 0040 85E80F00 		stm	r5, {r0, r1, r2, r3}
 143:Src/foc.c     ****         break;
 571              		.loc 1 143 9 is_stmt 1 view .LVU131
 143:Src/foc.c     ****         break;
 572              		.loc 1 143 13 is_stmt 0 view .LVU132
 573 0044 124B     		ldr	r3, .L44+12
 574 0046 0FCB     		ldm	r3, {r0, r1, r2, r3}
 575 0048 84E80F00 		stm	r4, {r0, r1, r2, r3}
 144:Src/foc.c     ****     case 4:
 576              		.loc 1 144 9 is_stmt 1 view .LVU133
 577 004c EBE7     		b	.L34
 578              	.LVL42:
 579              	.L39:
 146:Src/foc.c     ****         *u2 = U1;
 580              		.loc 1 146 9 view .LVU134
 146:Src/foc.c     ****         *u2 = U1;
 581              		.loc 1 146 13 is_stmt 0 view .LVU135
 582 004e 104B     		ldr	r3, .L44+12
 583 0050 0FCB     		ldm	r3, {r0, r1, r2, r3}
 584              	.LVL43:
 146:Src/foc.c     ****         *u2 = U1;
 585              		.loc 1 146 13 view .LVU136
 586 0052 85E80F00 		stm	r5, {r0, r1, r2, r3}
 147:Src/foc.c     ****         break;
 587              		.loc 1 147 9 is_stmt 1 view .LVU137
 147:Src/foc.c     ****         break;
 588              		.loc 1 147 13 is_stmt 0 view .LVU138
 589 0056 0F4B     		ldr	r3, .L44+16
 590 0058 0FCB     		ldm	r3, {r0, r1, r2, r3}
 591 005a 84E80F00 		stm	r4, {r0, r1, r2, r3}
 148:Src/foc.c     ****     case 5:
 592              		.loc 1 148 9 is_stmt 1 view .LVU139
 593 005e E2E7     		b	.L34
 594              	.LVL44:
 595              	.L38:
 150:Src/foc.c     ****         *u2 = U5;
 596              		.loc 1 150 9 view .LVU140
 150:Src/foc.c     ****         *u2 = U5;
 597              		.loc 1 150 13 is_stmt 0 view .LVU141
ARM GAS  C:\Users\ncer\AppData\Local\Temp\cceGoFVP.s 			page 23


 598 0060 0C4B     		ldr	r3, .L44+16
 599 0062 0FCB     		ldm	r3, {r0, r1, r2, r3}
 600              	.LVL45:
 150:Src/foc.c     ****         *u2 = U5;
 601              		.loc 1 150 13 view .LVU142
 602 0064 85E80F00 		stm	r5, {r0, r1, r2, r3}
 151:Src/foc.c     ****         break;
 603              		.loc 1 151 9 is_stmt 1 view .LVU143
 151:Src/foc.c     ****         break;
 604              		.loc 1 151 13 is_stmt 0 view .LVU144
 605 0068 0B4B     		ldr	r3, .L44+20
 606 006a 0FCB     		ldm	r3, {r0, r1, r2, r3}
 607 006c 84E80F00 		stm	r4, {r0, r1, r2, r3}
 152:Src/foc.c     ****     case 6:
 608              		.loc 1 152 9 is_stmt 1 view .LVU145
 609 0070 D9E7     		b	.L34
 610              	.LVL46:
 611              	.L36:
 154:Src/foc.c     ****         *u2 = U4;
 612              		.loc 1 154 9 view .LVU146
 154:Src/foc.c     ****         *u2 = U4;
 613              		.loc 1 154 13 is_stmt 0 view .LVU147
 614 0072 094B     		ldr	r3, .L44+20
 615 0074 0FCB     		ldm	r3, {r0, r1, r2, r3}
 616              	.LVL47:
 154:Src/foc.c     ****         *u2 = U4;
 617              		.loc 1 154 13 view .LVU148
 618 0076 85E80F00 		stm	r5, {r0, r1, r2, r3}
 155:Src/foc.c     ****         break;
 619              		.loc 1 155 9 is_stmt 1 view .LVU149
 155:Src/foc.c     ****         break;
 620              		.loc 1 155 13 is_stmt 0 view .LVU150
 621 007a 024B     		ldr	r3, .L44
 622 007c 0FCB     		ldm	r3, {r0, r1, r2, r3}
 623 007e 84E80F00 		stm	r4, {r0, r1, r2, r3}
 156:Src/foc.c     ****     default:
 624              		.loc 1 156 9 is_stmt 1 view .LVU151
 160:Src/foc.c     **** 
 625              		.loc 1 160 1 is_stmt 0 view .LVU152
 626 0082 D0E7     		b	.L34
 627              	.L45:
 628              		.align	2
 629              	.L44:
 630 0084 00000000 		.word	.LANCHOR3
 631 0088 00000000 		.word	.LANCHOR4
 632 008c 00000000 		.word	.LANCHOR5
 633 0090 00000000 		.word	.LANCHOR0
 634 0094 00000000 		.word	.LANCHOR6
 635 0098 00000000 		.word	.LANCHOR1
 636              		.cfi_endproc
 637              	.LFE169:
 639              		.section	.text.get_t,"ax",%progbits
 640              		.align	1
 641              		.global	get_t
 642              		.syntax unified
 643              		.thumb
 644              		.thumb_func
ARM GAS  C:\Users\ncer\AppData\Local\Temp\cceGoFVP.s 			page 24


 645              		.fpu fpv4-sp-d16
 647              	get_t:
 648              	.LVL48:
 649              	.LFB170:
 167:Src/foc.c     ****     /*
 650              		.loc 1 167 1 is_stmt 1 view -0
 651              		.cfi_startproc
 652              		@ args = 0, pretend = 0, frame = 40
 653              		@ frame_needed = 0, uses_anonymous_args = 0
 167:Src/foc.c     ****     /*
 654              		.loc 1 167 1 is_stmt 0 view .LVU154
 655 0000 30B5     		push	{r4, r5, lr}
 656              	.LCFI10:
 657              		.cfi_def_cfa_offset 12
 658              		.cfi_offset 4, -12
 659              		.cfi_offset 5, -8
 660              		.cfi_offset 14, -4
 661 0002 2DED028B 		vpush.64	{d8}
 662              	.LCFI11:
 663              		.cfi_def_cfa_offset 20
 664              		.cfi_offset 80, -20
 665              		.cfi_offset 81, -16
 666 0006 8BB0     		sub	sp, sp, #44
 667              	.LCFI12:
 668              		.cfi_def_cfa_offset 64
 669 0008 B0EE408A 		vmov.f32	s16, s0
 670 000c 0546     		mov	r5, r0
 671 000e 0C46     		mov	r4, r1
 177:Src/foc.c     ****     float theta_f; // Âçï‰Ωç‰∏∫rad
 672              		.loc 1 177 5 is_stmt 1 view .LVU155
 178:Src/foc.c     ****     Uvect_Mos u1, u2;
 673              		.loc 1 178 5 view .LVU156
 179:Src/foc.c     ****     float x, y;
 674              		.loc 1 179 5 view .LVU157
 180:Src/foc.c     ****     get_area_u(get_area(theta), &u1, &u2);
 675              		.loc 1 180 5 view .LVU158
 181:Src/foc.c     ****     //theta_f=(float)theta*2.0f*PI/360;
 676              		.loc 1 181 5 view .LVU159
 677 0010 FCEEC07A 		vcvt.u32.f32	s15, s0
 678 0014 17EE900A 		vmov	r0, s15	@ int
 679              	.LVL49:
 181:Src/foc.c     ****     //theta_f=(float)theta*2.0f*PI/360;
 680              		.loc 1 181 5 is_stmt 0 view .LVU160
 681 0018 FFF7FEFF 		bl	get_area
 682              	.LVL50:
 181:Src/foc.c     ****     //theta_f=(float)theta*2.0f*PI/360;
 683              		.loc 1 181 5 view .LVU161
 684 001c 02AA     		add	r2, sp, #8
 685 001e 06A9     		add	r1, sp, #24
 686 0020 FFF7FEFF 		bl	get_area_u
 687              	.LVL51:
 183:Src/foc.c     ****     x *= 0.86f;
 688              		.loc 1 183 5 is_stmt 1 view .LVU162
 689 0024 01A9     		add	r1, sp, #4
 690 0026 6846     		mov	r0, sp
 691 0028 B0EE480A 		vmov.f32	s0, s16
 692 002c FFF7FEFF 		bl	arm_sin_cos_f32
ARM GAS  C:\Users\ncer\AppData\Local\Temp\cceGoFVP.s 			page 25


 693              	.LVL52:
 184:Src/foc.c     ****     y *= 0.86f; // sqrt(3)/2 Ê≤°Èîô
 694              		.loc 1 184 5 view .LVU163
 184:Src/foc.c     ****     y *= 0.86f; // sqrt(3)/2 Ê≤°Èîô
 695              		.loc 1 184 7 is_stmt 0 view .LVU164
 696 0030 DFED197A 		vldr.32	s15, .L48
 697 0034 9DED017A 		vldr.32	s14, [sp, #4]
 698 0038 27EE277A 		vmul.f32	s14, s14, s15
 185:Src/foc.c     ****     //x=0.86f*cosf(theta_f);
 699              		.loc 1 185 5 is_stmt 1 view .LVU165
 185:Src/foc.c     ****     //x=0.86f*cosf(theta_f);
 700              		.loc 1 185 7 is_stmt 0 view .LVU166
 701 003c DDED006A 		vldr.32	s13, [sp]
 702 0040 66EEA76A 		vmul.f32	s13, s13, s15
 188:Src/foc.c     ****     temp_t2 = u1.x * y / (u1.x * u2.y - u2.x * u1.y) - (u1.y * x) / (u1.x * u2.y - u2.x * u1.y);
 703              		.loc 1 188 5 is_stmt 1 view .LVU167
 188:Src/foc.c     ****     temp_t2 = u1.x * y / (u1.x * u2.y - u2.x * u1.y) - (u1.y * x) / (u1.x * u2.y - u2.x * u1.y);
 704              		.loc 1 188 17 is_stmt 0 view .LVU168
 705 0044 DDED057A 		vldr.32	s15, [sp, #20]
 188:Src/foc.c     ****     temp_t2 = u1.x * y / (u1.x * u2.y - u2.x * u1.y) - (u1.y * x) / (u1.x * u2.y - u2.x * u1.y);
 706              		.loc 1 188 20 view .LVU169
 707 0048 27EE274A 		vmul.f32	s8, s14, s15
 188:Src/foc.c     ****     temp_t2 = u1.x * y / (u1.x * u2.y - u2.x * u1.y) - (u1.y * x) / (u1.x * u2.y - u2.x * u1.y);
 708              		.loc 1 188 29 view .LVU170
 709 004c DDED084A 		vldr.32	s9, [sp, #32]
 188:Src/foc.c     ****     temp_t2 = u1.x * y / (u1.x * u2.y - u2.x * u1.y) - (u1.y * x) / (u1.x * u2.y - u2.x * u1.y);
 710              		.loc 1 188 32 view .LVU171
 711 0050 67EEA47A 		vmul.f32	s15, s15, s9
 188:Src/foc.c     ****     temp_t2 = u1.x * y / (u1.x * u2.y - u2.x * u1.y) - (u1.y * x) / (u1.x * u2.y - u2.x * u1.y);
 712              		.loc 1 188 43 view .LVU172
 713 0054 9DED046A 		vldr.32	s12, [sp, #16]
 188:Src/foc.c     ****     temp_t2 = u1.x * y / (u1.x * u2.y - u2.x * u1.y) - (u1.y * x) / (u1.x * u2.y - u2.x * u1.y);
 714              		.loc 1 188 50 view .LVU173
 715 0058 9DED095A 		vldr.32	s10, [sp, #36]
 188:Src/foc.c     ****     temp_t2 = u1.x * y / (u1.x * u2.y - u2.x * u1.y) - (u1.y * x) / (u1.x * u2.y - u2.x * u1.y);
 716              		.loc 1 188 46 view .LVU174
 717 005c 66EE055A 		vmul.f32	s11, s12, s10
 188:Src/foc.c     ****     temp_t2 = u1.x * y / (u1.x * u2.y - u2.x * u1.y) - (u1.y * x) / (u1.x * u2.y - u2.x * u1.y);
 718              		.loc 1 188 39 view .LVU175
 719 0060 77EEE57A 		vsub.f32	s15, s15, s11
 188:Src/foc.c     ****     temp_t2 = u1.x * y / (u1.x * u2.y - u2.x * u1.y) - (u1.y * x) / (u1.x * u2.y - u2.x * u1.y);
 720              		.loc 1 188 24 view .LVU176
 721 0064 C4EE275A 		vdiv.f32	s11, s8, s15
 188:Src/foc.c     ****     temp_t2 = u1.x * y / (u1.x * u2.y - u2.x * u1.y) - (u1.y * x) / (u1.x * u2.y - u2.x * u1.y);
 722              		.loc 1 188 62 view .LVU177
 723 0068 26EE866A 		vmul.f32	s12, s13, s12
 188:Src/foc.c     ****     temp_t2 = u1.x * y / (u1.x * u2.y - u2.x * u1.y) - (u1.y * x) / (u1.x * u2.y - u2.x * u1.y);
 724              		.loc 1 188 67 view .LVU178
 725 006c 86EE274A 		vdiv.f32	s8, s12, s15
 188:Src/foc.c     ****     temp_t2 = u1.x * y / (u1.x * u2.y - u2.x * u1.y) - (u1.y * x) / (u1.x * u2.y - u2.x * u1.y);
 726              		.loc 1 188 13 view .LVU179
 727 0070 75EEC45A 		vsub.f32	s11, s11, s8
 728              	.LVL53:
 189:Src/foc.c     **** 
 729              		.loc 1 189 5 is_stmt 1 view .LVU180
 189:Src/foc.c     **** 
 730              		.loc 1 189 20 is_stmt 0 view .LVU181
ARM GAS  C:\Users\ncer\AppData\Local\Temp\cceGoFVP.s 			page 26


 731 0074 66EEA46A 		vmul.f32	s13, s13, s9
 189:Src/foc.c     **** 
 732              		.loc 1 189 24 view .LVU182
 733 0078 86EEA76A 		vdiv.f32	s12, s13, s15
 189:Src/foc.c     **** 
 734              		.loc 1 189 62 view .LVU183
 735 007c 27EE057A 		vmul.f32	s14, s14, s10
 189:Src/foc.c     **** 
 736              		.loc 1 189 67 view .LVU184
 737 0080 C7EE276A 		vdiv.f32	s13, s14, s15
 189:Src/foc.c     **** 
 738              		.loc 1 189 13 view .LVU185
 739 0084 76EE667A 		vsub.f32	s15, s12, s13
 740              	.LVL54:
 191:Src/foc.c     ****     *t2 = temp_t2;
 741              		.loc 1 191 5 is_stmt 1 view .LVU186
 191:Src/foc.c     ****     *t2 = temp_t2;
 742              		.loc 1 191 9 is_stmt 0 view .LVU187
 743 0088 C5ED005A 		vstr.32	s11, [r5]
 192:Src/foc.c     **** }
 744              		.loc 1 192 5 is_stmt 1 view .LVU188
 192:Src/foc.c     **** }
 745              		.loc 1 192 9 is_stmt 0 view .LVU189
 746 008c C4ED007A 		vstr.32	s15, [r4]
 193:Src/foc.c     **** 
 747              		.loc 1 193 1 view .LVU190
 748 0090 0BB0     		add	sp, sp, #44
 749              	.LCFI13:
 750              		.cfi_def_cfa_offset 20
 751              		@ sp needed
 752 0092 BDEC028B 		vldm	sp!, {d8}
 753              	.LCFI14:
 754              		.cfi_restore 80
 755              		.cfi_restore 81
 756              		.cfi_def_cfa_offset 12
 757              	.LVL55:
 193:Src/foc.c     **** 
 758              		.loc 1 193 1 view .LVU191
 759 0096 30BD     		pop	{r4, r5, pc}
 760              	.LVL56:
 761              	.L49:
 193:Src/foc.c     **** 
 762              		.loc 1 193 1 view .LVU192
 763              		.align	2
 764              	.L48:
 765 0098 F6285C3F 		.word	1063004406
 766              		.cfi_endproc
 767              	.LFE170:
 769              		.section	.text.get_ccr_duty,"ax",%progbits
 770              		.align	1
 771              		.global	get_ccr_duty
 772              		.syntax unified
 773              		.thumb
 774              		.thumb_func
 775              		.fpu fpv4-sp-d16
 777              	get_ccr_duty:
 778              	.LVL57:
ARM GAS  C:\Users\ncer\AppData\Local\Temp\cceGoFVP.s 			page 27


 779              	.LFB171:
 196:Src/foc.c     ****     float t0, t3;
 780              		.loc 1 196 1 is_stmt 1 view -0
 781              		.cfi_startproc
 782              		@ args = 16, pretend = 0, frame = 56
 783              		@ frame_needed = 0, uses_anonymous_args = 0
 784              		@ link register save eliminated.
 196:Src/foc.c     ****     float t0, t3;
 785              		.loc 1 196 1 is_stmt 0 view .LVU194
 786 0000 10B4     		push	{r4}
 787              	.LCFI15:
 788              		.cfi_def_cfa_offset 4
 789              		.cfi_offset 4, -4
 790 0002 8FB0     		sub	sp, sp, #60
 791              	.LCFI16:
 792              		.cfi_def_cfa_offset 64
 793 0004 04AC     		add	r4, sp, #16
 794 0006 84E80F00 		stm	r4, {r0, r1, r2, r3}
 197:Src/foc.c     ****     CCR_Duty result;
 795              		.loc 1 197 5 is_stmt 1 view .LVU195
 198:Src/foc.c     ****     t0 = (1 - t1 - t2) / 2;
 796              		.loc 1 198 5 view .LVU196
 199:Src/foc.c     ****     t3 = t0;
 797              		.loc 1 199 5 view .LVU197
 199:Src/foc.c     ****     t3 = t0;
 798              		.loc 1 199 13 is_stmt 0 view .LVU198
 799 000a F7EE007A 		vmov.f32	s15, #1.0e+0
 800 000e 77EEC07A 		vsub.f32	s15, s15, s0
 199:Src/foc.c     ****     t3 = t0;
 801              		.loc 1 199 18 view .LVU199
 802 0012 77EEE07A 		vsub.f32	s15, s15, s1
 199:Src/foc.c     ****     t3 = t0;
 803              		.loc 1 199 8 view .LVU200
 804 0016 B6EE007A 		vmov.f32	s14, #5.0e-1
 805 001a 27EE877A 		vmul.f32	s14, s15, s14
 806              	.LVL58:
 200:Src/foc.c     **** 
 807              		.loc 1 200 5 is_stmt 1 view .LVU201
 202:Src/foc.c     ****     result.ccrb = U7.b * t3 + u1.b * t1 + u2.b * t2;
 808              		.loc 1 202 5 view .LVU202
 202:Src/foc.c     ****     result.ccrb = U7.b * t3 + u1.b * t1 + u2.b * t2;
 809              		.loc 1 202 21 is_stmt 0 view .LVU203
 810 001e 344B     		ldr	r3, .L52
 811 0020 1A78     		ldrb	r2, [r3]	@ zero_extendqisi2
 812 0022 07EE902A 		vmov	s15, r2	@ int
 202:Src/foc.c     ****     result.ccrb = U7.b * t3 + u1.b * t1 + u2.b * t2;
 813              		.loc 1 202 24 view .LVU204
 814 0026 F8EEE77A 		vcvt.f32.s32	s15, s15
 815 002a 67EE877A 		vmul.f32	s15, s15, s14
 202:Src/foc.c     ****     result.ccrb = U7.b * t3 + u1.b * t1 + u2.b * t2;
 816              		.loc 1 202 33 view .LVU205
 817 002e 9DF81020 		ldrb	r2, [sp, #16]	@ zero_extendqisi2
 818 0032 06EE902A 		vmov	s13, r2	@ int
 202:Src/foc.c     ****     result.ccrb = U7.b * t3 + u1.b * t1 + u2.b * t2;
 819              		.loc 1 202 36 view .LVU206
 820 0036 F8EEE66A 		vcvt.f32.s32	s13, s13
 821 003a 66EE806A 		vmul.f32	s13, s13, s0
ARM GAS  C:\Users\ncer\AppData\Local\Temp\cceGoFVP.s 			page 28


 202:Src/foc.c     ****     result.ccrb = U7.b * t3 + u1.b * t1 + u2.b * t2;
 822              		.loc 1 202 29 view .LVU207
 823 003e 77EEA67A 		vadd.f32	s15, s15, s13
 202:Src/foc.c     ****     result.ccrb = U7.b * t3 + u1.b * t1 + u2.b * t2;
 824              		.loc 1 202 45 view .LVU208
 825 0042 9DF84020 		ldrb	r2, [sp, #64]	@ zero_extendqisi2
 826 0046 06EE902A 		vmov	s13, r2	@ int
 202:Src/foc.c     ****     result.ccrb = U7.b * t3 + u1.b * t1 + u2.b * t2;
 827              		.loc 1 202 48 view .LVU209
 828 004a F8EEE66A 		vcvt.f32.s32	s13, s13
 829 004e 66EEA06A 		vmul.f32	s13, s13, s1
 202:Src/foc.c     ****     result.ccrb = U7.b * t3 + u1.b * t1 + u2.b * t2;
 830              		.loc 1 202 41 view .LVU210
 831 0052 77EEA67A 		vadd.f32	s15, s15, s13
 202:Src/foc.c     ****     result.ccrb = U7.b * t3 + u1.b * t1 + u2.b * t2;
 832              		.loc 1 202 17 view .LVU211
 833 0056 CDED087A 		vstr.32	s15, [sp, #32]
 203:Src/foc.c     ****     result.ccrc = U7.c * t3 + u1.c * t1 + u2.c * t2;
 834              		.loc 1 203 5 is_stmt 1 view .LVU212
 203:Src/foc.c     ****     result.ccrc = U7.c * t3 + u1.c * t1 + u2.c * t2;
 835              		.loc 1 203 21 is_stmt 0 view .LVU213
 836 005a 5A78     		ldrb	r2, [r3, #1]	@ zero_extendqisi2
 837 005c 07EE902A 		vmov	s15, r2	@ int
 203:Src/foc.c     ****     result.ccrc = U7.c * t3 + u1.c * t1 + u2.c * t2;
 838              		.loc 1 203 24 view .LVU214
 839 0060 F8EEE77A 		vcvt.f32.s32	s15, s15
 840 0064 67EE877A 		vmul.f32	s15, s15, s14
 203:Src/foc.c     ****     result.ccrc = U7.c * t3 + u1.c * t1 + u2.c * t2;
 841              		.loc 1 203 33 view .LVU215
 842 0068 9DF81120 		ldrb	r2, [sp, #17]	@ zero_extendqisi2
 843 006c 06EE902A 		vmov	s13, r2	@ int
 203:Src/foc.c     ****     result.ccrc = U7.c * t3 + u1.c * t1 + u2.c * t2;
 844              		.loc 1 203 36 view .LVU216
 845 0070 F8EEE66A 		vcvt.f32.s32	s13, s13
 846 0074 66EE806A 		vmul.f32	s13, s13, s0
 203:Src/foc.c     ****     result.ccrc = U7.c * t3 + u1.c * t1 + u2.c * t2;
 847              		.loc 1 203 29 view .LVU217
 848 0078 77EEA67A 		vadd.f32	s15, s15, s13
 203:Src/foc.c     ****     result.ccrc = U7.c * t3 + u1.c * t1 + u2.c * t2;
 849              		.loc 1 203 45 view .LVU218
 850 007c 9DF84120 		ldrb	r2, [sp, #65]	@ zero_extendqisi2
 851 0080 06EE902A 		vmov	s13, r2	@ int
 203:Src/foc.c     ****     result.ccrc = U7.c * t3 + u1.c * t1 + u2.c * t2;
 852              		.loc 1 203 48 view .LVU219
 853 0084 F8EEE66A 		vcvt.f32.s32	s13, s13
 854 0088 66EEA06A 		vmul.f32	s13, s13, s1
 203:Src/foc.c     ****     result.ccrc = U7.c * t3 + u1.c * t1 + u2.c * t2;
 855              		.loc 1 203 41 view .LVU220
 856 008c 77EEA67A 		vadd.f32	s15, s15, s13
 203:Src/foc.c     ****     result.ccrc = U7.c * t3 + u1.c * t1 + u2.c * t2;
 857              		.loc 1 203 17 view .LVU221
 858 0090 CDED097A 		vstr.32	s15, [sp, #36]
 204:Src/foc.c     **** 
 859              		.loc 1 204 5 is_stmt 1 view .LVU222
 204:Src/foc.c     **** 
 860              		.loc 1 204 21 is_stmt 0 view .LVU223
 861 0094 9B78     		ldrb	r3, [r3, #2]	@ zero_extendqisi2
ARM GAS  C:\Users\ncer\AppData\Local\Temp\cceGoFVP.s 			page 29


 862 0096 07EE903A 		vmov	s15, r3	@ int
 204:Src/foc.c     **** 
 863              		.loc 1 204 24 view .LVU224
 864 009a F8EEE77A 		vcvt.f32.s32	s15, s15
 865 009e 67EE877A 		vmul.f32	s15, s15, s14
 204:Src/foc.c     **** 
 866              		.loc 1 204 33 view .LVU225
 867 00a2 9DF81230 		ldrb	r3, [sp, #18]	@ zero_extendqisi2
 868 00a6 07EE103A 		vmov	s14, r3	@ int
 869              	.LVL59:
 204:Src/foc.c     **** 
 870              		.loc 1 204 36 view .LVU226
 871 00aa B8EEC77A 		vcvt.f32.s32	s14, s14
 872 00ae 27EE000A 		vmul.f32	s0, s14, s0
 873              	.LVL60:
 204:Src/foc.c     **** 
 874              		.loc 1 204 29 view .LVU227
 875 00b2 37EE800A 		vadd.f32	s0, s15, s0
 204:Src/foc.c     **** 
 876              		.loc 1 204 45 view .LVU228
 877 00b6 9DF84230 		ldrb	r3, [sp, #66]	@ zero_extendqisi2
 878 00ba 07EE903A 		vmov	s15, r3	@ int
 204:Src/foc.c     **** 
 879              		.loc 1 204 48 view .LVU229
 880 00be F8EEE77A 		vcvt.f32.s32	s15, s15
 881 00c2 67EEA00A 		vmul.f32	s1, s15, s1
 882              	.LVL61:
 204:Src/foc.c     **** 
 883              		.loc 1 204 41 view .LVU230
 884 00c6 70EE200A 		vadd.f32	s1, s0, s1
 204:Src/foc.c     **** 
 885              		.loc 1 204 17 view .LVU231
 886 00ca CDED0A0A 		vstr.32	s1, [sp, #40]
 206:Src/foc.c     **** }
 887              		.loc 1 206 5 is_stmt 1 view .LVU232
 206:Src/foc.c     **** }
 888              		.loc 1 206 12 is_stmt 0 view .LVU233
 889 00ce 08AB     		add	r3, sp, #32
 890 00d0 93E80700 		ldm	r3, {r0, r1, r2}
 891 00d4 0EAB     		add	r3, sp, #56
 892 00d6 03E90700 		stmdb	r3, {r0, r1, r2}
 207:Src/foc.c     **** 
 893              		.loc 1 207 1 view .LVU234
 894 00da 9DED0B0A 		vldr.32	s0, [sp, #44]
 895 00de DDED0C0A 		vldr.32	s1, [sp, #48]
 896 00e2 9DED0D1A 		vldr.32	s2, [sp, #52]
 897 00e6 0FB0     		add	sp, sp, #60
 898              	.LCFI17:
 899              		.cfi_def_cfa_offset 4
 900              		@ sp needed
 901 00e8 5DF8044B 		ldr	r4, [sp], #4
 902              	.LCFI18:
 903              		.cfi_restore 4
 904              		.cfi_def_cfa_offset 0
 905 00ec 7047     		bx	lr
 906              	.L53:
 907 00ee 00BF     		.align	2
ARM GAS  C:\Users\ncer\AppData\Local\Temp\cceGoFVP.s 			page 30


 908              	.L52:
 909 00f0 00000000 		.word	.LANCHOR7
 910              		.cfi_endproc
 911              	.LFE171:
 913              		.global	__aeabi_f2d
 914              		.section	.rodata.Set_to_U4.str1.4,"aMS",%progbits,1
 915              		.align	2
 916              	.LC1:
 917 0000 706F7369 		.ascii	"position:%f \015\012\000"
 917      74696F6E 
 917      3A256620 
 917      0D0A00
 918              		.section	.text.Set_to_U4,"ax",%progbits
 919              		.align	1
 920              		.global	Set_to_U4
 921              		.syntax unified
 922              		.thumb
 923              		.thumb_func
 924              		.fpu fpv4-sp-d16
 926              	Set_to_U4:
 927              	.LVL62:
 928              	.LFB173:
 220:Src/foc.c     ****     CCR_Duty temp_duty = {0};
 929              		.loc 1 220 1 is_stmt 1 view -0
 930              		.cfi_startproc
 931              		@ args = 0, pretend = 0, frame = 16
 932              		@ frame_needed = 0, uses_anonymous_args = 0
 220:Src/foc.c     ****     CCR_Duty temp_duty = {0};
 933              		.loc 1 220 1 is_stmt 0 view .LVU236
 934 0000 10B5     		push	{r4, lr}
 935              	.LCFI19:
 936              		.cfi_def_cfa_offset 8
 937              		.cfi_offset 4, -8
 938              		.cfi_offset 14, -4
 939 0002 84B0     		sub	sp, sp, #16
 940              	.LCFI20:
 941              		.cfi_def_cfa_offset 24
 942 0004 0446     		mov	r4, r0
 221:Src/foc.c     ****     temp_duty.ccra = U4.a;
 943              		.loc 1 221 5 is_stmt 1 view .LVU237
 222:Src/foc.c     ****     temp_duty.ccrb = U4.b;
 944              		.loc 1 222 5 view .LVU238
 222:Src/foc.c     ****     temp_duty.ccrb = U4.b;
 945              		.loc 1 222 24 is_stmt 0 view .LVU239
 946 0006 194B     		ldr	r3, .L56
 947 0008 1A78     		ldrb	r2, [r3]	@ zero_extendqisi2
 948 000a 00EE102A 		vmov	s0, r2	@ int
 223:Src/foc.c     ****     temp_duty.ccrc = U4.c;
 949              		.loc 1 223 5 is_stmt 1 view .LVU240
 223:Src/foc.c     ****     temp_duty.ccrc = U4.c;
 950              		.loc 1 223 24 is_stmt 0 view .LVU241
 951 000e 5A78     		ldrb	r2, [r3, #1]	@ zero_extendqisi2
 952 0010 00EE902A 		vmov	s1, r2	@ int
 224:Src/foc.c     ****     SVPWM_Step(temp_duty);
 953              		.loc 1 224 5 is_stmt 1 view .LVU242
 224:Src/foc.c     ****     SVPWM_Step(temp_duty);
 954              		.loc 1 224 24 is_stmt 0 view .LVU243
ARM GAS  C:\Users\ncer\AppData\Local\Temp\cceGoFVP.s 			page 31


 955 0014 9B78     		ldrb	r3, [r3, #2]	@ zero_extendqisi2
 956 0016 01EE103A 		vmov	s2, r3	@ int
 225:Src/foc.c     ****     HAL_Delay(t);
 957              		.loc 1 225 5 is_stmt 1 view .LVU244
 958 001a B8EE400A 		vcvt.f32.u32	s0, s0
 959 001e F8EE600A 		vcvt.f32.u32	s1, s1
 960 0022 B8EE411A 		vcvt.f32.u32	s2, s2
 961 0026 FFF7FEFF 		bl	SVPWM_Step
 962              	.LVL63:
 226:Src/foc.c     ****     temp_duty.ccra = U0.a;
 963              		.loc 1 226 5 view .LVU245
 964 002a 2046     		mov	r0, r4
 965 002c FFF7FEFF 		bl	HAL_Delay
 966              	.LVL64:
 227:Src/foc.c     ****     temp_duty.ccrb = U0.b;
 967              		.loc 1 227 5 view .LVU246
 227:Src/foc.c     ****     temp_duty.ccrb = U0.b;
 968              		.loc 1 227 24 is_stmt 0 view .LVU247
 969 0030 0F4B     		ldr	r3, .L56+4
 970 0032 1A78     		ldrb	r2, [r3]	@ zero_extendqisi2
 971 0034 00EE102A 		vmov	s0, r2	@ int
 228:Src/foc.c     ****     temp_duty.ccrc = U0.c;
 972              		.loc 1 228 5 is_stmt 1 view .LVU248
 228:Src/foc.c     ****     temp_duty.ccrc = U0.c;
 973              		.loc 1 228 24 is_stmt 0 view .LVU249
 974 0038 5A78     		ldrb	r2, [r3, #1]	@ zero_extendqisi2
 975 003a 00EE902A 		vmov	s1, r2	@ int
 229:Src/foc.c     ****     SVPWM_Step(temp_duty);
 976              		.loc 1 229 5 is_stmt 1 view .LVU250
 229:Src/foc.c     ****     SVPWM_Step(temp_duty);
 977              		.loc 1 229 24 is_stmt 0 view .LVU251
 978 003e 9B78     		ldrb	r3, [r3, #2]	@ zero_extendqisi2
 979 0040 01EE103A 		vmov	s2, r3	@ int
 230:Src/foc.c     ****     uprintf("position:%f \r\n", Position_Degree);
 980              		.loc 1 230 5 is_stmt 1 view .LVU252
 981 0044 B8EE400A 		vcvt.f32.u32	s0, s0
 982 0048 F8EE600A 		vcvt.f32.u32	s1, s1
 983 004c B8EE411A 		vcvt.f32.u32	s2, s2
 984 0050 FFF7FEFF 		bl	SVPWM_Step
 985              	.LVL65:
 231:Src/foc.c     **** }
 986              		.loc 1 231 5 view .LVU253
 987 0054 074B     		ldr	r3, .L56+8
 988 0056 1868     		ldr	r0, [r3]	@ float
 989 0058 FFF7FEFF 		bl	__aeabi_f2d
 990              	.LVL66:
 991 005c 0246     		mov	r2, r0
 992 005e 0B46     		mov	r3, r1
 993 0060 0548     		ldr	r0, .L56+12
 994 0062 FFF7FEFF 		bl	uprintf
 995              	.LVL67:
 232:Src/foc.c     **** 
 996              		.loc 1 232 1 is_stmt 0 view .LVU254
 997 0066 04B0     		add	sp, sp, #16
 998              	.LCFI21:
 999              		.cfi_def_cfa_offset 8
 1000              		@ sp needed
ARM GAS  C:\Users\ncer\AppData\Local\Temp\cceGoFVP.s 			page 32


 1001 0068 10BD     		pop	{r4, pc}
 1002              	.L57:
 1003 006a 00BF     		.align	2
 1004              	.L56:
 1005 006c 00000000 		.word	.LANCHOR3
 1006 0070 00000000 		.word	.LANCHOR8
 1007 0074 00000000 		.word	Position_Degree
 1008 0078 00000000 		.word	.LC1
 1009              		.cfi_endproc
 1010              	.LFE173:
 1012              		.section	.text.SVPWM_Normal_CalT1T2,"ax",%progbits
 1013              		.align	1
 1014              		.global	SVPWM_Normal_CalT1T2
 1015              		.syntax unified
 1016              		.thumb
 1017              		.thumb_func
 1018              		.fpu fpv4-sp-d16
 1020              	SVPWM_Normal_CalT1T2:
 1021              	.LVL68:
 1022              	.LFB175:
 258:Src/foc.c     ****     float temp = 0;
 1023              		.loc 1 258 1 is_stmt 1 view -0
 1024              		.cfi_startproc
 1025              		@ args = 0, pretend = 0, frame = 0
 1026              		@ frame_needed = 0, uses_anonymous_args = 0
 1027              		@ link register save eliminated.
 259:Src/foc.c     ****     switch (area)
 1028              		.loc 1 259 5 view .LVU256
 260:Src/foc.c     ****     {
 1029              		.loc 1 260 5 view .LVU257
 1030 0000 0138     		subs	r0, r0, #1
 1031              	.LVL69:
 260:Src/foc.c     ****     {
 1032              		.loc 1 260 5 is_stmt 0 view .LVU258
 1033 0002 0528     		cmp	r0, #5
 1034 0004 5BD8     		bhi	.L58
 1035 0006 DFE800F0 		tbb	[pc, r0]
 1036              	.L61:
 1037 000a 03       		.byte	(.L66-.L61)/2
 1038 000b 12       		.byte	(.L65-.L61)/2
 1039 000c 1F       		.byte	(.L64-.L61)/2
 1040 000d 30       		.byte	(.L63-.L61)/2
 1041 000e 3F       		.byte	(.L62-.L61)/2
 1042 000f 4C       		.byte	(.L60-.L61)/2
 1043              		.p2align 1
 1044              	.L66:
 263:Src/foc.c     ****         *t2 = 1.1547f * beta;
 1045              		.loc 1 263 9 is_stmt 1 view .LVU259
 263:Src/foc.c     ****         *t2 = 1.1547f * beta;
 1046              		.loc 1 263 32 is_stmt 0 view .LVU260
 1047 0010 DFED2B7A 		vldr.32	s15, .L67
 1048 0014 60EEA77A 		vmul.f32	s15, s1, s15
 263:Src/foc.c     ****         *t2 = 1.1547f * beta;
 1049              		.loc 1 263 21 view .LVU261
 1050 0018 30EE670A 		vsub.f32	s0, s0, s15
 1051              	.LVL70:
 263:Src/foc.c     ****         *t2 = 1.1547f * beta;
ARM GAS  C:\Users\ncer\AppData\Local\Temp\cceGoFVP.s 			page 33


 1052              		.loc 1 263 13 view .LVU262
 1053 001c 81ED000A 		vstr.32	s0, [r1]
 264:Src/foc.c     ****         break;
 1054              		.loc 1 264 9 is_stmt 1 view .LVU263
 264:Src/foc.c     ****         break;
 1055              		.loc 1 264 23 is_stmt 0 view .LVU264
 1056 0020 DFED287A 		vldr.32	s15, .L67+4
 1057 0024 60EEA70A 		vmul.f32	s1, s1, s15
 1058              	.LVL71:
 264:Src/foc.c     ****         break;
 1059              		.loc 1 264 13 view .LVU265
 1060 0028 C2ED000A 		vstr.32	s1, [r2]
 265:Src/foc.c     ****     case 2:
 1061              		.loc 1 265 9 is_stmt 1 view .LVU266
 1062 002c 7047     		bx	lr
 1063              	.LVL72:
 1064              	.L65:
 267:Src/foc.c     ****         *t2 = 0.57735f * beta - alpha;
 1065              		.loc 1 267 9 view .LVU267
 267:Src/foc.c     ****         *t2 = 0.57735f * beta - alpha;
 1066              		.loc 1 267 32 is_stmt 0 view .LVU268
 1067 002e DFED247A 		vldr.32	s15, .L67
 1068 0032 60EEA70A 		vmul.f32	s1, s1, s15
 1069              	.LVL73:
 267:Src/foc.c     ****         *t2 = 0.57735f * beta - alpha;
 1070              		.loc 1 267 21 view .LVU269
 1071 0036 70EE807A 		vadd.f32	s15, s1, s0
 267:Src/foc.c     ****         *t2 = 0.57735f * beta - alpha;
 1072              		.loc 1 267 13 view .LVU270
 1073 003a C1ED007A 		vstr.32	s15, [r1]
 268:Src/foc.c     ****         break;
 1074              		.loc 1 268 9 is_stmt 1 view .LVU271
 268:Src/foc.c     ****         break;
 1075              		.loc 1 268 31 is_stmt 0 view .LVU272
 1076 003e 70EEC00A 		vsub.f32	s1, s1, s0
 268:Src/foc.c     ****         break;
 1077              		.loc 1 268 13 view .LVU273
 1078 0042 C2ED000A 		vstr.32	s1, [r2]
 269:Src/foc.c     ****     case 3:
 1079              		.loc 1 269 9 is_stmt 1 view .LVU274
 1080 0046 7047     		bx	lr
 1081              	.LVL74:
 1082              	.L64:
 271:Src/foc.c     ****         *t2 = -alpha - 0.57735f * beta;
 1083              		.loc 1 271 9 view .LVU275
 271:Src/foc.c     ****         *t2 = -alpha - 0.57735f * beta;
 1084              		.loc 1 271 23 is_stmt 0 view .LVU276
 1085 0048 DFED1E7A 		vldr.32	s15, .L67+4
 1086 004c 60EEA77A 		vmul.f32	s15, s1, s15
 271:Src/foc.c     ****         *t2 = -alpha - 0.57735f * beta;
 1087              		.loc 1 271 13 view .LVU277
 1088 0050 C1ED007A 		vstr.32	s15, [r1]
 272:Src/foc.c     ****         break;
 1089              		.loc 1 272 9 is_stmt 1 view .LVU278
 272:Src/foc.c     ****         break;
 1090              		.loc 1 272 15 is_stmt 0 view .LVU279
 1091 0054 B1EE400A 		vneg.f32	s0, s0
ARM GAS  C:\Users\ncer\AppData\Local\Temp\cceGoFVP.s 			page 34


 1092              	.LVL75:
 272:Src/foc.c     ****         break;
 1093              		.loc 1 272 33 view .LVU280
 1094 0058 DFED197A 		vldr.32	s15, .L67
 1095 005c 60EEA70A 		vmul.f32	s1, s1, s15
 1096              	.LVL76:
 272:Src/foc.c     ****         break;
 1097              		.loc 1 272 22 view .LVU281
 1098 0060 70EE600A 		vsub.f32	s1, s0, s1
 272:Src/foc.c     ****         break;
 1099              		.loc 1 272 13 view .LVU282
 1100 0064 C2ED000A 		vstr.32	s1, [r2]
 273:Src/foc.c     ****     case 4:
 1101              		.loc 1 273 9 is_stmt 1 view .LVU283
 1102 0068 7047     		bx	lr
 1103              	.LVL77:
 1104              	.L63:
 275:Src/foc.c     ****         *t2 = -1.1547f * beta;
 1105              		.loc 1 275 9 view .LVU284
 275:Src/foc.c     ****         *t2 = -1.1547f * beta;
 1106              		.loc 1 275 24 is_stmt 0 view .LVU285
 1107 006a DFED157A 		vldr.32	s15, .L67
 1108 006e 60EEA77A 		vmul.f32	s15, s1, s15
 275:Src/foc.c     ****         *t2 = -1.1547f * beta;
 1109              		.loc 1 275 31 view .LVU286
 1110 0072 37EEC00A 		vsub.f32	s0, s15, s0
 1111              	.LVL78:
 275:Src/foc.c     ****         *t2 = -1.1547f * beta;
 1112              		.loc 1 275 13 view .LVU287
 1113 0076 81ED000A 		vstr.32	s0, [r1]
 276:Src/foc.c     ****         break;
 1114              		.loc 1 276 9 is_stmt 1 view .LVU288
 276:Src/foc.c     ****         break;
 1115              		.loc 1 276 24 is_stmt 0 view .LVU289
 1116 007a DFED137A 		vldr.32	s15, .L67+8
 1117 007e 60EEA70A 		vmul.f32	s1, s1, s15
 1118              	.LVL79:
 276:Src/foc.c     ****         break;
 1119              		.loc 1 276 13 view .LVU290
 1120 0082 C2ED000A 		vstr.32	s1, [r2]
 277:Src/foc.c     ****     case 5:
 1121              		.loc 1 277 9 is_stmt 1 view .LVU291
 1122 0086 7047     		bx	lr
 1123              	.LVL80:
 1124              	.L62:
 279:Src/foc.c     ****         *t1 = temp - alpha;
 1125              		.loc 1 279 9 view .LVU292
 279:Src/foc.c     ****         *t1 = temp - alpha;
 1126              		.loc 1 279 14 is_stmt 0 view .LVU293
 1127 0088 DFED107A 		vldr.32	s15, .L67+12
 1128 008c 60EEA70A 		vmul.f32	s1, s1, s15
 1129              	.LVL81:
 280:Src/foc.c     ****         *t2 = temp + alpha;
 1130              		.loc 1 280 9 is_stmt 1 view .LVU294
 280:Src/foc.c     ****         *t2 = temp + alpha;
 1131              		.loc 1 280 20 is_stmt 0 view .LVU295
 1132 0090 70EEC07A 		vsub.f32	s15, s1, s0
ARM GAS  C:\Users\ncer\AppData\Local\Temp\cceGoFVP.s 			page 35


 280:Src/foc.c     ****         *t2 = temp + alpha;
 1133              		.loc 1 280 13 view .LVU296
 1134 0094 C1ED007A 		vstr.32	s15, [r1]
 281:Src/foc.c     ****         break;
 1135              		.loc 1 281 9 is_stmt 1 view .LVU297
 281:Src/foc.c     ****         break;
 1136              		.loc 1 281 20 is_stmt 0 view .LVU298
 1137 0098 70EE200A 		vadd.f32	s1, s0, s1
 1138              	.LVL82:
 281:Src/foc.c     ****         break;
 1139              		.loc 1 281 13 view .LVU299
 1140 009c C2ED000A 		vstr.32	s1, [r2]
 282:Src/foc.c     ****     case 6:
 1141              		.loc 1 282 9 is_stmt 1 view .LVU300
 1142 00a0 7047     		bx	lr
 1143              	.LVL83:
 1144              	.L60:
 284:Src/foc.c     ****         *t2 = alpha + 0.57735f * beta;
 1145              		.loc 1 284 9 view .LVU301
 284:Src/foc.c     ****         *t2 = alpha + 0.57735f * beta;
 1146              		.loc 1 284 24 is_stmt 0 view .LVU302
 1147 00a2 DFED097A 		vldr.32	s15, .L67+8
 1148 00a6 60EEA77A 		vmul.f32	s15, s1, s15
 284:Src/foc.c     ****         *t2 = alpha + 0.57735f * beta;
 1149              		.loc 1 284 13 view .LVU303
 1150 00aa C1ED007A 		vstr.32	s15, [r1]
 285:Src/foc.c     ****         break;
 1151              		.loc 1 285 9 is_stmt 1 view .LVU304
 285:Src/foc.c     ****         break;
 1152              		.loc 1 285 32 is_stmt 0 view .LVU305
 1153 00ae DFED047A 		vldr.32	s15, .L67
 1154 00b2 60EEA77A 		vmul.f32	s15, s1, s15
 285:Src/foc.c     ****         break;
 1155              		.loc 1 285 21 view .LVU306
 1156 00b6 77EE800A 		vadd.f32	s1, s15, s0
 1157              	.LVL84:
 285:Src/foc.c     ****         break;
 1158              		.loc 1 285 13 view .LVU307
 1159 00ba C2ED000A 		vstr.32	s1, [r2]
 286:Src/foc.c     ****     }
 1160              		.loc 1 286 9 is_stmt 1 view .LVU308
 1161              	.L58:
 288:Src/foc.c     **** 
 1162              		.loc 1 288 1 is_stmt 0 view .LVU309
 1163 00be 7047     		bx	lr
 1164              	.L68:
 1165              		.align	2
 1166              	.L67:
 1167 00c0 36CD133F 		.word	1058262326
 1168 00c4 36CD933F 		.word	1066650934
 1169 00c8 36CD93BF 		.word	-1080832714
 1170 00cc 36CD13BF 		.word	-1089221322
 1171              		.cfi_endproc
 1172              	.LFE175:
 1174              		.section	.text.SVPWM,"ax",%progbits
 1175              		.align	1
 1176              		.syntax unified
ARM GAS  C:\Users\ncer\AppData\Local\Temp\cceGoFVP.s 			page 36


 1177              		.thumb
 1178              		.thumb_func
 1179              		.fpu fpv4-sp-d16
 1181              	SVPWM:
 1182              	.LVL85:
 1183              	.LFB180:
 379:Src/foc.c     ****     Uvect_Mos u1, u2;
 1184              		.loc 1 379 1 is_stmt 1 view -0
 1185              		.cfi_startproc
 1186              		@ args = 0, pretend = 0, frame = 48
 1187              		@ frame_needed = 0, uses_anonymous_args = 0
 379:Src/foc.c     ****     Uvect_Mos u1, u2;
 1188              		.loc 1 379 1 is_stmt 0 view .LVU311
 1189 0000 70B5     		push	{r4, r5, r6, lr}
 1190              	.LCFI22:
 1191              		.cfi_def_cfa_offset 16
 1192              		.cfi_offset 4, -16
 1193              		.cfi_offset 5, -12
 1194              		.cfi_offset 6, -8
 1195              		.cfi_offset 14, -4
 1196 0002 2DED028B 		vpush.64	{d8}
 1197              	.LCFI23:
 1198              		.cfi_def_cfa_offset 24
 1199              		.cfi_offset 80, -24
 1200              		.cfi_offset 81, -20
 1201 0006 90B0     		sub	sp, sp, #64
 1202              	.LCFI24:
 1203              		.cfi_def_cfa_offset 88
 1204 0008 F0EE408A 		vmov.f32	s17, s0
 1205 000c B0EE608A 		vmov.f32	s16, s1
 380:Src/foc.c     ****     float x, y;
 1206              		.loc 1 380 5 is_stmt 1 view .LVU312
 381:Src/foc.c     ****     float t1, t2;
 1207              		.loc 1 381 5 view .LVU313
 382:Src/foc.c     ****     static CCR_Duty CCR_Dutys = {0};
 1208              		.loc 1 382 5 view .LVU314
 383:Src/foc.c     **** 
 1209              		.loc 1 383 5 view .LVU315
 385:Src/foc.c     ****     get_area_u(area, &u1, &u2);
 1210              		.loc 1 385 5 view .LVU316
 385:Src/foc.c     ****     get_area_u(area, &u1, &u2);
 1211              		.loc 1 385 20 is_stmt 0 view .LVU317
 1212 0010 FCEEC07A 		vcvt.u32.f32	s15, s0
 1213 0014 17EE900A 		vmov	r0, s15	@ int
 1214 0018 FFF7FEFF 		bl	get_area
 1215              	.LVL86:
 385:Src/foc.c     ****     get_area_u(area, &u1, &u2);
 1216              		.loc 1 385 20 view .LVU318
 1217 001c 0646     		mov	r6, r0
 1218              	.LVL87:
 386:Src/foc.c     ****     arm_sin_cos_f32(Target_U, &y, &x);
 1219              		.loc 1 386 5 is_stmt 1 view .LVU319
 1220 001e 08AD     		add	r5, sp, #32
 1221 0020 0CAC     		add	r4, sp, #48
 1222 0022 2A46     		mov	r2, r5
 1223 0024 2146     		mov	r1, r4
 1224 0026 FFF7FEFF 		bl	get_area_u
ARM GAS  C:\Users\ncer\AppData\Local\Temp\cceGoFVP.s 			page 37


 1225              	.LVL88:
 387:Src/foc.c     ****     x *= 0.86f * duty;
 1226              		.loc 1 387 5 view .LVU320
 1227 002a 07A9     		add	r1, sp, #28
 1228 002c 06A8     		add	r0, sp, #24
 1229 002e B0EE680A 		vmov.f32	s0, s17
 1230 0032 FFF7FEFF 		bl	arm_sin_cos_f32
 1231              	.LVL89:
 388:Src/foc.c     ****     y *= 0.86f * duty; // sqrt(3)/2 Ê≤°Èîô
 1232              		.loc 1 388 5 view .LVU321
 388:Src/foc.c     ****     y *= 0.86f * duty; // sqrt(3)/2 Ê≤°Èîô
 1233              		.loc 1 388 16 is_stmt 0 view .LVU322
 1234 0036 DFED170A 		vldr.32	s1, .L71
 1235 003a 68EE200A 		vmul.f32	s1, s16, s1
 388:Src/foc.c     ****     y *= 0.86f * duty; // sqrt(3)/2 Ê≤°Èîô
 1236              		.loc 1 388 7 view .LVU323
 1237 003e 9DED070A 		vldr.32	s0, [sp, #28]
 1238 0042 20EE800A 		vmul.f32	s0, s1, s0
 1239 0046 8DED070A 		vstr.32	s0, [sp, #28]
 389:Src/foc.c     ****     SVPWM_Normal_CalT1T2(x, y, area, &t1, &t2);
 1240              		.loc 1 389 5 is_stmt 1 view .LVU324
 389:Src/foc.c     ****     SVPWM_Normal_CalT1T2(x, y, area, &t1, &t2);
 1241              		.loc 1 389 7 is_stmt 0 view .LVU325
 1242 004a DDED067A 		vldr.32	s15, [sp, #24]
 1243 004e 60EEA70A 		vmul.f32	s1, s1, s15
 1244 0052 CDED060A 		vstr.32	s1, [sp, #24]
 390:Src/foc.c     ****     CCR_Dutys = get_ccr_duty(t1, t2, u1, u2);
 1245              		.loc 1 390 5 is_stmt 1 view .LVU326
 1246 0056 04AA     		add	r2, sp, #16
 1247 0058 05A9     		add	r1, sp, #20
 1248 005a 3046     		mov	r0, r6
 1249 005c FFF7FEFF 		bl	SVPWM_Normal_CalT1T2
 1250              	.LVL90:
 391:Src/foc.c     ****     SVPWM_Step(CCR_Dutys);
 1251              		.loc 1 391 5 view .LVU327
 391:Src/foc.c     ****     SVPWM_Step(CCR_Dutys);
 1252              		.loc 1 391 17 is_stmt 0 view .LVU328
 1253 0060 95E80F00 		ldm	r5, {r0, r1, r2, r3}
 1254 0064 8DE80F00 		stm	sp, {r0, r1, r2, r3}
 1255 0068 94E80F00 		ldm	r4, {r0, r1, r2, r3}
 1256 006c DDED040A 		vldr.32	s1, [sp, #16]
 1257 0070 9DED050A 		vldr.32	s0, [sp, #20]
 1258 0074 FFF7FEFF 		bl	get_ccr_duty
 1259              	.LVL91:
 1260 0078 074B     		ldr	r3, .L71+4
 1261 007a 83ED000A 		vstr.32	s0, [r3]
 1262 007e C3ED010A 		vstr.32	s1, [r3, #4]
 1263 0082 83ED021A 		vstr.32	s2, [r3, #8]
 392:Src/foc.c     **** }
 1264              		.loc 1 392 5 is_stmt 1 view .LVU329
 1265 0086 FFF7FEFF 		bl	SVPWM_Step
 1266              	.LVL92:
 393:Src/foc.c     **** 
 1267              		.loc 1 393 1 is_stmt 0 view .LVU330
 1268 008a 10B0     		add	sp, sp, #64
 1269              	.LCFI25:
 1270              		.cfi_def_cfa_offset 24
ARM GAS  C:\Users\ncer\AppData\Local\Temp\cceGoFVP.s 			page 38


 1271              		@ sp needed
 1272 008c BDEC028B 		vldm	sp!, {d8}
 1273              	.LCFI26:
 1274              		.cfi_restore 80
 1275              		.cfi_restore 81
 1276              		.cfi_def_cfa_offset 16
 1277              	.LVL93:
 393:Src/foc.c     **** 
 1278              		.loc 1 393 1 view .LVU331
 1279 0090 70BD     		pop	{r4, r5, r6, pc}
 1280              	.LVL94:
 1281              	.L72:
 393:Src/foc.c     **** 
 1282              		.loc 1 393 1 view .LVU332
 1283 0092 00BF     		.align	2
 1284              	.L71:
 1285 0094 F6285C3F 		.word	1063004406
 1286 0098 00000000 		.word	.LANCHOR9
 1287              		.cfi_endproc
 1288              	.LFE180:
 1290              		.section	.text.Park_Conv,"ax",%progbits
 1291              		.align	1
 1292              		.global	Park_Conv
 1293              		.syntax unified
 1294              		.thumb
 1295              		.thumb_func
 1296              		.fpu fpv4-sp-d16
 1298              	Park_Conv:
 1299              	.LVL95:
 1300              	.LFB177:
 329:Src/foc.c     ****     *ialpha = ia;
 1301              		.loc 1 329 1 is_stmt 1 view -0
 1302              		.cfi_startproc
 1303              		@ args = 0, pretend = 0, frame = 0
 1304              		@ frame_needed = 0, uses_anonymous_args = 0
 1305              		@ link register save eliminated.
 330:Src/foc.c     ****     *ibeta = (sqrtf(3) * ib + sqrtf(3) * (ib + ia)) / 3.0f;
 1306              		.loc 1 330 5 view .LVU334
 330:Src/foc.c     ****     *ibeta = (sqrtf(3) * ib + sqrtf(3) * (ib + ia)) / 3.0f;
 1307              		.loc 1 330 13 is_stmt 0 view .LVU335
 1308 0000 80ED000A 		vstr.32	s0, [r0]
 331:Src/foc.c     **** }
 1309              		.loc 1 331 5 is_stmt 1 view .LVU336
 331:Src/foc.c     **** }
 1310              		.loc 1 331 24 is_stmt 0 view .LVU337
 1311 0004 9FED087A 		vldr.32	s14, .L74
 1312 0008 60EE877A 		vmul.f32	s15, s1, s14
 331:Src/foc.c     **** }
 1313              		.loc 1 331 46 view .LVU338
 1314 000c 30EE200A 		vadd.f32	s0, s0, s1
 1315              	.LVL96:
 331:Src/foc.c     **** }
 1316              		.loc 1 331 40 view .LVU339
 1317 0010 20EE070A 		vmul.f32	s0, s0, s14
 331:Src/foc.c     **** }
 1318              		.loc 1 331 29 view .LVU340
 1319 0014 37EE800A 		vadd.f32	s0, s15, s0
ARM GAS  C:\Users\ncer\AppData\Local\Temp\cceGoFVP.s 			page 39


 331:Src/foc.c     **** }
 1320              		.loc 1 331 53 view .LVU341
 1321 0018 B0EE087A 		vmov.f32	s14, #3.0e+0
 1322 001c C0EE077A 		vdiv.f32	s15, s0, s14
 331:Src/foc.c     **** }
 1323              		.loc 1 331 12 view .LVU342
 1324 0020 C1ED007A 		vstr.32	s15, [r1]
 1325              	.LVL97:
 332:Src/foc.c     **** 
 1326              		.loc 1 332 1 view .LVU343
 1327 0024 7047     		bx	lr
 1328              	.L75:
 1329 0026 00BF     		.align	2
 1330              	.L74:
 1331 0028 D7B3DD3F 		.word	1071494103
 1332              		.cfi_endproc
 1333              	.LFE177:
 1335              		.section	.text.HAL_ADC_ConvCpltCallback,"ax",%progbits
 1336              		.align	1
 1337              		.global	HAL_ADC_ConvCpltCallback
 1338              		.syntax unified
 1339              		.thumb
 1340              		.thumb_func
 1341              		.fpu fpv4-sp-d16
 1343              	HAL_ADC_ConvCpltCallback:
 1344              	.LVL98:
 1345              	.LFB178:
 335:Src/foc.c     ****     float ia, ib;
 1346              		.loc 1 335 1 is_stmt 1 view -0
 1347              		.cfi_startproc
 1348              		@ args = 0, pretend = 0, frame = 0
 1349              		@ frame_needed = 0, uses_anonymous_args = 0
 335:Src/foc.c     ****     float ia, ib;
 1350              		.loc 1 335 1 is_stmt 0 view .LVU345
 1351 0000 38B5     		push	{r3, r4, r5, lr}
 1352              	.LCFI27:
 1353              		.cfi_def_cfa_offset 16
 1354              		.cfi_offset 3, -16
 1355              		.cfi_offset 4, -12
 1356              		.cfi_offset 5, -8
 1357              		.cfi_offset 14, -4
 1358 0002 2DED028B 		vpush.64	{d8}
 1359              	.LCFI28:
 1360              		.cfi_def_cfa_offset 24
 1361              		.cfi_offset 80, -24
 1362              		.cfi_offset 81, -20
 336:Src/foc.c     **** 
 1363              		.loc 1 336 5 is_stmt 1 view .LVU346
 338:Src/foc.c     ****     {
 1364              		.loc 1 338 5 view .LVU347
 338:Src/foc.c     ****     {
 1365              		.loc 1 338 13 is_stmt 0 view .LVU348
 1366 0006 0368     		ldr	r3, [r0]
 338:Src/foc.c     ****     {
 1367              		.loc 1 338 8 view .LVU349
 1368 0008 274A     		ldr	r2, .L80
 1369 000a 9342     		cmp	r3, r2
ARM GAS  C:\Users\ncer\AppData\Local\Temp\cceGoFVP.s 			page 40


 1370 000c 03D0     		beq	.L76
 341:Src/foc.c     ****     {
 1371              		.loc 1 341 10 is_stmt 1 view .LVU350
 341:Src/foc.c     ****     {
 1372              		.loc 1 341 13 is_stmt 0 view .LVU351
 1373 000e 02F58072 		add	r2, r2, #256
 1374 0012 9342     		cmp	r3, r2
 1375 0014 02D0     		beq	.L79
 1376              	.LVL99:
 1377              	.L76:
 350:Src/foc.c     **** 
 1378              		.loc 1 350 1 view .LVU352
 1379 0016 BDEC028B 		vldm	sp!, {d8}
 1380              	.LCFI29:
 1381              		.cfi_remember_state
 1382              		.cfi_restore 80
 1383              		.cfi_restore 81
 1384              		.cfi_def_cfa_offset 16
 1385 001a 38BD     		pop	{r3, r4, r5, pc}
 1386              	.LVL100:
 1387              	.L79:
 1388              	.LCFI30:
 1389              		.cfi_restore_state
 343:Src/foc.c     ****         ib = ADC_RAW2_CURRENT(ADC_Values_Raw2[1]);
 1390              		.loc 1 343 9 is_stmt 1 view .LVU353
 343:Src/foc.c     ****         ib = ADC_RAW2_CURRENT(ADC_Values_Raw2[1]);
 1391              		.loc 1 343 14 is_stmt 0 view .LVU354
 1392 001c 234B     		ldr	r3, .L80+4
 1393 001e 1A88     		ldrh	r2, [r3]
 1394 0020 07EE102A 		vmov	s14, r2	@ int
 1395 0024 B8EEC77A 		vcvt.f32.s32	s14, s14
 1396 0028 DFED215A 		vldr.32	s11, .L80+8
 1397 002c 27EE257A 		vmul.f32	s14, s14, s11
 1398 0030 9FED206A 		vldr.32	s12, .L80+12
 1399 0034 27EE067A 		vmul.f32	s14, s14, s12
 1400 0038 DFED1F6A 		vldr.32	s13, .L80+16
 1401 003c C7EE267A 		vdiv.f32	s15, s14, s13
 343:Src/foc.c     ****         ib = ADC_RAW2_CURRENT(ADC_Values_Raw2[1]);
 1402              		.loc 1 343 12 view .LVU355
 1403 0040 9FED1E7A 		vldr.32	s14, .L80+20
 1404 0044 87EE878A 		vdiv.f32	s16, s15, s14
 1405              	.LVL101:
 344:Src/foc.c     ****         Park_Conv(ia, ib, &Ialpha, &Ibeta);
 1406              		.loc 1 344 9 is_stmt 1 view .LVU356
 344:Src/foc.c     ****         Park_Conv(ia, ib, &Ialpha, &Ibeta);
 1407              		.loc 1 344 14 is_stmt 0 view .LVU357
 1408 0048 5B88     		ldrh	r3, [r3, #2]
 1409 004a 07EE903A 		vmov	s15, r3	@ int
 1410 004e F8EEE77A 		vcvt.f32.s32	s15, s15
 1411 0052 67EEA57A 		vmul.f32	s15, s15, s11
 1412 0056 67EE867A 		vmul.f32	s15, s15, s12
 1413 005a 87EEA66A 		vdiv.f32	s12, s15, s13
 344:Src/foc.c     ****         Park_Conv(ia, ib, &Ialpha, &Ibeta);
 1414              		.loc 1 344 12 view .LVU358
 1415 005e C6EE078A 		vdiv.f32	s17, s12, s14
 1416              	.LVL102:
 345:Src/foc.c     ****         Measure_R_20Khz_Handler(ia,ib);
ARM GAS  C:\Users\ncer\AppData\Local\Temp\cceGoFVP.s 			page 41


 1417              		.loc 1 345 9 is_stmt 1 view .LVU359
 1418 0062 174D     		ldr	r5, .L80+24
 1419 0064 174C     		ldr	r4, .L80+28
 1420 0066 2946     		mov	r1, r5
 1421 0068 2046     		mov	r0, r4
 1422              	.LVL103:
 345:Src/foc.c     ****         Measure_R_20Khz_Handler(ia,ib);
 1423              		.loc 1 345 9 is_stmt 0 view .LVU360
 1424 006a F0EE680A 		vmov.f32	s1, s17
 1425 006e B0EE480A 		vmov.f32	s0, s16
 1426 0072 FFF7FEFF 		bl	Park_Conv
 1427              	.LVL104:
 346:Src/foc.c     ****         Measure_L_20Khz_Handler(Measure_R_Info.current_avg,Ialpha); 
 1428              		.loc 1 346 9 is_stmt 1 view .LVU361
 1429 0076 F0EE680A 		vmov.f32	s1, s17
 1430 007a B0EE480A 		vmov.f32	s0, s16
 1431 007e FFF7FEFF 		bl	Measure_R_20Khz_Handler
 1432              	.LVL105:
 347:Src/foc.c     ****         send_wave(Ialpha,Ibeta,ia,ib);
 1433              		.loc 1 347 9 view .LVU362
 1434 0082 D4ED000A 		vldr.32	s1, [r4]
 1435 0086 104B     		ldr	r3, .L80+32
 1436 0088 93ED060A 		vldr.32	s0, [r3, #24]
 1437 008c FFF7FEFF 		bl	Measure_L_20Khz_Handler
 1438              	.LVL106:
 348:Src/foc.c     ****     }
 1439              		.loc 1 348 9 view .LVU363
 1440 0090 F0EE681A 		vmov.f32	s3, s17
 1441 0094 B0EE481A 		vmov.f32	s2, s16
 1442 0098 D5ED000A 		vldr.32	s1, [r5]
 1443 009c 94ED000A 		vldr.32	s0, [r4]
 1444 00a0 FFF7FEFF 		bl	send_wave
 1445              	.LVL107:
 350:Src/foc.c     **** 
 1446              		.loc 1 350 1 is_stmt 0 view .LVU364
 1447 00a4 B7E7     		b	.L76
 1448              	.L81:
 1449 00a6 00BF     		.align	2
 1450              	.L80:
 1451 00a8 00200140 		.word	1073815552
 1452 00ac 00000000 		.word	ADC_Values_Raw2
 1453 00b0 00404E45 		.word	1162756096
 1454 00b4 00008039 		.word	964689920
 1455 00b8 00004843 		.word	1128792064
 1456 00bc A69B443B 		.word	994352038
 1457 00c0 00000000 		.word	Ibeta
 1458 00c4 00000000 		.word	Ialpha
 1459 00c8 00000000 		.word	Measure_R_Info
 1460              		.cfi_endproc
 1461              	.LFE178:
 1463              		.section	.text.Foc,"ax",%progbits
 1464              		.align	1
 1465              		.global	Foc
 1466              		.syntax unified
 1467              		.thumb
 1468              		.thumb_func
 1469              		.fpu fpv4-sp-d16
ARM GAS  C:\Users\ncer\AppData\Local\Temp\cceGoFVP.s 			page 42


 1471              	Foc:
 1472              	.LFB179:
 353:Src/foc.c     ****     Uvect_Mos u1, u2;
 1473              		.loc 1 353 1 is_stmt 1 view -0
 1474              		.cfi_startproc
 1475              		@ args = 0, pretend = 0, frame = 0
 1476              		@ frame_needed = 0, uses_anonymous_args = 0
 1477 0000 08B5     		push	{r3, lr}
 1478              	.LCFI31:
 1479              		.cfi_def_cfa_offset 8
 1480              		.cfi_offset 3, -8
 1481              		.cfi_offset 14, -4
 354:Src/foc.c     ****     float t1, t2;
 1482              		.loc 1 354 5 view .LVU366
 355:Src/foc.c     ****     float x, y;
 1483              		.loc 1 355 5 view .LVU367
 356:Src/foc.c     **** 
 1484              		.loc 1 356 5 view .LVU368
 358:Src/foc.c     ****     float electric_position_offset = (-1 * Position_Offset + 360);
 1485              		.loc 1 358 5 view .LVU369
 358:Src/foc.c     ****     float electric_position_offset = (-1 * Position_Offset + 360);
 1486              		.loc 1 358 53 is_stmt 0 view .LVU370
 1487 0002 184B     		ldr	r3, .L86
 1488 0004 D3ED007A 		vldr.32	s15, [r3]
 358:Src/foc.c     ****     float electric_position_offset = (-1 * Position_Offset + 360);
 1489              		.loc 1 358 11 view .LVU371
 1490 0008 9FED177A 		vldr.32	s14, .L86+4
 1491 000c 77EE677A 		vsub.f32	s15, s14, s15
 1492              	.LVL108:
 359:Src/foc.c     ****     //float electric_position=Position_Degree;
 1493              		.loc 1 359 5 is_stmt 1 view .LVU372
 359:Src/foc.c     ****     //float electric_position=Position_Degree;
 1494              		.loc 1 359 60 is_stmt 0 view .LVU373
 1495 0010 164B     		ldr	r3, .L86+8
 1496 0012 D3ED006A 		vldr.32	s13, [r3]
 359:Src/foc.c     ****     //float electric_position=Position_Degree;
 1497              		.loc 1 359 11 view .LVU374
 1498 0016 37EE667A 		vsub.f32	s14, s14, s13
 1499              	.LVL109:
 362:Src/foc.c     **** 
 1500              		.loc 1 362 5 is_stmt 1 view .LVU375
 362:Src/foc.c     **** 
 1501              		.loc 1 362 47 is_stmt 0 view .LVU376
 1502 001a 77EEC77A 		vsub.f32	s15, s15, s14
 1503              	.LVL110:
 362:Src/foc.c     **** 
 1504              		.loc 1 362 13 view .LVU377
 1505 001e FDEEE77A 		vcvt.s32.f32	s15, s15
 1506 0022 17EE903A 		vmov	r3, s15	@ int
 1507              	.LVL111:
 364:Src/foc.c     ****     {
 1508              		.loc 1 364 5 is_stmt 1 view .LVU378
 364:Src/foc.c     ****     {
 1509              		.loc 1 364 8 is_stmt 0 view .LVU379
 1510 0026 002B     		cmp	r3, #0
 1511 0028 18DB     		blt	.L85
 1512              	.L83:
ARM GAS  C:\Users\ncer\AppData\Local\Temp\cceGoFVP.s 			page 43


 368:Src/foc.c     ****     sub += 90;
 1513              		.loc 1 368 5 is_stmt 1 view .LVU380
 368:Src/foc.c     ****     sub += 90;
 1514              		.loc 1 368 17 is_stmt 0 view .LVU381
 1515 002a 114A     		ldr	r2, .L86+12
 1516 002c 1278     		ldrb	r2, [r2]	@ zero_extendqisi2
 368:Src/foc.c     ****     sub += 90;
 1517              		.loc 1 368 9 view .LVU382
 1518 002e 03FB02F3 		mul	r3, r3, r2
 1519              	.LVL112:
 369:Src/foc.c     **** 
 1520              		.loc 1 369 5 is_stmt 1 view .LVU383
 369:Src/foc.c     **** 
 1521              		.loc 1 369 9 is_stmt 0 view .LVU384
 1522 0032 5A33     		adds	r3, r3, #90
 1523              	.LVL113:
 371:Src/foc.c     **** 
 1524              		.loc 1 371 5 is_stmt 1 view .LVU385
 371:Src/foc.c     **** 
 1525              		.loc 1 371 9 is_stmt 0 view .LVU386
 1526 0034 0F4A     		ldr	r2, .L86+16
 1527 0036 82FB0312 		smull	r1, r2, r2, r3
 1528 003a D118     		adds	r1, r2, r3
 1529 003c DA17     		asrs	r2, r3, #31
 1530 003e C2EB2122 		rsb	r2, r2, r1, asr #8
 1531 0042 4FF4B471 		mov	r1, #360
 1532 0046 01FB1232 		mls	r2, r1, r2, r3
 1533              	.LVL114:
 373:Src/foc.c     **** }
 1534              		.loc 1 373 5 is_stmt 1 view .LVU387
 1535 004a F6EE000A 		vmov.f32	s1, #5.0e-1
 1536 004e 07EE902A 		vmov	s15, r2	@ int
 1537 0052 B8EEE70A 		vcvt.f32.s32	s0, s15
 1538 0056 FFF7FEFF 		bl	SVPWM
 1539              	.LVL115:
 374:Src/foc.c     **** 
 1540              		.loc 1 374 1 is_stmt 0 view .LVU388
 1541 005a 08BD     		pop	{r3, pc}
 1542              	.LVL116:
 1543              	.L85:
 366:Src/foc.c     ****     }
 1544              		.loc 1 366 9 is_stmt 1 view .LVU389
 366:Src/foc.c     ****     }
 1545              		.loc 1 366 13 is_stmt 0 view .LVU390
 1546 005c 03F5B473 		add	r3, r3, #360
 1547              	.LVL117:
 366:Src/foc.c     ****     }
 1548              		.loc 1 366 13 view .LVU391
 1549 0060 E3E7     		b	.L83
 1550              	.L87:
 1551 0062 00BF     		.align	2
 1552              	.L86:
 1553 0064 00000000 		.word	Position_Degree
 1554 0068 0000B443 		.word	1135869952
 1555 006c 00000000 		.word	.LANCHOR10
 1556 0070 00000000 		.word	.LANCHOR11
 1557 0074 B7600BB6 		.word	-1240768329
ARM GAS  C:\Users\ncer\AppData\Local\Temp\cceGoFVP.s 			page 44


 1558              		.cfi_endproc
 1559              	.LFE179:
 1561              		.section	.text.VF_Openloop_Control,"ax",%progbits
 1562              		.align	1
 1563              		.global	VF_Openloop_Control
 1564              		.syntax unified
 1565              		.thumb
 1566              		.thumb_func
 1567              		.fpu fpv4-sp-d16
 1569              	VF_Openloop_Control:
 1570              	.LVL118:
 1571              	.LFB181:
 396:Src/foc.c     ****     static float theta = 0;
 1572              		.loc 1 396 1 is_stmt 1 view -0
 1573              		.cfi_startproc
 1574              		@ args = 0, pretend = 0, frame = 0
 1575              		@ frame_needed = 0, uses_anonymous_args = 0
 396:Src/foc.c     ****     static float theta = 0;
 1576              		.loc 1 396 1 is_stmt 0 view .LVU393
 1577 0000 08B5     		push	{r3, lr}
 1578              	.LCFI32:
 1579              		.cfi_def_cfa_offset 8
 1580              		.cfi_offset 3, -8
 1581              		.cfi_offset 14, -4
 1582 0002 07EE100A 		vmov	s14, r0	@ int
 397:Src/foc.c     ****     float delta_p = rps * Motor.pairs * 360.0f / freq; // ÊØèÊ¨°Ë∞ÉÁî®Êú¨ÂáΩÊï∞Ë¶ÅÂ¢ûÂä†ÁöÑÂÄº
 1583              		.loc 1 397 5 is_stmt 1 view .LVU394
 398:Src/foc.c     **** 
 1584              		.loc 1 398 5 view .LVU395
 398:Src/foc.c     **** 
 1585              		.loc 1 398 32 is_stmt 0 view .LVU396
 1586 0006 1B4B     		ldr	r3, .L97
 1587 0008 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1588 000a 07EE903A 		vmov	s15, r3	@ int
 398:Src/foc.c     **** 
 1589              		.loc 1 398 25 view .LVU397
 1590 000e F8EEE77A 		vcvt.f32.s32	s15, s15
 1591 0012 27EE811A 		vmul.f32	s2, s15, s2
 1592              	.LVL119:
 398:Src/foc.c     **** 
 1593              		.loc 1 398 39 view .LVU398
 1594 0016 DFED186A 		vldr.32	s13, .L97+4
 1595 001a 21EE261A 		vmul.f32	s2, s2, s13
 398:Src/foc.c     **** 
 1596              		.loc 1 398 11 view .LVU399
 1597 001e 81EE206A 		vdiv.f32	s12, s2, s1
 1598              	.LVL120:
 400:Src/foc.c     ****     if (theta > 360)
 1599              		.loc 1 400 5 is_stmt 1 view .LVU400
 400:Src/foc.c     ****     if (theta > 360)
 1600              		.loc 1 400 24 is_stmt 0 view .LVU401
 1601 0022 F8EEC77A 		vcvt.f32.s32	s15, s14
 1602 0026 67EE867A 		vmul.f32	s15, s15, s12
 400:Src/foc.c     ****     if (theta > 360)
 1603              		.loc 1 400 11 view .LVU402
 1604 002a 144B     		ldr	r3, .L97+8
 1605 002c 93ED007A 		vldr.32	s14, [r3]
ARM GAS  C:\Users\ncer\AppData\Local\Temp\cceGoFVP.s 			page 45


 1606 0030 77EE877A 		vadd.f32	s15, s15, s14
 1607 0034 C3ED007A 		vstr.32	s15, [r3]
 401:Src/foc.c     ****     {
 1608              		.loc 1 401 5 is_stmt 1 view .LVU403
 401:Src/foc.c     ****     {
 1609              		.loc 1 401 8 is_stmt 0 view .LVU404
 1610 0038 F4EEE67A 		vcmpe.f32	s15, s13
 1611 003c F1EE10FA 		vmrs	APSR_nzcv, FPSCR
 1612 0040 0BDD     		ble	.L95
 403:Src/foc.c     ****     }
 1613              		.loc 1 403 9 is_stmt 1 view .LVU405
 403:Src/foc.c     ****     }
 1614              		.loc 1 403 15 is_stmt 0 view .LVU406
 1615 0042 77EEE67A 		vsub.f32	s15, s15, s13
 1616 0046 C3ED007A 		vstr.32	s15, [r3]
 1617              	.L91:
 409:Src/foc.c     **** }
 1618              		.loc 1 409 5 is_stmt 1 view .LVU407
 1619 004a F0EE400A 		vmov.f32	s1, s0
 1620              	.LVL121:
 409:Src/foc.c     **** }
 1621              		.loc 1 409 5 is_stmt 0 view .LVU408
 1622 004e 0B4B     		ldr	r3, .L97+8
 1623 0050 93ED000A 		vldr.32	s0, [r3]
 1624              	.LVL122:
 409:Src/foc.c     **** }
 1625              		.loc 1 409 5 view .LVU409
 1626 0054 FFF7FEFF 		bl	SVPWM
 1627              	.LVL123:
 410:Src/foc.c     **** 
 1628              		.loc 1 410 1 view .LVU410
 1629 0058 08BD     		pop	{r3, pc}
 1630              	.LVL124:
 1631              	.L95:
 405:Src/foc.c     ****     {
 1632              		.loc 1 405 10 is_stmt 1 view .LVU411
 405:Src/foc.c     ****     {
 1633              		.loc 1 405 13 is_stmt 0 view .LVU412
 1634 005a F5EEC07A 		vcmpe.f32	s15, #0
 1635 005e F1EE10FA 		vmrs	APSR_nzcv, FPSCR
 1636 0062 F2D5     		bpl	.L91
 407:Src/foc.c     ****     }
 1637              		.loc 1 407 9 is_stmt 1 view .LVU413
 407:Src/foc.c     ****     }
 1638              		.loc 1 407 15 is_stmt 0 view .LVU414
 1639 0064 9FED047A 		vldr.32	s14, .L97+4
 1640 0068 77EE877A 		vadd.f32	s15, s15, s14
 1641 006c 034B     		ldr	r3, .L97+8
 1642 006e C3ED007A 		vstr.32	s15, [r3]
 1643 0072 EAE7     		b	.L91
 1644              	.L98:
 1645              		.align	2
 1646              	.L97:
 1647 0074 00000000 		.word	.LANCHOR11
 1648 0078 0000B443 		.word	1135869952
 1649 007c 00000000 		.word	.LANCHOR12
 1650              		.cfi_endproc
ARM GAS  C:\Users\ncer\AppData\Local\Temp\cceGoFVP.s 			page 46


 1651              	.LFE181:
 1653              		.section	.rodata.Test_Direction.str1.4,"aMS",%progbits,1
 1654              		.align	2
 1655              	.LC2:
 1656 0000 64697265 		.ascii	"direction result:%d\015\012\000"
 1656      6374696F 
 1656      6E207265 
 1656      73756C74 
 1656      3A25640D 
 1657 0016 0000     		.align	2
 1658              	.LC3:
 1659 0018 74686520 		.ascii	"the direction of the motor is postive!\015\012\000"
 1659      64697265 
 1659      6374696F 
 1659      6E206F66 
 1659      20746865 
 1660 0041 000000   		.align	2
 1661              	.LC4:
 1662 0044 74686520 		.ascii	"the direction of the motor is nagative!\015\012\000"
 1662      64697265 
 1662      6374696F 
 1662      6E206F66 
 1662      20746865 
 1663              		.section	.text.Test_Direction,"ax",%progbits
 1664              		.align	1
 1665              		.syntax unified
 1666              		.thumb
 1667              		.thumb_func
 1668              		.fpu fpv4-sp-d16
 1670              	Test_Direction:
 1671              	.LFB182:
 413:Src/foc.c     ****     Test_Direction_Info.time += 1;
 1672              		.loc 1 413 1 is_stmt 1 view -0
 1673              		.cfi_startproc
 1674              		@ args = 0, pretend = 0, frame = 0
 1675              		@ frame_needed = 0, uses_anonymous_args = 0
 1676 0000 10B5     		push	{r4, lr}
 1677              	.LCFI33:
 1678              		.cfi_def_cfa_offset 8
 1679              		.cfi_offset 4, -8
 1680              		.cfi_offset 14, -4
 414:Src/foc.c     **** 
 1681              		.loc 1 414 5 view .LVU416
 414:Src/foc.c     **** 
 1682              		.loc 1 414 30 is_stmt 0 view .LVU417
 1683 0002 224B     		ldr	r3, .L110
 1684 0004 1A68     		ldr	r2, [r3]
 1685 0006 0132     		adds	r2, r2, #1
 1686 0008 1A60     		str	r2, [r3]
 416:Src/foc.c     ****     {
 1687              		.loc 1 416 5 is_stmt 1 view .LVU418
 416:Src/foc.c     ****     {
 1688              		.loc 1 416 46 is_stmt 0 view .LVU419
 1689 000a 93ED017A 		vldr.32	s14, [r3, #4]
 416:Src/foc.c     ****     {
 1690              		.loc 1 416 25 view .LVU420
 1691 000e 204B     		ldr	r3, .L110+4
ARM GAS  C:\Users\ncer\AppData\Local\Temp\cceGoFVP.s 			page 47


 1692 0010 D3ED007A 		vldr.32	s15, [r3]
 416:Src/foc.c     ****     {
 1693              		.loc 1 416 8 view .LVU421
 1694 0014 B4EEE77A 		vcmpe.f32	s14, s15
 1695 0018 F1EE10FA 		vmrs	APSR_nzcv, FPSCR
 1696 001c 15D5     		bpl	.L107
 418:Src/foc.c     ****     }
 1697              		.loc 1 418 9 is_stmt 1 view .LVU422
 418:Src/foc.c     ****     }
 1698              		.loc 1 418 46 is_stmt 0 view .LVU423
 1699 001e 1B4A     		ldr	r2, .L110
 1700 0020 9368     		ldr	r3, [r2, #8]
 1701 0022 0133     		adds	r3, r3, #1
 1702 0024 9360     		str	r3, [r2, #8]
 1703              	.L102:
 424:Src/foc.c     **** 
 1704              		.loc 1 424 5 is_stmt 1 view .LVU424
 424:Src/foc.c     **** 
 1705              		.loc 1 424 39 is_stmt 0 view .LVU425
 1706 0026 194C     		ldr	r4, .L110
 1707 0028 C4ED017A 		vstr.32	s15, [r4, #4]
 426:Src/foc.c     **** 
 1708              		.loc 1 426 5 is_stmt 1 view .LVU426
 1709 002c B7EE001A 		vmov.f32	s2, #1.0e+0
 1710 0030 0120     		movs	r0, #1
 1711 0032 DFED180A 		vldr.32	s1, .L110+8
 1712 0036 B0EE410A 		vmov.f32	s0, s2
 1713 003a FFF7FEFF 		bl	VF_Openloop_Control
 1714              	.LVL125:
 428:Src/foc.c     ****     { // run 10s
 1715              		.loc 1 428 5 view .LVU427
 428:Src/foc.c     ****     { // run 10s
 1716              		.loc 1 428 28 is_stmt 0 view .LVU428
 1717 003e 2268     		ldr	r2, [r4]
 428:Src/foc.c     ****     { // run 10s
 1718              		.loc 1 428 8 view .LVU429
 1719 0040 42F21073 		movw	r3, #10000
 1720 0044 9A42     		cmp	r2, r3
 1721 0046 05D8     		bhi	.L109
 1722              	.L99:
 445:Src/foc.c     **** 
 1723              		.loc 1 445 1 view .LVU430
 1724 0048 10BD     		pop	{r4, pc}
 1725              	.L107:
 422:Src/foc.c     ****     }
 1726              		.loc 1 422 9 is_stmt 1 view .LVU431
 422:Src/foc.c     ****     }
 1727              		.loc 1 422 46 is_stmt 0 view .LVU432
 1728 004a 104A     		ldr	r2, .L110
 1729 004c 9368     		ldr	r3, [r2, #8]
 1730 004e 013B     		subs	r3, r3, #1
 1731 0050 9360     		str	r3, [r2, #8]
 1732 0052 E8E7     		b	.L102
 1733              	.L109:
 430:Src/foc.c     ****         Test_Direction_Info.time = 0;
 1734              		.loc 1 430 9 is_stmt 1 view .LVU433
 430:Src/foc.c     ****         Test_Direction_Info.time = 0;
ARM GAS  C:\Users\ncer\AppData\Local\Temp\cceGoFVP.s 			page 48


 1735              		.loc 1 430 20 is_stmt 0 view .LVU434
 1736 0054 0023     		movs	r3, #0
 1737 0056 104A     		ldr	r2, .L110+12
 1738 0058 1370     		strb	r3, [r2]
 431:Src/foc.c     ****         uprintf_polling("direction result:%d\r\n", Test_Direction_Info.direction_result);
 1739              		.loc 1 431 9 is_stmt 1 view .LVU435
 431:Src/foc.c     ****         uprintf_polling("direction result:%d\r\n", Test_Direction_Info.direction_result);
 1740              		.loc 1 431 34 is_stmt 0 view .LVU436
 1741 005a 2360     		str	r3, [r4]
 432:Src/foc.c     ****         if (Test_Direction_Info.direction_result > 0)
 1742              		.loc 1 432 9 is_stmt 1 view .LVU437
 1743 005c A168     		ldr	r1, [r4, #8]
 1744 005e 0F48     		ldr	r0, .L110+16
 1745 0060 FFF7FEFF 		bl	uprintf_polling
 1746              	.LVL126:
 433:Src/foc.c     ****         {
 1747              		.loc 1 433 9 view .LVU438
 433:Src/foc.c     ****         {
 1748              		.loc 1 433 32 is_stmt 0 view .LVU439
 1749 0064 A368     		ldr	r3, [r4, #8]
 433:Src/foc.c     ****         {
 1750              		.loc 1 433 12 view .LVU440
 1751 0066 002B     		cmp	r3, #0
 1752 0068 09DD     		ble	.L104
 435:Src/foc.c     ****             Motor.direction = 1;
 1753              		.loc 1 435 13 is_stmt 1 view .LVU441
 1754 006a 0D48     		ldr	r0, .L110+20
 1755 006c FFF7FEFF 		bl	uprintf_polling
 1756              	.LVL127:
 436:Src/foc.c     ****         }
 1757              		.loc 1 436 13 view .LVU442
 436:Src/foc.c     ****         }
 1758              		.loc 1 436 29 is_stmt 0 view .LVU443
 1759 0070 0C4B     		ldr	r3, .L110+24
 1760 0072 0122     		movs	r2, #1
 1761 0074 1A73     		strb	r2, [r3, #12]
 1762              	.L105:
 443:Src/foc.c     ****     }
 1763              		.loc 1 443 9 is_stmt 1 view .LVU444
 443:Src/foc.c     ****     }
 1764              		.loc 1 443 46 is_stmt 0 view .LVU445
 1765 0076 054B     		ldr	r3, .L110
 1766 0078 0022     		movs	r2, #0
 1767 007a 9A60     		str	r2, [r3, #8]
 445:Src/foc.c     **** 
 1768              		.loc 1 445 1 view .LVU446
 1769 007c E4E7     		b	.L99
 1770              	.L104:
 440:Src/foc.c     ****             Motor.direction = -1;
 1771              		.loc 1 440 13 is_stmt 1 view .LVU447
 1772 007e 0A48     		ldr	r0, .L110+28
 1773 0080 FFF7FEFF 		bl	uprintf_polling
 1774              	.LVL128:
 441:Src/foc.c     ****         }
 1775              		.loc 1 441 13 view .LVU448
 441:Src/foc.c     ****         }
 1776              		.loc 1 441 29 is_stmt 0 view .LVU449
ARM GAS  C:\Users\ncer\AppData\Local\Temp\cceGoFVP.s 			page 49


 1777 0084 074B     		ldr	r3, .L110+24
 1778 0086 FF22     		movs	r2, #255
 1779 0088 1A73     		strb	r2, [r3, #12]
 1780 008a F4E7     		b	.L105
 1781              	.L111:
 1782              		.align	2
 1783              	.L110:
 1784 008c 00000000 		.word	Test_Direction_Info
 1785 0090 00000000 		.word	Position_Degree
 1786 0094 00007A44 		.word	1148846080
 1787 0098 00000000 		.word	Board_Mode
 1788 009c 00000000 		.word	.LC2
 1789 00a0 18000000 		.word	.LC3
 1790 00a4 00000000 		.word	.LANCHOR11
 1791 00a8 44000000 		.word	.LC4
 1792              		.cfi_endproc
 1793              	.LFE182:
 1795              		.section	.text.Set_Vector,"ax",%progbits
 1796              		.align	1
 1797              		.global	Set_Vector
 1798              		.syntax unified
 1799              		.thumb
 1800              		.thumb_func
 1801              		.fpu fpv4-sp-d16
 1803              	Set_Vector:
 1804              	.LVL129:
 1805              	.LFB183:
 450:Src/foc.c     ****     CCR_Duty temp_duty = {0};
 1806              		.loc 1 450 1 is_stmt 1 view -0
 1807              		.cfi_startproc
 1808              		@ args = 0, pretend = 0, frame = 32
 1809              		@ frame_needed = 0, uses_anonymous_args = 0
 450:Src/foc.c     ****     CCR_Duty temp_duty = {0};
 1810              		.loc 1 450 1 is_stmt 0 view .LVU451
 1811 0000 10B5     		push	{r4, lr}
 1812              	.LCFI34:
 1813              		.cfi_def_cfa_offset 8
 1814              		.cfi_offset 4, -8
 1815              		.cfi_offset 14, -4
 1816 0002 88B0     		sub	sp, sp, #32
 1817              	.LCFI35:
 1818              		.cfi_def_cfa_offset 40
 1819 0004 6C46     		mov	r4, sp
 1820 0006 84E80F00 		stm	r4, {r0, r1, r2, r3}
 1821 000a F0EE407A 		vmov.f32	s15, s0
 451:Src/foc.c     ****     if(duty>0.95f){
 1822              		.loc 1 451 5 is_stmt 1 view .LVU452
 452:Src/foc.c     ****         duty=0.95f;
 1823              		.loc 1 452 5 view .LVU453
 452:Src/foc.c     ****         duty=0.95f;
 1824              		.loc 1 452 7 is_stmt 0 view .LVU454
 1825 000e 9FED127A 		vldr.32	s14, .L116
 1826 0012 B4EEC70A 		vcmpe.f32	s0, s14
 1827 0016 F1EE10FA 		vmrs	APSR_nzcv, FPSCR
 1828 001a 01DD     		ble	.L113
 453:Src/foc.c     ****     }
 1829              		.loc 1 453 13 view .LVU455
ARM GAS  C:\Users\ncer\AppData\Local\Temp\cceGoFVP.s 			page 50


 1830 001c F0EE477A 		vmov.f32	s15, s14
 1831              	.L113:
 1832              	.LVL130:
 456:Src/foc.c     ****     temp_duty.ccrb = u.b * duty;
 1833              		.loc 1 456 5 is_stmt 1 view .LVU456
 456:Src/foc.c     ****     temp_duty.ccrb = u.b * duty;
 1834              		.loc 1 456 23 is_stmt 0 view .LVU457
 1835 0020 9DF80030 		ldrb	r3, [sp]	@ zero_extendqisi2
 1836 0024 00EE103A 		vmov	s0, r3	@ int
 456:Src/foc.c     ****     temp_duty.ccrb = u.b * duty;
 1837              		.loc 1 456 26 view .LVU458
 1838 0028 B8EEC00A 		vcvt.f32.s32	s0, s0
 457:Src/foc.c     ****     temp_duty.ccrc = u.c * duty;
 1839              		.loc 1 457 5 is_stmt 1 view .LVU459
 457:Src/foc.c     ****     temp_duty.ccrc = u.c * duty;
 1840              		.loc 1 457 23 is_stmt 0 view .LVU460
 1841 002c 9DF80130 		ldrb	r3, [sp, #1]	@ zero_extendqisi2
 1842 0030 00EE903A 		vmov	s1, r3	@ int
 457:Src/foc.c     ****     temp_duty.ccrc = u.c * duty;
 1843              		.loc 1 457 26 view .LVU461
 1844 0034 F8EEE00A 		vcvt.f32.s32	s1, s1
 458:Src/foc.c     **** 
 1845              		.loc 1 458 5 is_stmt 1 view .LVU462
 458:Src/foc.c     **** 
 1846              		.loc 1 458 23 is_stmt 0 view .LVU463
 1847 0038 9DF80230 		ldrb	r3, [sp, #2]	@ zero_extendqisi2
 1848 003c 01EE103A 		vmov	s2, r3	@ int
 458:Src/foc.c     **** 
 1849              		.loc 1 458 26 view .LVU464
 1850 0040 B8EEC11A 		vcvt.f32.s32	s2, s2
 460:Src/foc.c     **** }
 1851              		.loc 1 460 5 is_stmt 1 view .LVU465
 1852 0044 20EE270A 		vmul.f32	s0, s0, s15
 1853 0048 60EEA70A 		vmul.f32	s1, s1, s15
 1854 004c 21EE271A 		vmul.f32	s2, s2, s15
 1855 0050 FFF7FEFF 		bl	SVPWM_Step
 1856              	.LVL131:
 461:Src/foc.c     **** 
 1857              		.loc 1 461 1 is_stmt 0 view .LVU466
 1858 0054 08B0     		add	sp, sp, #32
 1859              	.LCFI36:
 1860              		.cfi_def_cfa_offset 8
 1861              		@ sp needed
 1862 0056 10BD     		pop	{r4, pc}
 1863              	.L117:
 1864              		.align	2
 1865              	.L116:
 1866 0058 3333733F 		.word	1064514355
 1867              		.cfi_endproc
 1868              	.LFE183:
 1870              		.section	.rodata.Measure_R_MS_Handler.str1.4,"aMS",%progbits,1
 1871              		.align	2
 1872              	.LC5:
 1873 0000 64757479 		.ascii	"duty:%f current1:%f  current2:%f\015\012\000"
 1873      3A256620 
 1873      63757272 
 1873      656E7431 
ARM GAS  C:\Users\ncer\AppData\Local\Temp\cceGoFVP.s 			page 51


 1873      3A256620 
 1874 0023 00       		.align	2
 1875              	.LC6:
 1876 0024 6572726F 		.ascii	"error! no enough time! %d \015\012\000"
 1876      7221206E 
 1876      6F20656E 
 1876      6F756768 
 1876      2074696D 
 1877 0041 000000   		.align	2
 1878              	.LC7:
 1879 0044 63757272 		.ascii	"current_avg:%f cnt:%d \015\012\000"
 1879      656E745F 
 1879      6176673A 
 1879      25662063 
 1879      6E743A25 
 1880              		.section	.text.Measure_R_MS_Handler,"ax",%progbits
 1881              		.align	1
 1882              		.syntax unified
 1883              		.thumb
 1884              		.thumb_func
 1885              		.fpu fpv4-sp-d16
 1887              	Measure_R_MS_Handler:
 1888              	.LVL132:
 1889              	.LFB184:
 464:Src/foc.c     ****     CCR_Duty temp_duty = {0};
 1890              		.loc 1 464 1 is_stmt 1 view -0
 1891              		.cfi_startproc
 1892              		@ args = 0, pretend = 0, frame = 0
 1893              		@ frame_needed = 0, uses_anonymous_args = 0
 464:Src/foc.c     ****     CCR_Duty temp_duty = {0};
 1894              		.loc 1 464 1 is_stmt 0 view .LVU468
 1895 0000 30B5     		push	{r4, r5, lr}
 1896              	.LCFI37:
 1897              		.cfi_def_cfa_offset 12
 1898              		.cfi_offset 4, -12
 1899              		.cfi_offset 5, -8
 1900              		.cfi_offset 14, -4
 1901 0002 2DED028B 		vpush.64	{d8}
 1902              	.LCFI38:
 1903              		.cfi_def_cfa_offset 20
 1904              		.cfi_offset 80, -20
 1905              		.cfi_offset 81, -16
 1906 0006 85B0     		sub	sp, sp, #20
 1907              	.LCFI39:
 1908              		.cfi_def_cfa_offset 40
 1909 0008 10EE100A 		vmov	r0, s0
 465:Src/foc.c     ****     static float current1 = 0;
 1910              		.loc 1 465 5 is_stmt 1 view .LVU469
 466:Src/foc.c     ****     static float current2 = 0;
 1911              		.loc 1 466 5 view .LVU470
 467:Src/foc.c     ****     if (Measure_R_Info.time == 0)
 1912              		.loc 1 467 5 view .LVU471
 468:Src/foc.c     ****     {
 1913              		.loc 1 468 5 view .LVU472
 468:Src/foc.c     ****     {
 1914              		.loc 1 468 23 is_stmt 0 view .LVU473
 1915 000c 484B     		ldr	r3, .L127
ARM GAS  C:\Users\ncer\AppData\Local\Temp\cceGoFVP.s 			page 52


 1916 000e 1B68     		ldr	r3, [r3]
 468:Src/foc.c     ****     {
 1917              		.loc 1 468 8 view .LVU474
 1918 0010 002B     		cmp	r3, #0
 1919 0012 39D0     		beq	.L125
 487:Src/foc.c     **** 
 1920              		.loc 1 487 5 is_stmt 1 view .LVU475
 487:Src/foc.c     **** 
 1921              		.loc 1 487 25 is_stmt 0 view .LVU476
 1922 0014 0133     		adds	r3, r3, #1
 1923 0016 464A     		ldr	r2, .L127
 1924 0018 1360     		str	r3, [r2]
 490:Src/foc.c     ****     current2 += ADC_RAW2_CURRENT(ADC_Values_Raw2[1]);
 1925              		.loc 1 490 5 is_stmt 1 view .LVU477
 490:Src/foc.c     ****     current2 += ADC_RAW2_CURRENT(ADC_Values_Raw2[1]);
 1926              		.loc 1 490 17 is_stmt 0 view .LVU478
 1927 001a 464A     		ldr	r2, .L127+4
 1928 001c 1188     		ldrh	r1, [r2]
 1929 001e 07EE101A 		vmov	s14, r1	@ int
 1930 0022 B8EEC77A 		vcvt.f32.s32	s14, s14
 1931 0026 DFED445A 		vldr.32	s11, .L127+8
 1932 002a 27EE257A 		vmul.f32	s14, s14, s11
 1933 002e 9FED436A 		vldr.32	s12, .L127+12
 1934 0032 27EE067A 		vmul.f32	s14, s14, s12
 1935 0036 DFED426A 		vldr.32	s13, .L127+16
 1936 003a C7EE267A 		vdiv.f32	s15, s14, s13
 1937 003e 9FED417A 		vldr.32	s14, .L127+20
 1938 0042 87EE878A 		vdiv.f32	s16, s15, s14
 490:Src/foc.c     ****     current2 += ADC_RAW2_CURRENT(ADC_Values_Raw2[1]);
 1939              		.loc 1 490 14 view .LVU479
 1940 0046 4049     		ldr	r1, .L127+24
 1941 0048 D1ED007A 		vldr.32	s15, [r1]
 1942 004c 38EE278A 		vadd.f32	s16, s16, s15
 1943 0050 81ED008A 		vstr.32	s16, [r1]
 491:Src/foc.c     **** 
 1944              		.loc 1 491 5 is_stmt 1 view .LVU480
 491:Src/foc.c     **** 
 1945              		.loc 1 491 17 is_stmt 0 view .LVU481
 1946 0054 5288     		ldrh	r2, [r2, #2]
 1947 0056 07EE902A 		vmov	s15, r2	@ int
 1948 005a F8EEE77A 		vcvt.f32.s32	s15, s15
 1949 005e 67EEA57A 		vmul.f32	s15, s15, s11
 1950 0062 67EE867A 		vmul.f32	s15, s15, s12
 1951 0066 87EEA66A 		vdiv.f32	s12, s15, s13
 1952 006a C6EE078A 		vdiv.f32	s17, s12, s14
 491:Src/foc.c     **** 
 1953              		.loc 1 491 14 view .LVU482
 1954 006e 374A     		ldr	r2, .L127+28
 1955 0070 D2ED007A 		vldr.32	s15, [r2]
 1956 0074 78EEA78A 		vadd.f32	s17, s17, s15
 1957 0078 C2ED008A 		vstr.32	s17, [r2]
 493:Src/foc.c     ****     {
 1958              		.loc 1 493 5 is_stmt 1 view .LVU483
 493:Src/foc.c     ****     {
 1959              		.loc 1 493 8 is_stmt 0 view .LVU484
 1960 007c 022B     		cmp	r3, #2
 1961 007e 10D8     		bhi	.L126
ARM GAS  C:\Users\ncer\AppData\Local\Temp\cceGoFVP.s 			page 53


 1962              	.LVL133:
 1963              	.L118:
 514:Src/foc.c     **** 
 1964              		.loc 1 514 1 view .LVU485
 1965 0080 05B0     		add	sp, sp, #20
 1966              	.LCFI40:
 1967              		.cfi_remember_state
 1968              		.cfi_def_cfa_offset 20
 1969              		@ sp needed
 1970 0082 BDEC028B 		vldm	sp!, {d8}
 1971              	.LCFI41:
 1972              		.cfi_restore 80
 1973              		.cfi_restore 81
 1974              		.cfi_def_cfa_offset 12
 1975 0086 30BD     		pop	{r4, r5, pc}
 1976              	.LVL134:
 1977              	.L125:
 1978              	.LCFI42:
 1979              		.cfi_restore_state
 470:Src/foc.c     ****         Measure_R_Info.USELESS_CNT = 2;
 1980              		.loc 1 470 9 is_stmt 1 view .LVU486
 470:Src/foc.c     ****         Measure_R_Info.USELESS_CNT = 2;
 1981              		.loc 1 470 33 is_stmt 0 view .LVU487
 1982 0088 294C     		ldr	r4, .L127
 1983 008a 314B     		ldr	r3, .L127+32
 1984 008c 6360     		str	r3, [r4, #4]
 471:Src/foc.c     ****         Measure_R_Info.CNT_MAX = 30;
 1985              		.loc 1 471 9 is_stmt 1 view .LVU488
 471:Src/foc.c     ****         Measure_R_Info.CNT_MAX = 30;
 1986              		.loc 1 471 36 is_stmt 0 view .LVU489
 1987 008e 0222     		movs	r2, #2
 1988 0090 E260     		str	r2, [r4, #12]
 472:Src/foc.c     **** 
 1989              		.loc 1 472 9 is_stmt 1 view .LVU490
 472:Src/foc.c     **** 
 1990              		.loc 1 472 32 is_stmt 0 view .LVU491
 1991 0092 1E22     		movs	r2, #30
 1992 0094 2261     		str	r2, [r4, #16]
 481:Src/foc.c     ****         Measure_R_Info.time = 1;
 1993              		.loc 1 481 9 is_stmt 1 view .LVU492
 1994 0096 0FCB     		ldm	r3, {r0, r1, r2, r3}
 1995              	.LVL135:
 481:Src/foc.c     ****         Measure_R_Info.time = 1;
 1996              		.loc 1 481 9 is_stmt 0 view .LVU493
 1997 0098 FFF7FEFF 		bl	Set_Vector
 1998              	.LVL136:
 482:Src/foc.c     **** 
 1999              		.loc 1 482 9 is_stmt 1 view .LVU494
 482:Src/foc.c     **** 
 2000              		.loc 1 482 29 is_stmt 0 view .LVU495
 2001 009c 0123     		movs	r3, #1
 2002 009e 2360     		str	r3, [r4]
 484:Src/foc.c     ****     }
 2003              		.loc 1 484 9 is_stmt 1 view .LVU496
 2004 00a0 EEE7     		b	.L118
 2005              	.LVL137:
 2006              	.L126:
ARM GAS  C:\Users\ncer\AppData\Local\Temp\cceGoFVP.s 			page 54


 495:Src/foc.c     ****         current1 = 0;
 2007              		.loc 1 495 9 view .LVU497
 2008 00a2 FFF7FEFF 		bl	__aeabi_f2d
 2009              	.LVL138:
 495:Src/foc.c     ****         current1 = 0;
 2010              		.loc 1 495 9 is_stmt 0 view .LVU498
 2011 00a6 0446     		mov	r4, r0
 2012 00a8 0D46     		mov	r5, r1
 2013 00aa 18EE900A 		vmov	r0, s17
 2014 00ae FFF7FEFF 		bl	__aeabi_f2d
 2015              	.LVL139:
 2016 00b2 CDE90201 		strd	r0, [sp, #8]
 2017 00b6 18EE100A 		vmov	r0, s16
 2018 00ba FFF7FEFF 		bl	__aeabi_f2d
 2019              	.LVL140:
 2020 00be CDE90001 		strd	r0, [sp]
 2021 00c2 2246     		mov	r2, r4
 2022 00c4 2B46     		mov	r3, r5
 2023 00c6 2348     		ldr	r0, .L127+36
 2024 00c8 FFF7FEFF 		bl	uprintf_polling
 2025              	.LVL141:
 496:Src/foc.c     ****         current2 = 0;
 2026              		.loc 1 496 9 is_stmt 1 view .LVU499
 496:Src/foc.c     ****         current2 = 0;
 2027              		.loc 1 496 18 is_stmt 0 view .LVU500
 2028 00cc 0023     		movs	r3, #0
 2029 00ce 1E4A     		ldr	r2, .L127+24
 2030 00d0 1360     		str	r3, [r2]	@ float
 497:Src/foc.c     ****         Board_Mode = STOP_MODE;
 2031              		.loc 1 497 9 is_stmt 1 view .LVU501
 497:Src/foc.c     ****         Board_Mode = STOP_MODE;
 2032              		.loc 1 497 18 is_stmt 0 view .LVU502
 2033 00d2 1E4A     		ldr	r2, .L127+28
 2034 00d4 1360     		str	r3, [r2]	@ float
 498:Src/foc.c     ****         Measure_R_Info.time = 0;
 2035              		.loc 1 498 9 is_stmt 1 view .LVU503
 498:Src/foc.c     ****         Measure_R_Info.time = 0;
 2036              		.loc 1 498 20 is_stmt 0 view .LVU504
 2037 00d6 0022     		movs	r2, #0
 2038 00d8 1F4B     		ldr	r3, .L127+40
 2039 00da 1A70     		strb	r2, [r3]
 499:Src/foc.c     **** 
 2040              		.loc 1 499 9 is_stmt 1 view .LVU505
 499:Src/foc.c     **** 
 2041              		.loc 1 499 29 is_stmt 0 view .LVU506
 2042 00dc 144B     		ldr	r3, .L127
 2043 00de 1A60     		str	r2, [r3]
 501:Src/foc.c     ****         {
 2044              		.loc 1 501 9 is_stmt 1 view .LVU507
 501:Src/foc.c     ****         {
 2045              		.loc 1 501 27 is_stmt 0 view .LVU508
 2046 00e0 9C68     		ldr	r4, [r3, #8]
 501:Src/foc.c     ****         {
 2047              		.loc 1 501 48 view .LVU509
 2048 00e2 1B69     		ldr	r3, [r3, #16]
 501:Src/foc.c     ****         {
 2049              		.loc 1 501 12 view .LVU510
ARM GAS  C:\Users\ncer\AppData\Local\Temp\cceGoFVP.s 			page 55


 2050 00e4 9C42     		cmp	r4, r3
 2051 00e6 09D2     		bcs	.L122
 503:Src/foc.c     ****         }
 2052              		.loc 1 503 13 is_stmt 1 view .LVU511
 2053 00e8 2146     		mov	r1, r4
 2054 00ea 1C48     		ldr	r0, .L127+44
 2055 00ec FFF7FEFF 		bl	uprintf_polling
 2056              	.LVL142:
 2057              	.L123:
 511:Src/foc.c     ****         Measure_R_Info.cnt = 0;
 2058              		.loc 1 511 9 view .LVU512
 511:Src/foc.c     ****         Measure_R_Info.cnt = 0;
 2059              		.loc 1 511 36 is_stmt 0 view .LVU513
 2060 00f0 0F4B     		ldr	r3, .L127
 2061 00f2 0022     		movs	r2, #0
 2062 00f4 5A61     		str	r2, [r3, #20]	@ float
 512:Src/foc.c     ****     }
 2063              		.loc 1 512 9 is_stmt 1 view .LVU514
 512:Src/foc.c     ****     }
 2064              		.loc 1 512 28 is_stmt 0 view .LVU515
 2065 00f6 0022     		movs	r2, #0
 2066 00f8 9A60     		str	r2, [r3, #8]
 2067 00fa C1E7     		b	.L118
 2068              	.L122:
 508:Src/foc.c     ****             uprintf_polling("current_avg:%f cnt:%d \r\n", Measure_R_Info.current_avg, Measure_R_Inf
 2069              		.loc 1 508 13 is_stmt 1 view .LVU516
 508:Src/foc.c     ****             uprintf_polling("current_avg:%f cnt:%d \r\n", Measure_R_Info.current_avg, Measure_R_Inf
 2070              		.loc 1 508 55 is_stmt 0 view .LVU517
 2071 00fc 0C4A     		ldr	r2, .L127
 2072 00fe D2ED056A 		vldr.32	s13, [r2, #20]
 508:Src/foc.c     ****             uprintf_polling("current_avg:%f cnt:%d \r\n", Measure_R_Info.current_avg, Measure_R_Inf
 2073              		.loc 1 508 110 view .LVU518
 2074 0102 D168     		ldr	r1, [r2, #12]
 508:Src/foc.c     ****             uprintf_polling("current_avg:%f cnt:%d \r\n", Measure_R_Info.current_avg, Measure_R_Inf
 2075              		.loc 1 508 94 view .LVU519
 2076 0104 5B1A     		subs	r3, r3, r1
 508:Src/foc.c     ****             uprintf_polling("current_avg:%f cnt:%d \r\n", Measure_R_Info.current_avg, Measure_R_Inf
 2077              		.loc 1 508 123 view .LVU520
 2078 0106 0133     		adds	r3, r3, #1
 508:Src/foc.c     ****             uprintf_polling("current_avg:%f cnt:%d \r\n", Measure_R_Info.current_avg, Measure_R_Inf
 2079              		.loc 1 508 68 view .LVU521
 2080 0108 07EE903A 		vmov	s15, r3	@ int
 2081 010c F8EE677A 		vcvt.f32.u32	s15, s15
 2082 0110 86EEA77A 		vdiv.f32	s14, s13, s15
 508:Src/foc.c     ****             uprintf_polling("current_avg:%f cnt:%d \r\n", Measure_R_Info.current_avg, Measure_R_Inf
 2083              		.loc 1 508 39 view .LVU522
 2084 0114 82ED067A 		vstr.32	s14, [r2, #24]
 509:Src/foc.c     ****         }
 2085              		.loc 1 509 13 is_stmt 1 view .LVU523
 2086 0118 17EE100A 		vmov	r0, s14
 2087 011c FFF7FEFF 		bl	__aeabi_f2d
 2088              	.LVL143:
 2089 0120 0246     		mov	r2, r0
 2090 0122 0B46     		mov	r3, r1
 2091 0124 0094     		str	r4, [sp]
 2092 0126 0E48     		ldr	r0, .L127+48
 2093 0128 FFF7FEFF 		bl	uprintf_polling
ARM GAS  C:\Users\ncer\AppData\Local\Temp\cceGoFVP.s 			page 56


 2094              	.LVL144:
 2095 012c E0E7     		b	.L123
 2096              	.L128:
 2097 012e 00BF     		.align	2
 2098              	.L127:
 2099 0130 00000000 		.word	Measure_R_Info
 2100 0134 00000000 		.word	ADC_Values_Raw2
 2101 0138 00404E45 		.word	1162756096
 2102 013c 00008039 		.word	964689920
 2103 0140 00004843 		.word	1128792064
 2104 0144 A69B443B 		.word	994352038
 2105 0148 00000000 		.word	.LANCHOR13
 2106 014c 00000000 		.word	.LANCHOR14
 2107 0150 00000000 		.word	.LANCHOR1
 2108 0154 00000000 		.word	.LC5
 2109 0158 00000000 		.word	Board_Mode
 2110 015c 24000000 		.word	.LC6
 2111 0160 44000000 		.word	.LC7
 2112              		.cfi_endproc
 2113              	.LFE184:
 2115              		.section	.text.Theta_Handler,"ax",%progbits
 2116              		.align	1
 2117              		.global	Theta_Handler
 2118              		.syntax unified
 2119              		.thumb
 2120              		.thumb_func
 2121              		.fpu fpv4-sp-d16
 2123              	Theta_Handler:
 2124              	.LFB176:
 291:Src/foc.c     **** 
 2125              		.loc 1 291 1 view -0
 2126              		.cfi_startproc
 2127              		@ args = 0, pretend = 0, frame = 0
 2128              		@ frame_needed = 0, uses_anonymous_args = 0
 2129 0000 08B5     		push	{r3, lr}
 2130              	.LCFI43:
 2131              		.cfi_def_cfa_offset 8
 2132              		.cfi_offset 3, -8
 2133              		.cfi_offset 14, -4
 293:Src/foc.c     ****     switch (Board_Mode)
 2134              		.loc 1 293 5 view .LVU525
 293:Src/foc.c     ****     switch (Board_Mode)
 2135              		.loc 1 293 23 is_stmt 0 view .LVU526
 2136 0002 0120     		movs	r0, #1
 2137 0004 FFF7FEFF 		bl	Get_Position_Rad_Dgree
 2138              	.LVL145:
 293:Src/foc.c     ****     switch (Board_Mode)
 2139              		.loc 1 293 21 view .LVU527
 2140 0008 184B     		ldr	r3, .L140
 2141 000a 83ED000A 		vstr.32	s0, [r3]
 294:Src/foc.c     ****     {
 2142              		.loc 1 294 5 is_stmt 1 view .LVU528
 2143 000e 184B     		ldr	r3, .L140+4
 2144 0010 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 2145 0012 052B     		cmp	r3, #5
 2146 0014 06D8     		bhi	.L130
 2147 0016 052B     		cmp	r3, #5
ARM GAS  C:\Users\ncer\AppData\Local\Temp\cceGoFVP.s 			page 57


 2148 0018 0DD8     		bhi	.L129
 2149 001a DFE803F0 		tbb	[pc, r3]
 2150              	.L133:
 2151 001e 1A       		.byte	(.L136-.L133)/2
 2152 001f 0C       		.byte	(.L129-.L133)/2
 2153 0020 0A       		.byte	(.L135-.L133)/2
 2154 0021 0C       		.byte	(.L129-.L133)/2
 2155 0022 0D       		.byte	(.L134-.L133)/2
 2156 0023 21       		.byte	(.L132-.L133)/2
 2157              		.p2align 1
 2158              	.L130:
 2159 0024 F12B     		cmp	r3, #241
 2160 0026 11D0     		beq	.L137
 2161 0028 F32B     		cmp	r3, #243
 2162 002a 04D1     		bne	.L129
 2163              	.LBB4:
 319:Src/foc.c     ****         break;
 2164              		.loc 1 319 9 view .LVU529
 2165 002c FFF7FEFF 		bl	Muisc_Play_TIM_IRQ_Handler
 2166              	.LVL146:
 320:Src/foc.c     ****     default:
 2167              		.loc 1 320 9 view .LVU530
 2168              	.LBE4:
 324:Src/foc.c     **** 
 2169              		.loc 1 324 1 is_stmt 0 view .LVU531
 2170 0030 01E0     		b	.L129
 2171              	.L135:
 2172              	.LBB5:
 297:Src/foc.c     ****         break;
 2173              		.loc 1 297 9 is_stmt 1 view .LVU532
 2174 0032 FFF7FEFF 		bl	Foc
 2175              	.LVL147:
 298:Src/foc.c     ****     case VF_OPENLOOP:
 2176              		.loc 1 298 9 view .LVU533
 2177              	.L129:
 2178              	.LBE5:
 324:Src/foc.c     **** 
 2179              		.loc 1 324 1 is_stmt 0 view .LVU534
 2180 0036 08BD     		pop	{r3, pc}
 2181              	.L134:
 2182              	.LBB6:
 300:Src/foc.c     ****         break;
 2183              		.loc 1 300 9 is_stmt 1 view .LVU535
 2184 0038 B0EE081A 		vmov.f32	s2, #3.0e+0
 2185 003c 0120     		movs	r0, #1
 2186 003e DFED0D0A 		vldr.32	s1, .L140+8
 2187 0042 B7EE000A 		vmov.f32	s0, #1.0e+0
 2188 0046 FFF7FEFF 		bl	VF_Openloop_Control
 2189              	.LVL148:
 301:Src/foc.c     ****     case TEST_DIRECTION:
 2190              		.loc 1 301 9 view .LVU536
 2191 004a F4E7     		b	.L129
 2192              	.L137:
 303:Src/foc.c     ****         break;
 2193              		.loc 1 303 9 view .LVU537
 2194 004c FFF7FEFF 		bl	Test_Direction
 2195              	.LVL149:
ARM GAS  C:\Users\ncer\AppData\Local\Temp\cceGoFVP.s 			page 58


 304:Src/foc.c     ****     case STOP_MODE:
 2196              		.loc 1 304 9 view .LVU538
 2197 0050 F1E7     		b	.L129
 2198              	.L136:
 306:Src/foc.c     ****         break;
 2199              		.loc 1 306 9 view .LVU539
 2200 0052 9FED090A 		vldr.32	s0, .L140+12
 2201 0056 F0EE400A 		vmov.f32	s1, s0
 2202 005a FFF7FEFF 		bl	SVPWM
 2203              	.LVL150:
 307:Src/foc.c     ****     case WAIT_MODE:
 2204              		.loc 1 307 9 view .LVU540
 2205 005e EAE7     		b	.L129
 2206              	.L132:
 312:Src/foc.c     ****         break;
 2207              		.loc 1 312 9 view .LVU541
 2208 0060 B7EE000A 		vmov.f32	s0, #1.0e+0
 2209 0064 FFF7FEFF 		bl	Measure_R_MS_Handler
 2210              	.LVL151:
 313:Src/foc.c     ****     case MEASURE_L:
 2211              		.loc 1 313 9 view .LVU542
 2212 0068 E5E7     		b	.L129
 2213              	.L141:
 2214 006a 00BF     		.align	2
 2215              	.L140:
 2216 006c 00000000 		.word	Position_Degree
 2217 0070 00000000 		.word	Board_Mode
 2218 0074 00007A44 		.word	1148846080
 2219 0078 00000000 		.word	0
 2220              	.LBE6:
 2221              		.cfi_endproc
 2222              	.LFE176:
 2224              		.section	.text.HAL_TIM_PeriodElapsedCallback,"ax",%progbits
 2225              		.align	1
 2226              		.global	HAL_TIM_PeriodElapsedCallback
 2227              		.syntax unified
 2228              		.thumb
 2229              		.thumb_func
 2230              		.fpu fpv4-sp-d16
 2232              	HAL_TIM_PeriodElapsedCallback:
 2233              	.LVL152:
 2234              	.LFB174:
 236:Src/foc.c     **** 
 2235              		.loc 1 236 1 view -0
 2236              		.cfi_startproc
 2237              		@ args = 0, pretend = 0, frame = 0
 2238              		@ frame_needed = 0, uses_anonymous_args = 0
 236:Src/foc.c     **** 
 2239              		.loc 1 236 1 is_stmt 0 view .LVU544
 2240 0000 08B5     		push	{r3, lr}
 2241              	.LCFI44:
 2242              		.cfi_def_cfa_offset 8
 2243              		.cfi_offset 3, -8
 2244              		.cfi_offset 14, -4
 238:Src/foc.c     ****     {
 2245              		.loc 1 238 5 is_stmt 1 view .LVU545
 238:Src/foc.c     ****     {
ARM GAS  C:\Users\ncer\AppData\Local\Temp\cceGoFVP.s 			page 59


 2246              		.loc 1 238 13 is_stmt 0 view .LVU546
 2247 0002 0368     		ldr	r3, [r0]
 238:Src/foc.c     ****     {
 2248              		.loc 1 238 8 view .LVU547
 2249 0004 0A4A     		ldr	r2, .L148
 2250 0006 9342     		cmp	r3, r2
 2251 0008 03D0     		beq	.L146
 246:Src/foc.c     ****         if(Board_Mode!=VOICE_MODE){
 2252              		.loc 1 246 10 is_stmt 1 view .LVU548
 246:Src/foc.c     ****         if(Board_Mode!=VOICE_MODE){
 2253              		.loc 1 246 13 is_stmt 0 view .LVU549
 2254 000a 0A4A     		ldr	r2, .L148+4
 2255 000c 9342     		cmp	r3, r2
 2256 000e 07D0     		beq	.L147
 2257              	.LVL153:
 2258              	.L142:
 255:Src/foc.c     **** 
 2259              		.loc 1 255 1 view .LVU550
 2260 0010 08BD     		pop	{r3, pc}
 2261              	.LVL154:
 2262              	.L146:
 240:Src/foc.c     ****         {
 2263              		.loc 1 240 9 is_stmt 1 view .LVU551
 240:Src/foc.c     ****         {
 2264              		.loc 1 240 13 is_stmt 0 view .LVU552
 2265 0012 094B     		ldr	r3, .L148+8
 2266 0014 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 240:Src/foc.c     ****         {
 2267              		.loc 1 240 12 view .LVU553
 2268 0016 002B     		cmp	r3, #0
 2269 0018 FAD0     		beq	.L142
 244:Src/foc.c     ****     }
 2270              		.loc 1 244 9 is_stmt 1 view .LVU554
 2271 001a FFF7FEFF 		bl	Theta_Handler
 2272              	.LVL155:
 244:Src/foc.c     ****     }
 2273              		.loc 1 244 9 is_stmt 0 view .LVU555
 2274 001e F7E7     		b	.L142
 2275              	.LVL156:
 2276              	.L147:
 247:Src/foc.c     ****             return ;
 2277              		.loc 1 247 9 is_stmt 1 view .LVU556
 247:Src/foc.c     ****             return ;
 2278              		.loc 1 247 22 is_stmt 0 view .LVU557
 2279 0020 064B     		ldr	r3, .L148+12
 2280 0022 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 247:Src/foc.c     ****             return ;
 2281              		.loc 1 247 11 view .LVU558
 2282 0024 F42B     		cmp	r3, #244
 2283 0026 F3D1     		bne	.L142
 250:Src/foc.c     ****     }
 2284              		.loc 1 250 9 is_stmt 1 view .LVU559
 2285 0028 FFF7FEFF 		bl	Timer_1ms_IRQ_Handler
 2286              	.LVL157:
 254:Src/foc.c     **** }
 2287              		.loc 1 254 5 view .LVU560
 2288 002c F0E7     		b	.L142
ARM GAS  C:\Users\ncer\AppData\Local\Temp\cceGoFVP.s 			page 60


 2289              	.L149:
 2290 002e 00BF     		.align	2
 2291              	.L148:
 2292 0030 00140040 		.word	1073746944
 2293 0034 00100040 		.word	1073745920
 2294 0038 00000000 		.word	Init_OK
 2295 003c 00000000 		.word	Board_Mode
 2296              		.cfi_endproc
 2297              	.LFE174:
 2299              		.section	.rodata.Measure_L.str1.4,"aMS",%progbits,1
 2300              		.align	2
 2301              	.LC8:
 2302 0000 336D7320 		.ascii	"3ms pass!\015\012\000"
 2302      70617373 
 2302      210D0A00 
 2303              		.section	.text.Measure_L,"ax",%progbits
 2304              		.align	1
 2305              		.global	Measure_L
 2306              		.syntax unified
 2307              		.thumb
 2308              		.thumb_func
 2309              		.fpu fpv4-sp-d16
 2311              	Measure_L:
 2312              	.LVL158:
 2313              	.LFB186:
 546:Src/foc.c     ****     Board_Mode = MEASURE_L;
 2314              		.loc 1 546 27 view -0
 2315              		.cfi_startproc
 2316              		@ args = 0, pretend = 0, frame = 0
 2317              		@ frame_needed = 0, uses_anonymous_args = 0
 546:Src/foc.c     ****     Board_Mode = MEASURE_L;
 2318              		.loc 1 546 27 is_stmt 0 view .LVU562
 2319 0000 10B5     		push	{r4, lr}
 2320              	.LCFI45:
 2321              		.cfi_def_cfa_offset 8
 2322              		.cfi_offset 4, -8
 2323              		.cfi_offset 14, -4
 547:Src/foc.c     ****     Set_Vector(U4,duty);
 2324              		.loc 1 547 5 is_stmt 1 view .LVU563
 547:Src/foc.c     ****     Set_Vector(U4,duty);
 2325              		.loc 1 547 16 is_stmt 0 view .LVU564
 2326 0002 094C     		ldr	r4, .L152
 2327 0004 0623     		movs	r3, #6
 2328 0006 2370     		strb	r3, [r4]
 548:Src/foc.c     ****     Time_Counter_Start(&Measure_L_Time_Counter);
 2329              		.loc 1 548 5 is_stmt 1 view .LVU565
 2330 0008 084B     		ldr	r3, .L152+4
 2331 000a 0FCB     		ldm	r3, {r0, r1, r2, r3}
 2332 000c FFF7FEFF 		bl	Set_Vector
 2333              	.LVL159:
 549:Src/foc.c     ****     HAL_Delay(3);
 2334              		.loc 1 549 5 view .LVU566
 2335 0010 0748     		ldr	r0, .L152+8
 2336 0012 FFF7FEFF 		bl	Time_Counter_Start
 2337              	.LVL160:
 550:Src/foc.c     **** 
 2338              		.loc 1 550 5 view .LVU567
ARM GAS  C:\Users\ncer\AppData\Local\Temp\cceGoFVP.s 			page 61


 2339 0016 0320     		movs	r0, #3
 2340 0018 FFF7FEFF 		bl	HAL_Delay
 2341              	.LVL161:
 552:Src/foc.c     ****     Board_Mode=STOP_MODE;
 2342              		.loc 1 552 5 view .LVU568
 2343 001c 0548     		ldr	r0, .L152+12
 2344 001e FFF7FEFF 		bl	uprintf_polling
 2345              	.LVL162:
 553:Src/foc.c     **** 
 2346              		.loc 1 553 5 view .LVU569
 553:Src/foc.c     **** 
 2347              		.loc 1 553 15 is_stmt 0 view .LVU570
 2348 0022 0023     		movs	r3, #0
 2349 0024 2370     		strb	r3, [r4]
 555:Src/foc.c     **** 
 2350              		.loc 1 555 1 view .LVU571
 2351 0026 10BD     		pop	{r4, pc}
 2352              	.L153:
 2353              		.align	2
 2354              	.L152:
 2355 0028 00000000 		.word	Board_Mode
 2356 002c 00000000 		.word	.LANCHOR3
 2357 0030 00000000 		.word	Measure_L_Time_Counter
 2358 0034 00000000 		.word	.LC8
 2359              		.cfi_endproc
 2360              	.LFE186:
 2362              		.comm	Measure_L_Time_Counter,8,4
 2363              		.global	Position_Offset
 2364              		.comm	Position_Degree,4,4
 2365              		.global	RPS
 2366              		.global	Uvects
 2367              		.global	U7
 2368              		.global	U5
 2369              		.global	U1
 2370              		.global	U3
 2371              		.global	U2
 2372              		.global	U6
 2373              		.global	U4
 2374              		.global	U0
 2375              		.global	Motor
 2376              		.comm	Measure_R_Info,28,4
 2377              		.comm	Test_Direction_Info,12,4
 2378              		.comm	Board_Mode,1,1
 2379              		.comm	Ibeta,4,4
 2380              		.comm	Ialpha,4,4
 2381              		.comm	ADC_Values_Raw2,8,4
 2382              		.comm	ADC_Values_Raw,8,4
 2383              		.section	.bss.CCR_Dutys.12983,"aw",%nobits
 2384              		.align	2
 2385              		.set	.LANCHOR9,. + 0
 2388              	CCR_Dutys.12983:
 2389 0000 00000000 		.space	12
 2389      00000000 
 2389      00000000 
 2390              		.section	.bss.U0,"aw",%nobits
 2391              		.align	2
 2392              		.set	.LANCHOR8,. + 0
ARM GAS  C:\Users\ncer\AppData\Local\Temp\cceGoFVP.s 			page 62


 2395              	U0:
 2396 0000 00000000 		.space	16
 2396      00000000 
 2396      00000000 
 2396      00000000 
 2397              		.section	.bss.current1.13004,"aw",%nobits
 2398              		.align	2
 2399              		.set	.LANCHOR13,. + 0
 2402              	current1.13004:
 2403 0000 00000000 		.space	4
 2404              		.section	.bss.current2.13005,"aw",%nobits
 2405              		.align	2
 2406              		.set	.LANCHOR14,. + 0
 2409              	current2.13005:
 2410 0000 00000000 		.space	4
 2411              		.section	.bss.theta.12991,"aw",%nobits
 2412              		.align	2
 2413              		.set	.LANCHOR12,. + 0
 2416              	theta.12991:
 2417 0000 00000000 		.space	4
 2418              		.section	.data.Motor,"aw"
 2419              		.align	2
 2420              		.set	.LANCHOR11,. + 0
 2423              	Motor:
 2424 0000 07       		.byte	7
 2425 0001 000000   		.space	3
 2426 0004 00000000 		.word	0
 2427 0008 00000000 		.word	0
 2428 000c 00000000 		.space	4
 2429              		.section	.data.Position_Offset,"aw"
 2430              		.align	2
 2431              		.set	.LANCHOR10,. + 0
 2434              	Position_Offset:
 2435 0000 20CB5743 		.word	1129827104
 2436              		.section	.data.RPS,"aw"
 2437              		.align	2
 2440              	RPS:
 2441 0000 0000C040 		.word	1086324736
 2442              		.section	.data.U1,"aw"
 2443              		.align	2
 2444              		.set	.LANCHOR6,. + 0
 2447              	U1:
 2448 0000 00       		.byte	0
 2449 0001 00       		.byte	0
 2450 0002 01       		.byte	1
 2451 0003 00       		.space	1
 2452 0004 920A8640 		.word	1082526354
 2453 0008 00000000 		.space	8
 2453      00000000 
 2454              		.section	.data.U2,"aw"
 2455              		.align	2
 2456              		.set	.LANCHOR5,. + 0
 2459              	U2:
 2460 0000 00       		.byte	0
 2461 0001 01       		.byte	1
 2462 0002 00       		.byte	0
 2463 0003 00       		.space	1
ARM GAS  C:\Users\ncer\AppData\Local\Temp\cceGoFVP.s 			page 63


 2464 0004 920A0640 		.word	1074137746
 2465 0008 00000000 		.space	8
 2465      00000000 
 2466              		.section	.data.U3,"aw"
 2467              		.align	2
 2468              		.set	.LANCHOR0,. + 0
 2471              	U3:
 2472 0000 00       		.byte	0
 2473 0001 01       		.byte	1
 2474 0002 01       		.byte	1
 2475 0003 00       		.space	1
 2476 0004 DB0F4940 		.word	1078530011
 2477 0008 00000000 		.space	8
 2477      00000000 
 2478              		.section	.data.U4,"aw"
 2479              		.align	2
 2480              		.set	.LANCHOR3,. + 0
 2483              	U4:
 2484 0000 01       		.byte	1
 2485 0001 00       		.byte	0
 2486 0002 00       		.byte	0
 2487 0003 00       		.space	1
 2488 0004 00000000 		.word	0
 2489 0008 00000000 		.space	8
 2489      00000000 
 2490              		.section	.data.U5,"aw"
 2491              		.align	2
 2492              		.set	.LANCHOR1,. + 0
 2495              	U5:
 2496 0000 01       		.byte	1
 2497 0001 00       		.byte	0
 2498 0002 01       		.byte	1
 2499 0003 00       		.space	1
 2500 0004 368DA740 		.word	1084722486
 2501 0008 00000000 		.space	8
 2501      00000000 
 2502              		.section	.data.U6,"aw"
 2503              		.align	2
 2504              		.set	.LANCHOR4,. + 0
 2507              	U6:
 2508 0000 01       		.byte	1
 2509 0001 01       		.byte	1
 2510 0002 00       		.byte	0
 2511 0003 00       		.space	1
 2512 0004 920A863F 		.word	1065749138
 2513 0008 00000000 		.space	8
 2513      00000000 
 2514              		.section	.data.U7,"aw"
 2515              		.align	2
 2516              		.set	.LANCHOR7,. + 0
 2519              	U7:
 2520 0000 01       		.byte	1
 2521 0001 01       		.byte	1
 2522 0002 01       		.byte	1
 2523 0003 00       		.space	1
 2524 0004 00000000 		.word	0
 2525 0008 00000000 		.space	8
ARM GAS  C:\Users\ncer\AppData\Local\Temp\cceGoFVP.s 			page 64


 2525      00000000 
 2526              		.section	.data.Uvects,"aw"
 2527              		.align	2
 2528              		.set	.LANCHOR2,. + 0
 2531              	Uvects:
 2532 0000 00000000 		.word	U1
 2533 0004 00000000 		.word	U2
 2534 0008 00000000 		.word	U3
 2535 000c 00000000 		.word	U4
 2536 0010 00000000 		.word	U5
 2537 0014 00000000 		.word	U6
 2538              		.text
 2539              	.Letext0:
 2540              		.file 2 "c:\\arm_gcc\\arm-none-eabi\\include\\machine\\_default_types.h"
 2541              		.file 3 "c:\\arm_gcc\\arm-none-eabi\\include\\sys\\_stdint.h"
 2542              		.file 4 "Inc/foc.h"
 2543              		.file 5 "Drivers/CMSIS/Include/core_cm4.h"
 2544              		.file 6 "Drivers/CMSIS/Device/ST/STM32F4xx/Include/system_stm32f4xx.h"
 2545              		.file 7 "Drivers/CMSIS/Device/ST/STM32F4xx/Include/stm32f405xx.h"
 2546              		.file 8 "Drivers/CMSIS/Device/ST/STM32F4xx/Include/stm32f4xx.h"
 2547              		.file 9 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_def.h"
 2548              		.file 10 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_dma.h"
 2549              		.file 11 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_adc.h"
 2550              		.file 12 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_tim.h"
 2551              		.file 13 "Inc/tim.h"
 2552              		.file 14 "c:\\arm_gcc\\arm-none-eabi\\include\\sys\\lock.h"
 2553              		.file 15 "c:\\arm_gcc\\arm-none-eabi\\include\\sys\\_types.h"
 2554              		.file 16 "c:\\arm_gcc\\lib\\gcc\\arm-none-eabi\\9.2.1\\include\\stddef.h"
 2555              		.file 17 "c:\\arm_gcc\\arm-none-eabi\\include\\sys\\reent.h"
 2556              		.file 18 "c:\\arm_gcc\\arm-none-eabi\\include\\math.h"
 2557              		.file 19 "Inc/adc.h"
 2558              		.file 20 "c:\\arm_gcc\\arm-none-eabi\\include\\stdlib.h"
 2559              		.file 21 "mylib/uart_ext.h"
 2560              		.file 22 "mylib/tim_ext.h"
 2561              		.file 23 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal.h"
 2562              		.file 24 "Drivers/CMSIS/Include/arm_math.h"
 2563              		.file 25 "mylib/as5047.h"
 2564              		.file 26 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_tim_ex.h"
ARM GAS  C:\Users\ncer\AppData\Local\Temp\cceGoFVP.s 			page 65


DEFINED SYMBOLS
                            *ABS*:00000000 foc.c
C:\Users\ncer\AppData\Local\Temp\cceGoFVP.s:18     .text.SVPWM_Step:00000000 $t
C:\Users\ncer\AppData\Local\Temp\cceGoFVP.s:25     .text.SVPWM_Step:00000000 SVPWM_Step
C:\Users\ncer\AppData\Local\Temp\cceGoFVP.s:78     .text.SVPWM_Step:00000058 $d
C:\Users\ncer\AppData\Local\Temp\cceGoFVP.s:83     .text.Measure_R_20Khz_Handler:00000000 $t
C:\Users\ncer\AppData\Local\Temp\cceGoFVP.s:89     .text.Measure_R_20Khz_Handler:00000000 Measure_R_20Khz_Handler
C:\Users\ncer\AppData\Local\Temp\cceGoFVP.s:171    .text.Measure_R_20Khz_Handler:00000058 $d
                            *COM*:00000001 Board_Mode
                            *COM*:0000001c Measure_R_Info
C:\Users\ncer\AppData\Local\Temp\cceGoFVP.s:179    .text.UVects_Init:00000000 $t
C:\Users\ncer\AppData\Local\Temp\cceGoFVP.s:185    .text.UVects_Init:00000000 UVects_Init
C:\Users\ncer\AppData\Local\Temp\cceGoFVP.s:261    .text.UVects_Init:0000003c $d
C:\Users\ncer\AppData\Local\Temp\cceGoFVP.s:266    .rodata.Measure_L_20Khz_Handler.str1.4:00000000 $d
C:\Users\ncer\AppData\Local\Temp\cceGoFVP.s:270    .text.Measure_L_20Khz_Handler:00000000 $t
C:\Users\ncer\AppData\Local\Temp\cceGoFVP.s:276    .text.Measure_L_20Khz_Handler:00000000 Measure_L_20Khz_Handler
C:\Users\ncer\AppData\Local\Temp\cceGoFVP.s:336    .text.Measure_L_20Khz_Handler:00000034 $d
                            *COM*:00000008 Measure_L_Time_Counter
C:\Users\ncer\AppData\Local\Temp\cceGoFVP.s:344    .text.Foc_Init:00000000 $t
C:\Users\ncer\AppData\Local\Temp\cceGoFVP.s:351    .text.Foc_Init:00000000 Foc_Init
C:\Users\ncer\AppData\Local\Temp\cceGoFVP.s:437    .text.Foc_Init:00000068 $d
C:\Users\ncer\AppData\Local\Temp\cceGoFVP.s:446    .text.get_area:00000000 $t
C:\Users\ncer\AppData\Local\Temp\cceGoFVP.s:453    .text.get_area:00000000 get_area
C:\Users\ncer\AppData\Local\Temp\cceGoFVP.s:476    .text.get_area:00000010 $d
C:\Users\ncer\AppData\Local\Temp\cceGoFVP.s:481    .text.get_area_u:00000000 $t
C:\Users\ncer\AppData\Local\Temp\cceGoFVP.s:488    .text.get_area_u:00000000 get_area_u
C:\Users\ncer\AppData\Local\Temp\cceGoFVP.s:512    .text.get_area_u:00000010 $d
C:\Users\ncer\AppData\Local\Temp\cceGoFVP.s:518    .text.get_area_u:00000016 $t
C:\Users\ncer\AppData\Local\Temp\cceGoFVP.s:630    .text.get_area_u:00000084 $d
C:\Users\ncer\AppData\Local\Temp\cceGoFVP.s:640    .text.get_t:00000000 $t
C:\Users\ncer\AppData\Local\Temp\cceGoFVP.s:647    .text.get_t:00000000 get_t
C:\Users\ncer\AppData\Local\Temp\cceGoFVP.s:765    .text.get_t:00000098 $d
C:\Users\ncer\AppData\Local\Temp\cceGoFVP.s:770    .text.get_ccr_duty:00000000 $t
C:\Users\ncer\AppData\Local\Temp\cceGoFVP.s:777    .text.get_ccr_duty:00000000 get_ccr_duty
C:\Users\ncer\AppData\Local\Temp\cceGoFVP.s:909    .text.get_ccr_duty:000000f0 $d
C:\Users\ncer\AppData\Local\Temp\cceGoFVP.s:915    .rodata.Set_to_U4.str1.4:00000000 $d
C:\Users\ncer\AppData\Local\Temp\cceGoFVP.s:919    .text.Set_to_U4:00000000 $t
C:\Users\ncer\AppData\Local\Temp\cceGoFVP.s:926    .text.Set_to_U4:00000000 Set_to_U4
C:\Users\ncer\AppData\Local\Temp\cceGoFVP.s:1005   .text.Set_to_U4:0000006c $d
                            *COM*:00000004 Position_Degree
C:\Users\ncer\AppData\Local\Temp\cceGoFVP.s:1013   .text.SVPWM_Normal_CalT1T2:00000000 $t
C:\Users\ncer\AppData\Local\Temp\cceGoFVP.s:1020   .text.SVPWM_Normal_CalT1T2:00000000 SVPWM_Normal_CalT1T2
C:\Users\ncer\AppData\Local\Temp\cceGoFVP.s:1037   .text.SVPWM_Normal_CalT1T2:0000000a $d
C:\Users\ncer\AppData\Local\Temp\cceGoFVP.s:1043   .text.SVPWM_Normal_CalT1T2:00000010 $t
C:\Users\ncer\AppData\Local\Temp\cceGoFVP.s:1167   .text.SVPWM_Normal_CalT1T2:000000c0 $d
C:\Users\ncer\AppData\Local\Temp\cceGoFVP.s:1175   .text.SVPWM:00000000 $t
C:\Users\ncer\AppData\Local\Temp\cceGoFVP.s:1181   .text.SVPWM:00000000 SVPWM
C:\Users\ncer\AppData\Local\Temp\cceGoFVP.s:1285   .text.SVPWM:00000094 $d
C:\Users\ncer\AppData\Local\Temp\cceGoFVP.s:1291   .text.Park_Conv:00000000 $t
C:\Users\ncer\AppData\Local\Temp\cceGoFVP.s:1298   .text.Park_Conv:00000000 Park_Conv
C:\Users\ncer\AppData\Local\Temp\cceGoFVP.s:1331   .text.Park_Conv:00000028 $d
C:\Users\ncer\AppData\Local\Temp\cceGoFVP.s:1336   .text.HAL_ADC_ConvCpltCallback:00000000 $t
C:\Users\ncer\AppData\Local\Temp\cceGoFVP.s:1343   .text.HAL_ADC_ConvCpltCallback:00000000 HAL_ADC_ConvCpltCallback
C:\Users\ncer\AppData\Local\Temp\cceGoFVP.s:1451   .text.HAL_ADC_ConvCpltCallback:000000a8 $d
                            *COM*:00000008 ADC_Values_Raw2
                            *COM*:00000004 Ibeta
                            *COM*:00000004 Ialpha
ARM GAS  C:\Users\ncer\AppData\Local\Temp\cceGoFVP.s 			page 66


C:\Users\ncer\AppData\Local\Temp\cceGoFVP.s:1464   .text.Foc:00000000 $t
C:\Users\ncer\AppData\Local\Temp\cceGoFVP.s:1471   .text.Foc:00000000 Foc
C:\Users\ncer\AppData\Local\Temp\cceGoFVP.s:1553   .text.Foc:00000064 $d
C:\Users\ncer\AppData\Local\Temp\cceGoFVP.s:1562   .text.VF_Openloop_Control:00000000 $t
C:\Users\ncer\AppData\Local\Temp\cceGoFVP.s:1569   .text.VF_Openloop_Control:00000000 VF_Openloop_Control
C:\Users\ncer\AppData\Local\Temp\cceGoFVP.s:1647   .text.VF_Openloop_Control:00000074 $d
C:\Users\ncer\AppData\Local\Temp\cceGoFVP.s:1654   .rodata.Test_Direction.str1.4:00000000 $d
C:\Users\ncer\AppData\Local\Temp\cceGoFVP.s:1664   .text.Test_Direction:00000000 $t
C:\Users\ncer\AppData\Local\Temp\cceGoFVP.s:1670   .text.Test_Direction:00000000 Test_Direction
C:\Users\ncer\AppData\Local\Temp\cceGoFVP.s:1784   .text.Test_Direction:0000008c $d
                            *COM*:0000000c Test_Direction_Info
C:\Users\ncer\AppData\Local\Temp\cceGoFVP.s:1796   .text.Set_Vector:00000000 $t
C:\Users\ncer\AppData\Local\Temp\cceGoFVP.s:1803   .text.Set_Vector:00000000 Set_Vector
C:\Users\ncer\AppData\Local\Temp\cceGoFVP.s:1866   .text.Set_Vector:00000058 $d
C:\Users\ncer\AppData\Local\Temp\cceGoFVP.s:1871   .rodata.Measure_R_MS_Handler.str1.4:00000000 $d
C:\Users\ncer\AppData\Local\Temp\cceGoFVP.s:1881   .text.Measure_R_MS_Handler:00000000 $t
C:\Users\ncer\AppData\Local\Temp\cceGoFVP.s:1887   .text.Measure_R_MS_Handler:00000000 Measure_R_MS_Handler
C:\Users\ncer\AppData\Local\Temp\cceGoFVP.s:2099   .text.Measure_R_MS_Handler:00000130 $d
C:\Users\ncer\AppData\Local\Temp\cceGoFVP.s:2116   .text.Theta_Handler:00000000 $t
C:\Users\ncer\AppData\Local\Temp\cceGoFVP.s:2123   .text.Theta_Handler:00000000 Theta_Handler
C:\Users\ncer\AppData\Local\Temp\cceGoFVP.s:2151   .text.Theta_Handler:0000001e $d
C:\Users\ncer\AppData\Local\Temp\cceGoFVP.s:2157   .text.Theta_Handler:00000024 $t
C:\Users\ncer\AppData\Local\Temp\cceGoFVP.s:2216   .text.Theta_Handler:0000006c $d
C:\Users\ncer\AppData\Local\Temp\cceGoFVP.s:2225   .text.HAL_TIM_PeriodElapsedCallback:00000000 $t
C:\Users\ncer\AppData\Local\Temp\cceGoFVP.s:2232   .text.HAL_TIM_PeriodElapsedCallback:00000000 HAL_TIM_PeriodElapsedCallback
C:\Users\ncer\AppData\Local\Temp\cceGoFVP.s:2292   .text.HAL_TIM_PeriodElapsedCallback:00000030 $d
C:\Users\ncer\AppData\Local\Temp\cceGoFVP.s:2300   .rodata.Measure_L.str1.4:00000000 $d
C:\Users\ncer\AppData\Local\Temp\cceGoFVP.s:2304   .text.Measure_L:00000000 $t
C:\Users\ncer\AppData\Local\Temp\cceGoFVP.s:2311   .text.Measure_L:00000000 Measure_L
C:\Users\ncer\AppData\Local\Temp\cceGoFVP.s:2355   .text.Measure_L:00000028 $d
C:\Users\ncer\AppData\Local\Temp\cceGoFVP.s:2434   .data.Position_Offset:00000000 Position_Offset
C:\Users\ncer\AppData\Local\Temp\cceGoFVP.s:2440   .data.RPS:00000000 RPS
C:\Users\ncer\AppData\Local\Temp\cceGoFVP.s:2531   .data.Uvects:00000000 Uvects
C:\Users\ncer\AppData\Local\Temp\cceGoFVP.s:2519   .data.U7:00000000 U7
C:\Users\ncer\AppData\Local\Temp\cceGoFVP.s:2495   .data.U5:00000000 U5
C:\Users\ncer\AppData\Local\Temp\cceGoFVP.s:2447   .data.U1:00000000 U1
C:\Users\ncer\AppData\Local\Temp\cceGoFVP.s:2471   .data.U3:00000000 U3
C:\Users\ncer\AppData\Local\Temp\cceGoFVP.s:2459   .data.U2:00000000 U2
C:\Users\ncer\AppData\Local\Temp\cceGoFVP.s:2507   .data.U6:00000000 U6
C:\Users\ncer\AppData\Local\Temp\cceGoFVP.s:2483   .data.U4:00000000 U4
C:\Users\ncer\AppData\Local\Temp\cceGoFVP.s:2395   .bss.U0:00000000 U0
C:\Users\ncer\AppData\Local\Temp\cceGoFVP.s:2423   .data.Motor:00000000 Motor
                            *COM*:00000008 ADC_Values_Raw
C:\Users\ncer\AppData\Local\Temp\cceGoFVP.s:2384   .bss.CCR_Dutys.12983:00000000 $d
C:\Users\ncer\AppData\Local\Temp\cceGoFVP.s:2388   .bss.CCR_Dutys.12983:00000000 CCR_Dutys.12983
C:\Users\ncer\AppData\Local\Temp\cceGoFVP.s:2391   .bss.U0:00000000 $d
C:\Users\ncer\AppData\Local\Temp\cceGoFVP.s:2398   .bss.current1.13004:00000000 $d
C:\Users\ncer\AppData\Local\Temp\cceGoFVP.s:2402   .bss.current1.13004:00000000 current1.13004
C:\Users\ncer\AppData\Local\Temp\cceGoFVP.s:2405   .bss.current2.13005:00000000 $d
C:\Users\ncer\AppData\Local\Temp\cceGoFVP.s:2409   .bss.current2.13005:00000000 current2.13005
C:\Users\ncer\AppData\Local\Temp\cceGoFVP.s:2412   .bss.theta.12991:00000000 $d
C:\Users\ncer\AppData\Local\Temp\cceGoFVP.s:2416   .bss.theta.12991:00000000 theta.12991
C:\Users\ncer\AppData\Local\Temp\cceGoFVP.s:2419   .data.Motor:00000000 $d
C:\Users\ncer\AppData\Local\Temp\cceGoFVP.s:2430   .data.Position_Offset:00000000 $d
C:\Users\ncer\AppData\Local\Temp\cceGoFVP.s:2437   .data.RPS:00000000 $d
C:\Users\ncer\AppData\Local\Temp\cceGoFVP.s:2443   .data.U1:00000000 $d
C:\Users\ncer\AppData\Local\Temp\cceGoFVP.s:2455   .data.U2:00000000 $d
ARM GAS  C:\Users\ncer\AppData\Local\Temp\cceGoFVP.s 			page 67


C:\Users\ncer\AppData\Local\Temp\cceGoFVP.s:2467   .data.U3:00000000 $d
C:\Users\ncer\AppData\Local\Temp\cceGoFVP.s:2479   .data.U4:00000000 $d
C:\Users\ncer\AppData\Local\Temp\cceGoFVP.s:2491   .data.U5:00000000 $d
C:\Users\ncer\AppData\Local\Temp\cceGoFVP.s:2503   .data.U6:00000000 $d
C:\Users\ncer\AppData\Local\Temp\cceGoFVP.s:2515   .data.U7:00000000 $d
C:\Users\ncer\AppData\Local\Temp\cceGoFVP.s:2527   .data.Uvects:00000000 $d

UNDEFINED SYMBOLS
cosf
sinf
Time_Counter_Stop
uprintf_polling
HAL_TIM_PWM_Start
HAL_TIMEx_PWMN_Start
HAL_TIM_Base_Start_IT
HAL_TIM_Base_Start
htim8
htim7
arm_sin_cos_f32
__aeabi_f2d
HAL_Delay
uprintf
send_wave
Get_Position_Rad_Dgree
Muisc_Play_TIM_IRQ_Handler
Timer_1ms_IRQ_Handler
Init_OK
Time_Counter_Start
